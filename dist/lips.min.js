/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. DEV
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Tue, 31 Jan 2023 09:57:18 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.lips=t())})(this,function(){"use strict";function i(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function o(e,t){o=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return o(e,t)}function n(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function p(e,t,r){if(n()){p=Reflect.construct}else{p=function e(t,r,n){var i=[null];i.push.apply(i,r);var u=Function.bind.apply(t,i);var a=new u;if(n)o(a,n.prototype);return a}}return p.apply(null,arguments)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)o(e,t)}function _(e){"@babel/helpers - typeof";return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function a(e,t){if(t&&(_(t)==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return i(e)}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function r(e){if(Array.isArray(e))return e}function t(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function h(e,t){if(!e)return;if(typeof e==="string")return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return r(e)||t(e)||h(e)||d()}function w(e){if(Array.isArray(e))return l(e)}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e){return w(e)||t(e)||h(e)||D()}function E(e,t,r,n,i,u,a){try{var o=e[u](a);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function O(o){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=o.apply(e,a);function i(e){E(n,t,r,i,u,"next",e)}function u(e){E(n,t,r,i,u,"throw",e)}i(undefined)})}}function A(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function x(e,t,r){if(t)F(e.prototype,t);if(r)F(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function Y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function C(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,u;for(u=0;u<n.length;u++){i=n[u];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function S(e,t){if(e==null)return{};var r=C(e,t);var n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++){n=u[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function B(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var i=true;var u=false;var a,o;try{for(r=r.call(e);!(i=(a=r.next()).done);i=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){u=true;o=e}finally{try{if(!i&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}return n}function j(e,t){return r(e)||B(e,t)||h(e,t)||d()}function I(e){this.wrapped=e}function P(e){return new I(e)}function N(u){var a,o;function e(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(o){o=o.next=r}else{a=o=r;s(n,i)}})}function s(t,e){try{var r=u[t](e);var n=r.value;var i=n instanceof I;Promise.resolve(i?n.wrapped:n).then(function(e){if(i){s(t==="return"?"return":"next",e);return}c(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){s(a.key,a.arg)}else{o=null}}this._invoke=e;if(typeof u["return"]!=="function"){this["return"]=undefined}}N.prototype[typeof Symbol==="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};N.prototype.next=function(e){return this._invoke("next",e)};N.prototype["throw"]=function(e){return this._invoke("throw",e)};N.prototype["return"]=function(e){return this._invoke("return",e)};function e(e){return function(){return new N(e.apply(this,arguments))}}function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var T={exports:{}};var $={exports:{}};(function(e){var t=function(a){var e=Object.prototype;var f=e.hasOwnProperty;var s;var o=typeof Symbol==="function"?Symbol:{};var i=o.iterator||"@@iterator";var c=o.asyncIterator||"@@asyncIterator";var p=o.toStringTag||"@@toStringTag";function r(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{r({},"")}catch(e){r=function(e,t,r){return e[t]=r}}function _(e,t,r,n){var i=t&&t.prototype instanceof g?t:g;var u=Object.create(i.prototype);var a=new O(n||[]);u._invoke=F(e,r,a);return u}a.wrap=_;function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var v="suspendedStart";var m="suspendedYield";var y="executing";var l="completed";var h={};function g(){}function n(){}function t(){}var b={};r(b,i,function(){return this});var w=Object.getPrototypeOf;var D=w&&w(w(S([])));if(D&&D!==e&&f.call(D,i)){b=D}var u=t.prototype=g.prototype=Object.create(b);n.prototype=t;r(u,"constructor",t);r(t,"constructor",n);n.displayName=r(t,p,"GeneratorFunction");function E(e){["next","throw","return"].forEach(function(t){r(e,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===n||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}else{e.__proto__=t;r(e,p,"GeneratorFunction")}e.prototype=Object.create(u);return e};a.awrap=function(e){return{__await:e}};function A(o,s){function c(e,t,r,n){var i=d(o[e],o,t);if(i.type==="throw"){n(i.arg)}else{var u=i.arg;var a=u.value;if(a&&typeof a==="object"&&f.call(a,"__await")){return s.resolve(a.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)})}return s.resolve(a).then(function(e){u.value=e;r(u)},function(e){return c("throw",e,r,n)})}}var t;function e(r,n){function e(){return new s(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}E(A.prototype);r(A.prototype,c,function(){return this});a.AsyncIterator=A;a.async=function(e,t,r,n,i){if(i===void 0)i=Promise;var u=new A(_(e,t,r,n),i);return a.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})};function F(a,o,s){var c=v;return function e(t,r){if(c===y){throw new Error("Generator is already running")}if(c===l){if(t==="throw"){throw r}return B()}s.method=t;s.arg=r;while(true){var n=s.delegate;if(n){var i=x(n,s);if(i){if(i===h)continue;return i}}if(s.method==="next"){s.sent=s._sent=s.arg}else if(s.method==="throw"){if(c===v){c=l;throw s.arg}s.dispatchException(s.arg)}else if(s.method==="return"){s.abrupt("return",s.arg)}c=y;var u=d(a,o,s);if(u.type==="normal"){c=s.done?l:m;if(u.arg===h){continue}return{value:u.arg,done:s.done}}else if(u.type==="throw"){c=l;s.method="throw";s.arg=u.arg}}}}function x(e,t){var r=e.iterator[t.method];if(r===s){t.delegate=null;if(t.method==="throw"){if(e.iterator["return"]){t.method="return";t.arg=s;x(e,t);if(t.method==="throw"){return h}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return h}var i=n.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return h}if(i.done){t[e.resultName]=i.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=s}}else{return i}t.delegate=null;return h}E(u);r(u,p,"Generator");r(u,i,function(){return this});r(u,"toString",function(){return"[object Generator]"});function C(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(C,this);this.reset(true)}a.keys=function(r){var n=[];for(var e in r){n.push(e)}n.reverse();return function e(){while(n.length){var t=n.pop();if(t in r){e.value=t;e.done=false;return e}}e.done=true;return e}};function S(t){if(t){var e=t[i];if(e){return e.call(t)}if(typeof t.next==="function"){return t}if(!isNaN(t.length)){var r=-1,n=function e(){while(++r<t.length){if(f.call(t,r)){e.value=t[r];e.done=false;return e}}e.value=s;e.done=true;return e};return n.next=n}}return{next:B}}a.values=S;function B(){return{value:s,done:true}}O.prototype={constructor:O,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=s;this.done=false;this.delegate=null;this.method="next";this.arg=s;this.tryEntries.forEach(k);if(!e){for(var t in this){if(t.charAt(0)==="t"&&f.call(this,t)&&!isNaN(+t.slice(1))){this[t]=s}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var n=this;function e(e,t){u.type="throw";u.arg=r;n.next=e;if(t){n.method="next";n.arg=s}return!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];var u=i.completion;if(i.tryLoc==="root"){return e("end")}if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc");var o=f.call(i,"finallyLoc");if(a&&o){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else if(a){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}}else if(o){if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc){i=null}var u=i?i.completion:{};u.type=e;u.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return h}return this.complete(u)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);k(r);return h}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:S(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=s}return h}};return a}(e.exports);try{regeneratorRuntime=t}catch(e){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=t}else{Function("r","regeneratorRuntime = r")(t)}}})($);(function(e){e.exports=$.exports})(T);var z=R(T.exports);var V=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var J=[];var G=[];var H=typeof Uint8Array!=="undefined"?Uint8Array:Array;var W=false;function Q(){W=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){J[t]=e[t];G[e.charCodeAt(t)]=t}G["-".charCodeAt(0)]=62;G["_".charCodeAt(0)]=63}function Z(e){if(!W){Q()}var t,r,n,i,u,a;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}u=e[o-2]==="="?2:e[o-1]==="="?1:0;a=new H(o*3/4-u);n=u>0?o-4:o;var s=0;for(t=0,r=0;t<n;t+=4,r+=3){i=G[e.charCodeAt(t)]<<18|G[e.charCodeAt(t+1)]<<12|G[e.charCodeAt(t+2)]<<6|G[e.charCodeAt(t+3)];a[s++]=i>>16&255;a[s++]=i>>8&255;a[s++]=i&255}if(u===2){i=G[e.charCodeAt(t)]<<2|G[e.charCodeAt(t+1)]>>4;a[s++]=i&255}else if(u===1){i=G[e.charCodeAt(t)]<<10|G[e.charCodeAt(t+1)]<<4|G[e.charCodeAt(t+2)]>>2;a[s++]=i>>8&255;a[s++]=i&255}return a}function K(e){return J[e>>18&63]+J[e>>12&63]+J[e>>6&63]+J[e&63]}function X(e,t,r){var n;var i=[];for(var u=t;u<r;u+=3){n=(e[u]<<16)+(e[u+1]<<8)+e[u+2];i.push(K(n))}return i.join("")}function ee(e){if(!W){Q()}var t;var r=e.length;var n=r%3;var i="";var u=[];var a=16383;for(var o=0,s=r-n;o<s;o+=a){u.push(X(e,o,o+a>s?s:o+a))}if(n===1){t=e[r-1];i+=J[t>>2];i+=J[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=J[t>>10];i+=J[t>>4&63];i+=J[t<<2&63];i+="="}u.push(i);return u.join("")}function te(e,t,r,n,f){var i,u;var l=f*8-n-1;var h=(1<<l)-1;var p=h>>1;var a=-7;var o=r?f-1:0;var s=r?-1:1;var c=e[t+o];o+=s;i=c&(1<<-a)-1;c>>=-a;a+=l;for(;a>0;i=i*256+e[t+o],o+=s,a-=8){}u=i&(1<<-a)-1;i>>=-a;a+=n;for(;a>0;u=u*256+e[t+o],o+=s,a-=8){}if(i===0){i=1-p}else if(i===h){return u?NaN:(c?-1:1)*Infinity}else{u=u+Math.pow(2,n);i=i-p}return(c?-1:1)*u*Math.pow(2,i-n)}function re(e,t,f,l,r,h){var n,i,u;var a=h*8-r-1;var o=(1<<a)-1;var s=o>>1;var p=r===23?Math.pow(2,-24)-Math.pow(2,-77):0;var c=l?0:h-1;var _=l?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){i=isNaN(t)?1:0;n=o}else{n=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-n))<1){n--;u*=2}if(n+s>=1){t+=p/u}else{t+=p*Math.pow(2,1-s)}if(t*u>=2){n++;u/=2}if(n+s>=o){i=0;n=o}else if(n+s>=1){i=(t*u-1)*Math.pow(2,r);n=n+s}else{i=t*Math.pow(2,s-1)*Math.pow(2,r);n=0}}for(;r>=8;e[f+c]=i&255,c+=_,i/=256,r-=8){}n=n<<r|i;a+=r;for(;a>0;e[f+c]=n&255,c+=_,n/=256,a-=8){}e[f+c-_]|=d*128}var ne={}.toString;var ie=Array.isArray||function(e){return ne.call(e)=="[object Array]"};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */var ue=50;c.TYPED_ARRAY_SUPPORT=V.TYPED_ARRAY_SUPPORT!==undefined?V.TYPED_ARRAY_SUPPORT:true;ae();function ae(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function oe(e,t){if(ae()<t){throw new RangeError("Invalid typed array length")}if(c.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=c.prototype}else{if(e===null){e=new c(t)}e.length=t}return e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c)){return new c(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return le(this,e)}return se(this,e,t,r)}c.poolSize=8192;c._augment=function(e){e.__proto__=c.prototype;return e};function se(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return _e(e,t,r,n)}if(typeof t==="string"){return he(e,t,r)}return de(e,t)}c.from=function(e,t,r){return se(null,e,t,r)};if(c.TYPED_ARRAY_SUPPORT){c.prototype.__proto__=Uint8Array.prototype;c.__proto__=Uint8Array}function ce(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function fe(e,t,r,n){ce(t);if(t<=0){return oe(e,t)}if(r!==undefined){return typeof n==="string"?oe(e,t).fill(r,n):oe(e,t).fill(r)}return oe(e,t)}c.alloc=function(e,t,r){return fe(null,e,t,r)};function le(e,t){ce(t);e=oe(e,t<0?0:ve(t)|0);if(!c.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}c.allocUnsafe=function(e){return le(null,e)};c.allocUnsafeSlow=function(e){return le(null,e)};function he(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!c.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=ye(t,r)|0;e=oe(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function pe(e,t){var r=t.length<0?0:ve(t.length)|0;e=oe(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function _e(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(c.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=c.prototype}else{e=pe(e,t)}return e}function de(e,t){if(me(t)){var r=ve(t.length)|0;e=oe(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||Xe(t.length)){return oe(e,0)}return pe(e,t)}if(t.type==="Buffer"&&ie(t.data)){return pe(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function ve(e){if(e>=ae()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+ae().toString(16)+" bytes")}return e|0}c.isBuffer=et;function me(e){return!!(e!=null&&e._isBuffer)}c.compare=function e(t,r){if(!me(t)||!me(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var u=0,a=Math.min(n,i);u<a;++u){if(t[u]!==r[u]){n=t[u];i=r[u];break}}if(n<i)return-1;if(i<n)return 1;return 0};c.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};c.concat=function e(t,r){if(!ie(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return c.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=c.allocUnsafe(r);var u=0;for(n=0;n<t.length;++n){var a=t[n];if(!me(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,u);u+=a.length}return i};function ye(e,t){if(me(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return He(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Ze(e).length;default:if(n)return He(e).length;t=(""+t).toLowerCase();n=true}}}c.byteLength=ye;function ge(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return Ne(this,t,r);case"utf8":case"utf-8":return Se(this,t,r);case"ascii":return Ie(this,t,r);case"latin1":case"binary":return Pe(this,t,r);case"base64":return Oe(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}c.prototype._isBuffer=true;function be(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}c.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){be(this,r,r+1)}return this};c.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){be(this,r,r+3);be(this,r+1,r+2)}return this};c.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){be(this,r,r+7);be(this,r+1,r+6);be(this,r+2,r+5);be(this,r+3,r+4)}return this};c.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return Se(this,0,t);return ge.apply(this,arguments)};c.prototype.equals=function e(t){if(!me(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return c.compare(this,t)===0};c.prototype.inspect=function e(){var t="";var r=ue;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};c.prototype.compare=function f(e,t,r,n,i){if(!me(e)){throw new TypeError("Argument must be a Buffer")}if(t===undefined){t=0}if(r===undefined){r=e?e.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(t<0||r>e.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&t>=r){return 0}if(n>=i){return-1}if(t>=r){return 1}t>>>=0;r>>>=0;n>>>=0;i>>>=0;if(this===e)return 0;var u=i-n;var a=r-t;var l=Math.min(u,a);var o=this.slice(n,i);var s=e.slice(t,r);for(var c=0;c<l;++c){if(o[c]!==s[c]){u=o[c];a=s[c];break}}if(u<a)return-1;if(a<u)return 1;return 0};function we(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=c.from(t,n)}if(me(t)){if(t.length===0){return-1}return De(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return De(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function De(e,t,r,n,f){var i=1;var u=e.length;var a=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;u/=2;a/=2;r/=2}}function o(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var s;if(f){var c=-1;for(s=r;s<u;s++){if(o(e,s)===o(t,c===-1?0:s-c)){if(c===-1)c=s;if(s-c+1===a)return c*i}else{if(c!==-1)s-=s-c;c=-1}}}else{if(r+a>u)r=u-a;for(s=r;s>=0;s--){var l=true;for(var h=0;h<a;h++){if(o(e,s+h)!==o(t,h)){l=false;break}}if(l)return s}}return-1}c.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};c.prototype.indexOf=function e(t,r,n){return we(this,t,r,n,true)};c.prototype.lastIndexOf=function e(t,r,n){return we(this,t,r,n,false)};function Ee(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var u=t.length;if(u%2!==0)throw new TypeError("Invalid hex string");if(n>u/2){n=u/2}for(var a=0;a<n;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function Ae(e,t,r,n){return Ke(He(t,e.length-r),e,r,n)}function Fe(e,t,r,n){return Ke(We(t),e,r,n)}function xe(e,t,r,n){return Fe(e,t,r,n)}function Ce(e,t,r,n){return Ke(Ze(t),e,r,n)}function ke(e,t,r,n){return Ke(Qe(t,e.length-r),e,r,n)}c.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var u=this.length-r;if(n===undefined||n>u)n=u;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return Ee(this,t,r,n);case"utf8":case"utf-8":return Ae(this,t,r,n);case"ascii":return Fe(this,t,r,n);case"latin1":case"binary":return xe(this,t,r,n);case"base64":return Ce(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};c.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Oe(e,t,r){if(t===0&&r===e.length){return ee(e)}else{return ee(e.slice(t,r))}}function Se(e,f,t){t=Math.min(e.length,t);var r=[];var n=f;while(n<t){var i=e[n];var u=null;var a=i>239?4:i>223?3:i>191?2:1;if(n+a<=t){var o,s,l,c;switch(a){case 1:if(i<128){u=i}break;case 2:o=e[n+1];if((o&192)===128){c=(i&31)<<6|o&63;if(c>127){u=c}}break;case 3:o=e[n+1];s=e[n+2];if((o&192)===128&&(s&192)===128){c=(i&15)<<12|(o&63)<<6|s&63;if(c>2047&&(c<55296||c>57343)){u=c}}break;case 4:o=e[n+1];s=e[n+2];l=e[n+3];if((o&192)===128&&(s&192)===128&&(l&192)===128){c=(i&15)<<18|(o&63)<<12|(s&63)<<6|l&63;if(c>65535&&c<1114112){u=c}}}}if(u===null){u=65533;a=1}else if(u>65535){u-=65536;r.push(u>>>10&1023|55296);u=56320|u&1023}r.push(u);n+=a}return je(r)}var Be=4096;function je(e){var t=e.length;if(t<=Be){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=Be))}return r}function Ie(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function Pe(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function Ne(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var u=t;u<r;++u){i+=Ge(e[u])}return i}function Re(e,t,r){var n=e.slice(t,r);var i="";for(var u=0;u<n.length;u+=2){i+=String.fromCharCode(n[u]+n[u+1]*256)}return i}c.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(c.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=c.prototype}else{var u=r-t;i=new c(u,undefined);for(var a=0;a<u;++a){i[a]=this[a+t]}}return i};function Te(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Te(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}return i};c.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){Te(t,r,this.length)}var i=this[t+--r];var u=1;while(r>0&&(u*=256)){i+=this[t+--r]*u}return i};c.prototype.readUInt8=function e(t,r){if(!r)Te(t,1,this.length);return this[t]};c.prototype.readUInt16LE=function e(t,r){if(!r)Te(t,2,this.length);return this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function e(t,r){if(!r)Te(t,2,this.length);return this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function e(t,r){if(!r)Te(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};c.prototype.readUInt32BE=function e(t,r){if(!r)Te(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Te(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}u*=128;if(i>=u)i-=Math.pow(2,8*r);return i};c.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)Te(t,r,this.length);var i=r;var u=1;var a=this[t+--i];while(i>0&&(u*=256)){a+=this[t+--i]*u}u*=128;if(a>=u)a-=Math.pow(2,8*r);return a};c.prototype.readInt8=function e(t,r){if(!r)Te(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};c.prototype.readInt16LE=function e(t,r){if(!r)Te(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function e(t,r){if(!r)Te(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function e(t,r){if(!r)Te(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function e(t,r){if(!r)Te(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function e(t,r){if(!r)Te(t,4,this.length);return te(this,t,true,23,4)};c.prototype.readFloatBE=function e(t,r){if(!r)Te(t,4,this.length);return te(this,t,false,23,4)};c.prototype.readDoubleLE=function e(t,r){if(!r)Te(t,8,this.length);return te(this,t,true,52,8)};c.prototype.readDoubleBE=function e(t,r){if(!r)Te(t,8,this.length);return te(this,t,false,52,8)};function Le(e,t,r,n,i,u){if(!me(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Le(this,t,r,n,u,0)}var a=1;var o=0;this[r]=t&255;while(++o<n&&(a*=256)){this[r+o]=t/a&255}return r+n};c.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Le(this,t,r,n,u,0)}var a=n-1;var o=1;this[r+a]=t&255;while(--a>=0&&(o*=256)){this[r+a]=t/o&255}return r+n};c.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,1,255,0);if(!c.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function Ue(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,u=Math.min(e.length-r,2);i<u;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}c.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Ue(this,t,r,true)}return r+2};c.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Ue(this,t,r,false)}return r+2};function qe(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,u=Math.min(e.length-r,4);i<u;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}c.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{qe(this,t,r,true)}return r+4};c.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{qe(this,t,r,false)}return r+4};c.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Le(this,t,r,n,u-1,-u)}var a=0;var o=1;var s=0;this[r]=t&255;while(++a<n&&(o*=256)){if(t<0&&s===0&&this[r+a-1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};c.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Le(this,t,r,n,u-1,-u)}var a=n-1;var o=1;var s=0;this[r+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&s===0&&this[r+a+1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};c.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,1,127,-128);if(!c.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};c.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Ue(this,t,r,true)}return r+2};c.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Ue(this,t,r,false)}return r+2};c.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,4,2147483647,-2147483648);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{qe(this,t,r,true)}return r+4};c.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Le(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{qe(this,t,r,false)}return r+4};function Me(e,t,r,n,i,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ye(e,t,r,n,i){if(!i){Me(e,t,r,4)}re(e,t,r,n,23,4);return r+4}c.prototype.writeFloatLE=function e(t,r,n){return Ye(this,t,r,true,n)};c.prototype.writeFloatBE=function e(t,r,n){return Ye(this,t,r,false,n)};function $e(e,t,r,n,i){if(!i){Me(e,t,r,8)}re(e,t,r,n,52,8);return r+8}c.prototype.writeDoubleLE=function e(t,r,n){return $e(this,t,r,true,n)};c.prototype.writeDoubleBE=function e(t,r,n){return $e(this,t,r,false,n)};c.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var u=i-n;var a;if(this===t&&n<r&&r<i){for(a=u-1;a>=0;--a){t[a+r]=this[a+n]}}else if(u<1e3||!c.TYPED_ARRAY_SUPPORT){for(a=0;a<u;++a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+u),r)}return u};c.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var u=t.charCodeAt(0);if(u<256){t=u}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!c.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var o=me(t)?t:He(new c(t,i).toString());var s=o.length;for(a=0;a<n-r;++a){this[a+r]=o[a%s]}}return this};var ze=/[^+\/0-9A-Za-z-_]/g;function Ve(e){e=Je(e).replace(ze,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Je(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Ge(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function He(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var u=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)u.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)u.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)u.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)u.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return u}function We(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function Qe(e,t){var r,n,i;var u=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;u.push(i);u.push(n)}return u}function Ze(e){return Z(Ve(e))}function Ke(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Xe(e){return e!==e}function et(e){return e!=null&&(!!e._isBuffer||tt(e)||rt(e))}function tt(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function rt(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&tt(e.slice(0,0))}let nt;try{nt=new TextDecoder}catch(e){}let it;let ut;let v=0;const at=105;const ot={};let st={};let ct;let ft;let lt=0;let ht=0;let pt;let _t=[];let dt;let vt;let mt={useRecords:false,mapsAsObjects:true};let yt=false;class gt{constructor(e){if(e){if(e.useRecords===false&&e.mapsAsObjects===undefined)e.mapsAsObjects=true;if(e.getStructures&&!e.structures)(e.structures=[]).uninitialized=true}Object.assign(this,e)}decode(e,t){if(it){return qt(()=>{Mt();return this?this.decode(e,t):gt.prototype.decode.call(mt,e,t)})}ut=t>-1?t:e.length;v=0;ht=0;ft=null;it=e;dt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength));if(this){st=this;if(this.structures){ct=this.structures;return bt()}else if(!ct||ct.length>0){ct=[]}}else{st=mt;if(!ct||ct.length>0)ct=[]}return bt()}decodeMultiple(r,n){let i,u=0;try{let e=r.length;yt=true;let t=this?this.decode(r,e):zt.decode(r,e);if(n){n(t);while(v<e){u=v;if(n(bt())===false){return}}}else{i=[t];while(v<e){u=v;i.push(bt())}return i}}catch(e){e.lastPosition=u;e.values=i;throw e}finally{yt=false;Mt()}}}function bt(){try{let e=wt();if(v==ut){ct=null;it=null;if(pt)pt=null}else if(v>ut){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!yt){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){Mt();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function wt(){let r=it[v++];let i=r>>5;r=r&31;if(r>23){switch(r){case 24:r=it[v++];break;case 25:if(i==7){return Bt()}r=dt.getUint16(v);v+=2;break;case 26:if(i==7){let t=dt.getFloat32(v);if(st.useFloat32>2){let e=$t[(it[v]&127)<<1|it[v+1]>>7];v+=4;return(e*t+(t>0?.5:-.5)>>0)/e}v+=4;return t}r=dt.getUint32(v);v+=4;break;case 27:if(i==7){let e=dt.getFloat64(v);v+=8;return e}if(st.uint64AsNumber)return it[v++]*72057594037927940+it[v++]*281474976710656+it[v++]*1099511627776+it[v++]*4294967296+it[v++]*16777216+(it[v++]<<16)+(it[v++]<<8)+it[v++];r=dt.getBigUint64(v);v+=8;break;case 31:switch(i){case 2:case 3:case 4:let e=[];let t,r=0;while((t=wt())!=ot){e[r++]=t}return i==4?e:i==3?e.join(""):c.concat(e);case 5:let n;if(st.mapsAsObjects){let e={};while((n=It())!=ot)e[n]=wt();return e}else{if(vt){st.mapsAsObjects=true;vt=false}let e=new Map;while((n=wt())!=ot)e.set(n,wt());return e}case 7:return ot;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+r)}}switch(i){case 0:return r;case 1:return~r;case 2:return St(r);case 3:if(ht>=v){return ft.slice(v-lt,(v+=r)-lt)}if(ht==0&&ut<140&&r<32){let e=r<16?Ot(r):kt(r);if(e!=null)return e}return Ft(r);case 4:let t=new Array(r);for(let e=0;e<r;e++){t[e]=wt()}return t;case 5:if(st.mapsAsObjects){let t={};for(let e=0;e<r;e++){t[It()]=wt()}return t}else{if(vt){st.mapsAsObjects=true;vt=false}let t=new Map;for(let e=0;e<r;e++){t.set(wt(),wt())}return t}case 6:if(r>>8==at){let t=ct[r&255];if(t){if(!t.read)t.read=Et(t);return t.read()}else if(st.getStructures){let e=qt(()=>{it=null;return st.getStructures()});if(ct===true)st.structures=ct=e;else ct.splice.apply(ct,[0,e.length].concat(e));t=ct[r&255];if(t){if(!t.read)t.read=Et(t);return t.read()}else return r}else return r}else{let e=_t[r];if(e){if(e.handlesRead)return e(wt);else return e(wt())}else return new Pt(wt())}case 7:switch(r){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:throw new Error("Unknown token "+r)}default:if(isNaN(r)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+r)}}const Dt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Et(n){let e=n.length;function t(){if(t.count++>2){this.read=new Function("a","r","return function(){a();return {"+n.map(e=>Dt.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}}")(At,wt);return this.read()}At();let r={};for(let t=0;t<e;t++){let e=n[t];r[e]=wt()}return r}t.count=0;return t}function At(e){let t=it[v++];t=t&31;if(t>23){switch(t){case 24:v++;break;case 25:v+=2;break;case 26:v+=4}}}let Ft=xt;function xt(e){let t;if(e<16){if(t=Ot(e))return t}if(e>64&&nt)return nt.decode(it.subarray(v,v+=e));const r=v+e;const n=[];t="";while(v<r){const i=it[v++];if((i&128)===0){n.push(i)}else if((i&224)===192){const u=it[v++]&63;n.push((i&31)<<6|u)}else if((i&240)===224){const u=it[v++]&63;const a=it[v++]&63;n.push((i&31)<<12|u<<6|a)}else if((i&248)===240){const u=it[v++]&63;const a=it[v++]&63;const o=it[v++]&63;let e=(i&7)<<18|u<<12|a<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=Ct.apply(String,n);n.length=0}}if(n.length>0){t+=Ct.apply(String,n)}return t}let Ct=String.fromCharCode;function kt(t){let r=v;let n=new Array(t);for(let e=0;e<t;e++){const i=it[v++];if((i&128)>0){v=r;return}n[e]=i}return Ct.apply(String,n)}function Ot(d){if(d<4){if(d<2){if(d===0)return"";else{let e=it[v++];if((e&128)>1){v-=1;return}return Ct(e)}}else{let e=it[v++];let t=it[v++];if((e&128)>0||(t&128)>0){v-=2;return}if(d<3)return Ct(e,t);let r=it[v++];if((r&128)>0){v-=3;return}return Ct(e,t,r)}}else{let l=it[v++];let h=it[v++];let p=it[v++];let _=it[v++];if((l&128)>0||(h&128)>0||(p&128)>0||(_&128)>0){v-=4;return}if(d<6){if(d===4)return Ct(l,h,p,_);else{let e=it[v++];if((e&128)>0){v-=5;return}return Ct(l,h,p,_,e)}}else if(d<8){let e=it[v++];let t=it[v++];if((e&128)>0||(t&128)>0){v-=6;return}if(d<7)return Ct(l,h,p,_,e,t);let r=it[v++];if((r&128)>0){v-=7;return}return Ct(l,h,p,_,e,t,r)}else{let o=it[v++];let s=it[v++];let c=it[v++];let f=it[v++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){v-=8;return}if(d<10){if(d===8)return Ct(l,h,p,_,o,s,c,f);else{let e=it[v++];if((e&128)>0){v-=9;return}return Ct(l,h,p,_,o,s,c,f,e)}}else if(d<12){let e=it[v++];let t=it[v++];if((e&128)>0||(t&128)>0){v-=10;return}if(d<11)return Ct(l,h,p,_,o,s,c,f,e,t);let r=it[v++];if((r&128)>0){v-=11;return}return Ct(l,h,p,_,o,s,c,f,e,t,r)}else{let n=it[v++];let i=it[v++];let u=it[v++];let a=it[v++];if((n&128)>0||(i&128)>0||(u&128)>0||(a&128)>0){v-=12;return}if(d<14){if(d===12)return Ct(l,h,p,_,o,s,c,f,n,i,u,a);else{let e=it[v++];if((e&128)>0){v-=13;return}return Ct(l,h,p,_,o,s,c,f,n,i,u,a,e)}}else{let e=it[v++];let t=it[v++];if((e&128)>0||(t&128)>0){v-=14;return}if(d<15)return Ct(l,h,p,_,o,s,c,f,n,i,u,a,e,t);let r=it[v++];if((r&128)>0){v-=15;return}return Ct(l,h,p,_,o,s,c,f,n,i,u,a,e,t,r)}}}}}function St(e){return st.copyBuffers?Uint8Array.prototype.slice.call(it,v,v+=e):it.subarray(v,v+=e)}function Bt(){let e=it[v++];let t=it[v++];let r=(e<<8)+t;let n=r>>10&31;let i=r&1023;let u;if(n==0)u=Math.exp(i,-24);else if(n!=31)u=Math.exp(i+1024,n-25);else u=i==0?Infinity:NaN;return r&32768?-u:u}let jt=new Array(4096);function It(){let e=it[v++];if(e>=96&&e<120){e=e-96;if(ht>=v)return ft.slice(v-lt,(v+=e)-lt);else if(!(ht==0&&ut<180))return Ft(e)}else{v--;return wt()}let t=(e<<5^(e>1?dt.getUint16(v):e>0?it[v]:0))&4095;let r=jt[t];let n=v;let i=v+e-3;let u;let a=0;if(r&&r.bytes==e){while(n<i){u=dt.getUint32(n);if(u!=r[a++]){n=1879048192;break}n+=4}i+=3;while(n<i){u=it[n++];if(u!=r[a++]){n=1879048192;break}}if(n===i){v=n;return r.string}i-=3;n=v}r=[];jt[t]=r;r.bytes=e;while(n<i){u=dt.getUint32(n);r.push(u);n+=4}i+=3;while(n<i){u=it[n++];r.push(u)}let o=e<16?Ot(e):kt(e);if(o!=null)return r.string=o;return r.string=Ft(e)}class Pt{constructor(e){this.value=e}}let Nt=typeof window=="object"?window:V;_t[0]=e=>{return new Date(e)};_t[1]=e=>{return new Date(e*1e3)};_t[2]=e=>{return new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};_t[3]=e=>{return BigInt(-1)-new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};const Rt=()=>{let r=wt();let n=r[0];let e=r[1];ct[e&255]=n;n.read=Et(n);let i={};for(let t=2,e=r.length;t<e;t++){let e=n[t-2];i[e]=r[t]}return i};Rt.handlesRead=true;_t[at]=Rt;_t[27]=e=>{return(Nt[e[0]]||Error)(e[1],e[2])};_t[40009]=e=>{if(!pt)pt=new Map;let t=it[v];let r;if(t>>5==4)r=[];else r={};let n={target:r};pt.set(e,n);let i=wt();if(n.used)return Object.assign(r,i);n.target=i;return i};_t[40010]=e=>{let t=pt.get(e);t.used=true;return t.target};_t[258]=e=>new Set(e);(_t[259]=e=>{if(st.mapsAsObjects){st.mapsAsObjects=false;vt=true}return e()}).handlesRead=true;const Tt=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map(e=>e+"Array");const Lt=[64,68,69,70,71,72,77,78,79,81,82];for(let e=0;e<Tt.length;e++){Ut(Tt[e],Lt[e])}function Ut(t,e){_t[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new Nt[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function qt(e){let t=ut;let r=v;let n=lt;let i=ht;let u=ft;let a=pt;let o=new Uint8Array(it.slice(0,ut));let s=ct;let c=st;let f=yt;let l=e();ut=t;v=r;lt=n;ht=i;ft=u;pt=a;it=o;yt=f;ct=s;st=c;dt=new DataView(it.buffer,it.byteOffset,it.byteLength);return l}function Mt(){it=null;pt=null;ct=null}function Yt(e){_t[e.tag]=e.decode}let $t=new Array(147);for(let e=0;e<256;e++){$t[e]=+("1e"+Math.floor(45.15-e*.30103))}let zt=new gt({useRecords:false});zt.decode;zt.decodeMultiple;let Vt;try{Vt=new TextEncoder}catch(e){}let Jt,Gt;const Ht=typeof c!=="undefined";const Wt=Ht?c.allocUnsafeSlow:Uint8Array;const Qt=Ht?c:Uint8Array;const Zt=105;const Kt=256;const Xt=Ht?4294967296:2144337920;let m;let er;let y=0;let tr;const rr=Symbol("record-id");class nr extends gt{constructor(e){super(e);this.offset=0;let i;let o;let s;let c;let r;let a=0;let t=Qt.prototype.utf8Write?function(e,t,r){return m.utf8Write(e,t,r)}:Vt&&Vt.encodeInto?function(e,t){return Vt.encodeInto(e,m.subarray(t)).written}:false;let n=this;let f=64;let u=e&&e.sequential;if(u){f=0;this.structures=[]}let l=[];let p=0;let _=0;if(this.structures&&this.structures.length>f){throw new Error("Too many shared structures")}this.encode=function(e){if(!m){m=new Wt(8192);er=new DataView(m.buffer,0,8192);y=0}tr=m.length-10;if(tr-y<2048){m=new Wt(m.length);er=new DataView(m.buffer,0,m.length);tr=m.length-10;y=0}i=y;r=n.structuredClone?new Map:null;o=n.structures;if(o){if(o.uninitialized)n.structures=o=n.getStructures();let t=o.length;if(t>f&&!u)t=f;if(!o.transitions){o.transitions=Object.create(null);for(let e=0;e<t;e++){let r=o[e];if(!r)continue;let n,i=o.transitions;for(let t=0,e=r.length;t<e;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[rr]=e}a=o.length}if(!u)o.nextId=t}if(s)s=false;c=o||[];try{h(e);n.offset=y;if(r&&r.idsToInsert){y+=r.idsToInsert.length*8;if(y>tr)v(y);n.offset=y;let e=or(m.subarray(i,y),r.idsToInsert);r=null;return e}return m.subarray(i,y)}finally{if(o){if(_<10)_++;if(p>1e4){o.transitions=null;_=0;p=0;if(l.length>0)l=[]}else if(l.length>0&&!u){for(let e=0,t=l.length;e<t;e++){l[e][rr]=undefined}l=[]}if(s&&n.saveStructures){if(n.structures.length>f){n.structures=n.structures.slice(0,f)}if(n.saveStructures(n.structures,a)===false){n.structures=n.getStructures()||[];return n.encode(e)}a=n.structures.length}}}};const h=a=>{if(y>tr)m=v(y);var e=typeof a;var o;if(e==="string"){let i=a.length;let u;if(i<32){u=1}else if(i<256){u=2}else if(i<65536){u=3}else{u=5}let e=i*3;if(y+e>tr)m=v(y+e);if(i<64||!t){let e,t,r,n=y+u;for(e=0;e<i;e++){t=a.charCodeAt(e);if(t<128){m[n++]=t}else if(t<2048){m[n++]=t>>6|192;m[n++]=t&63|128}else if((t&64512)===55296&&((r=a.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;m[n++]=t>>18|240;m[n++]=t>>12&63|128;m[n++]=t>>6&63|128;m[n++]=t&63|128}else{m[n++]=t>>12|224;m[n++]=t>>6&63|128;m[n++]=t&63|128}}o=n-y-u}else{o=t(a,y+u,e)}if(o<24){m[y++]=96|o}else if(o<256){if(u<2){m.copyWithin(y+2,y+1,y+1+o)}m[y++]=120;m[y++]=o}else if(o<65536){if(u<3){m.copyWithin(y+3,y+2,y+2+o)}m[y++]=121;m[y++]=o>>8;m[y++]=o&255}else{if(u<5){m.copyWithin(y+5,y+3,y+3+o)}m[y++]=122;er.setUint32(y,o);y+=4}y+=o}else if(e==="number"){if(a>>>0===a){if(a<24){m[y++]=a}else if(a<256){m[y++]=24;m[y++]=a}else if(a<65536){m[y++]=25;m[y++]=a>>8;m[y++]=a&255}else{m[y++]=26;er.setUint32(y,a);y+=4}}else if(a>>0===a){if(a>=-24){m[y++]=31-a}else if(a>=-256){m[y++]=56;m[y++]=~a}else if(a>=-65536){m[y++]=57;er.setUint16(y,~a);y+=2}else{m[y++]=58;er.setUint32(y,~a);y+=4}}else{let t;if((t=this.useFloat32)>0&&a<4294967296&&a>=-2147483648){m[y++]=250;er.setFloat32(y,a);let e;if(t<4||(e=a*$t[(m[y]&127)<<1|m[y+1]>>7])>>0===e){y+=4;return}else y--}m[y++]=251;er.setFloat64(y,a);y+=8}}else if(e==="object"){if(!a)m[y++]=246;else{if(r){let t=r.get(a);if(t){if(!t.id){let e=r.idsToInsert||(r.idsToInsert=[]);t.id=e.push(t)}m[y++]=217;m[y++]=40010>>8;m[y++]=40010&255;m[y++]=26;er.setUint32(y,t.id);y+=4;return}else r.set(a,{offset:y-i})}let e=a.constructor;if(e===Object){d(a,true)}else if(e===Array){o=a.length;if(o<24){m[y++]=128|o}else{ir(o)}for(let e=0;e<o;e++){h(a[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){m[y++]=217;m[y++]=1;m[y++]=3}o=a.size;if(o<24){m[y++]=160|o}else if(o<256){m[y++]=184;m[y++]=o}else if(o<65536){m[y++]=185;m[y++]=o>>8;m[y++]=o&255}else{m[y++]=186;er.setUint32(y,o);y+=4}for(let[e,t]of a){h(e);h(t)}}else{for(let r=0,e=Jt.length;r<e;r++){let e=Gt[r];if(a instanceof e){let e=Jt[r];let t=e.tag;if(t<24){m[y++]=192|t}else if(t<256){m[y++]=216;m[y++]=t}else if(t<65536){m[y++]=217;m[y++]=t>>8;m[y++]=t&255}else if(t>-1){m[y++]=218;er.setUint32(y,t);y+=4}e.encode.call(this,a,h,v);return}}if(a[Symbol.iterator]){m[y++]=159;for(let e of a){h(e)}m[y++]=255;return}d(a,!a.hasOwnProperty)}}}else if(e==="boolean"){m[y++]=a?245:244}else if(e==="bigint"){if(a<BigInt(1)<<BigInt(64)&&a>=0){m[y++]=27;er.setBigUint64(y,a)}else if(a>-(BigInt(1)<<BigInt(64))&&a<0){m[y++]=59;er.setBigUint64(y,-a-BigInt(1))}else{if(this.largeBigIntToFloat){m[y++]=251;er.setFloat64(y,Number(a))}else{throw new RangeError(a+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}y+=8}else if(e==="undefined"){m[y++]=247}else{throw new Error("Unknown type "+e)}};const d=this.useRecords===false?this.variableMapSize?t=>{let r=Object.keys(t);let n=r.length;if(n<24){m[y++]=160|n}else if(n<256){m[y++]=184;m[y++]=n}else if(n<65536){m[y++]=185;m[y++]=n>>8;m[y++]=n&255}else{m[y++]=186;er.setUint32(y,n);y+=4}let i;for(let e=0;e<n;e++){h(i=r[e]);h(t[i])}}:(t,r)=>{m[y++]=185;let e=y-i;y+=2;let n=0;for(let e in t){if(r||t.hasOwnProperty(e)){h(e);h(t[e]);n++}}m[e+++i]=n>>8;m[e+i]=n&255}:t=>{let r=Object.keys(t);let n,i=c.transitions||(c.transitions=Object.create(null));let u=0;let a=r.length;for(let t=0;t<a;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null);u++}i=n}let e=i[rr];if(e!==undefined){m[y++]=217;m[y++]=Zt;m[y++]=e}else{e=c.nextId++;if(!e){e=0;c.nextId=1}if(e>=Kt){c.nextId=(e=f)+1}i[rr]=e;c[e]=r;if(o&&o.length<=f){m[y++]=217;m[y++]=Zt;m[y++]=e;s=true}else{m[y++]=216;m[y++]=Zt;if(u)p+=_*u;if(l.length>=Kt-f)l.shift()[rr]=undefined;l.push(i);if(a<22)m[y++]=130+a;else ir(a+2);h(r);m[y++]=25;m[y++]=Zt;m[y++]=e;for(let e=0;e<a;e++)h(t[r[e]]);return}}if(a<24){m[y++]=128|a}else{ir(a)}for(let e=0;e<a;e++)h(t[r[e]])};const v=e=>{let t;if(e>16777216){if(e-i>Xt)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(Xt,Math.round(Math.max((e-i)*(e>67108864?1.25:2),16777216)/4096)*4096)}else t=(Math.max(e-i<<2,m.length-1)>>12)+1<<12;let r=new Wt(t);er=new DataView(r.buffer,0,t);if(m.copy)m.copy(r,0,i,e);else r.set(m.slice(i,e));y-=i;i=0;tr=r.length-10;return m=r}}useBuffer(e){m=e;er=new DataView(m.buffer,m.byteOffset,m.byteLength);y=0}}function ir(e){if(e<256){m[y++]=152;m[y++]=e}else if(e<65536){m[y++]=153;m[y++]=e>>8;m[y++]=e&255}else{m[y++]=154;er.setUint32(y,e);y+=4}}Gt=[Date,Set,Error,RegExp,ArrayBuffer,Qt,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,BigUint64Array,Int8Array,Int16Array,Int32Array,BigInt64Array,Float32Array,Float64Array];Jt=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){m[y++]=26;er.setUint32(y,r);y+=4}else{m[y++]=251;er.setFloat64(y,r);y+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{encode(e,t,r){ar(e,r)}},{encode(e,t,r){ar(e,r)}},ur(64),ur(68),ur(69),ur(70),ur(71),ur(72),ur(77),ur(78),ur(79),ur(81),ur(82)];function ur(e){return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let u=t.buffer||t;r(Ht?c.from(u,i,n):new Uint8Array(u,i,n))}}}function ar(e,t){let r=e.byteLength;if(r<24){m[y++]=64+r}else if(r<256){m[y++]=88;m[y++]=r}else if(r<65536){m[y++]=89;m[y++]=r>>8;m[y++]=r&255}else{m[y++]=90;er.setUint32(y,r);y+=4}if(y+r>=m.length){t(y+r)}m.set(e,y);y+=r}function or(n,e){let i;let u=e.length*8;let a=n.length-u;e.sort((e,t)=>e.offset>t.offset?1:-1);while(i=e.pop()){let e=i.offset;let t=i.id;n.copyWithin(e+u,e,a);u-=8;let r=e+u;n[r++]=217;n[r++]=40009>>8;n[r++]=40009&255;n[r++]=26;n[r++]=t>>24;n[r++]=t>>16&255;n[r++]=t>>8&255;n[r++]=t&255;a=e}return n}function sr(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");Gt.unshift(e.Class);Jt.unshift(e)}Yt(e)}let cr=new nr({useRecords:false});cr.encode;var fr={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */Object.defineProperty(fr,"__esModule",{value:true});const lr=8,hr=6,pr=3,_r=(1<<hr)+(pr-1),dr=(1<<16-hr)-1,vr=256;function mr(e,t){var r=0,n=0,i=0,u=0,f=0,a=1<<lr-1,o=0,s=0,l=0,h=new Int32Array(vr),c=0;for(c=0;c<vr;c++){h[c]=-858993460}r=e.length;while(n<r){if((a<<=1)==1<<lr){a=1;f=i;t[i++]=0}if(n>r-_r){t[i++]=e[n++];continue}l=(e[n]+13^e[n+1]-13^e[n+2])&vr-1;s=n-h[l]&dr;h[l]=n;u=n-s;if(u>=0&&u!=n&&e[n]==e[u]&&e[n+1]==e[u+1]&&e[n+2]==e[u+2]){t[f]|=a;for(o=pr;o<_r;o++)if(e[n+o]!=e[u+o])break;t[i++]=o-pr<<lr-hr|s>>lr;t[i++]=s;n+=o}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function yr(e,t,r){t=t|0;var n=0,i=0,u=0,a=0,o=1<<(lr-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<lr){o=1;a=e[n];n=n+1|0}if(a&o){s=(e[n]>>(lr-hr|0))+pr|0;c=(e[n]<<lr|e[n+1|0])&dr;n=n+2|0;u=i-c|0;{while(s>4){r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;s=s-4|0}while(s>0){r[i]=r[u];i=i+1|0;u=u+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function gr(){const e=new TextEncoder("utf-8");return e.encode(br)}const br="@lzjb";const wr=gr();function Dr(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function Er(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function Ar(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function Fr(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=mr(e,r);const i=Er(e.length);const u=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){u.unshift(wr)}return Dr(...u)}function xr(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,wr.length));if(s!==br){throw new Error("Invalid magic value")}}const r=e?wr.length:0;const n=t[r];const i=r+1;const u=r+n+1;const a=Ar(t.slice(i,u));t=t.slice(u);const o=new Uint8Array(a);yr(t,t.length,o);return o}var Cr=fr.pack=Fr;var kr=fr.unpack=xr;function Or(s,c){return c=c||{},new Promise(function(e,t){var r=new XMLHttpRequest,n=[],i=[],u={},a=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:a,headers:{keys:function(){return n},entries:function(){return i},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var o in r.open(c.method||"get",s,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){n.push(t=t.toLowerCase()),i.push([t,r]),u[t]=u[t]?u[t]+","+r:r}),e(a())},r.onerror=t,r.withCredentials="include"==c.credentials,c.headers)r.setRequestHeader(o,c.headers[o]);r.send(c.body||null)})}
/**@license
   *   __ __                          __
   *  / / \ \       _    _  ___  ___  \ \
   * | |   \ \     | |  | || . \/ __>  | |
   * | |    > \    | |_ | ||  _/\__ \  | |
   * | |   / ^ \   |___||_||_|  <___/  | |
   *  \_\ /_/ \_\                     /_/
   *
   * <https://lips.js.org>
   *
   * LIPS is Pretty Simple - Scheme based powerful LISP in JavaScript
   *
   * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
   * Released under the MIT license
   *
   * Includes:
   *
   * ucs2decode function from Punycode v 2.1.1 by Mathias Bynens MIT License
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * contentloaded.js
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   *
   * The rationalize algorithm is by Per M.A. Bothner, Alan Bawden and Marc Feeley.
   * source: Kawa, C-Gambit
   *
   * Build time: Tue, 31 Jan 2023 09:57:18 +0000
   */var Sr=["token"],Br=["stderr","stdin","stdout","command_line"];function jr(i){var u=Ir();return function e(){var t=f(i),r;if(u){var n=f(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return a(this,r)}}function Ir(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function Pr(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Nr(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function Nr(e,t){if(!e)return;if(typeof e==="string")return Rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rr(e,t)}function Rr(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function Tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Lr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tr(Object(r),!0).forEach(function(e){Y(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ur(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new qr(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function qr(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return qr=function e(t){this.s=t,this.n=t.next},qr.prototype={s:null,n:null,next:function e(){return n(this.n.apply(this.s,arguments))},return:function e(t){var r=this.s["return"];return void 0===r?Promise.resolve({value:t,done:!0}):n(r.apply(this.s,arguments))},throw:function e(t){var r=this.s["return"];return void 0===r?Promise.reject(t):n(r.apply(this.s,arguments))}},new qr(e)}var Mr=typeof global!=="undefined"?global:self;if(!Mr.fetch){Mr.fetch=Or}var Yr={pair:q,symbol:L,number:k,array:Array,nil:Mi,character:pa,values:eo,"input-port":Na,"output-port":Ra,regex:RegExp,syntax:vu,eof:Wa,macro:hu,string:_a,"native-symbol":Symbol};var $r=new Map([[NaN,"NaN"],[null,"null"]]);var zr,Vr,Jr;var Gr=Mr.BN;function Hr(r,n){var i=false,e=true,u=r.document,a=u.documentElement,t=u.addEventListener,o=t?"addEventListener":"attachEvent",f=t?"removeEventListener":"detachEvent",s=t?"":"on",c=function e(t){if(t.type=="readystatechange"&&u.readyState!="complete")return;(t.type=="load"?r:u)[f](s+t.type,e,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function t(){try{a.doScroll("left")}catch(e){setTimeout(t,50);return}c("poll")};if(u.readyState=="complete")n.call(r,"lazy");else{if(!t&&a.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}u[o](s+"DOMContentLoaded",c,false);u[o](s+"readystatechange",c,false);r[o](s+"load",c,false)}}function Wr(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments[1]===true;function t(e){if(!Qr()){return}var t=co.get("repr")(e);if(r===null||r instanceof RegExp&&r.test(t)){console.log(co.get("type")(e)+": "+t)}if(n){console.log(e)}}if(Fu(e)){e.then(t)}else{t(e)}return e}function Qr(){return fo&&fo.get("DEBUG",{throwError:false})}function Zr(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Kr(e,t){return"".concat(Zr(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Xr(e,t){return"".concat(Zr(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function en(e,t){return"".concat(Zr(e),"[+-]?").concat(t,"+")}var tn=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var rn="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var nn="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(rn,"|[+-]?[0-9]+))?(?:").concat(rn,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var un=new RegExp("^(#[ie])?".concat(rn,"$"),"i");function an(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var on=function(){var u={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=j(e,3),r=t[0],n=t[1],i=t[2];u[r]=an(n,i)});return u}();var sn={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function cn(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var u=e.charCodeAt(r++);if((u&64512)===56320){t.push(((i&1023)<<10)+(u&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var fn=Object.keys(sn).join("|");var ln="#\\\\(?:x[0-9a-f]+|".concat(fn,"|[\\s\\S])");var hn=new RegExp("^".concat(ln,"$"),"i");function pn(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=j(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===Xr){t=nn+"|"+t}return t}function _n(e){return new RegExp("^(?:"+pn(e)+")$","i")}var dn=_n(Xr);var vn=_n(Kr);var mn=_n(en);var yn=new RegExp("^(?:"+en("","[0-9a-f]")+")$","i");var gn=new RegExp("^(?:"+Kr("","[0-9a-f]")+")$","i");var bn=new RegExp("^(?:"+Xr("","[0-9a-f]")+")$","i");var wn=an("","[0-9a-fA-F]");var Dn=/((?:#[xodbie]){0,2})(.*)/i;function En(e){var t=e.match(Dn);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function An(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=En(e);var n=r.number.split("/");var i=Ia({num:k([n[0],r.radix||t]),denom:k([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function Fn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=En(e);if(r.inexact){return ka(parseInt(r.number,r.radix||t))}return k([r.number,r.radix||t])}function xn(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\(.+)$/);if(t){r=t[1]}}if(r){return pa(r)}throw new Error("Parse: invalid character")}function Cn(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=k(1)}else if(e==="-"){t=k(-1)}else if(e.match(yn)){t=k([e,i])}else if(e.match(gn)){var r=e.split("/");t=Ia({num:k([r[0],i]),denom:k([r[1],i])})}else if(e.match(un)){var n=Sn(e);if(u.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return k(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return k(Number.NEGATIVE_INFINITY)}return k(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(u.inexact){return ka(t.valueOf())}return t}var u=En(e);i=u.radix||i;var r;var n=u.number.match(wn);if(i!==10&&n){r=n}else{r=u.number.match(on[i])}var a,o;o=t(r[2]);if(r[1]){a=t(r[1])}else{a=k(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return a}return Ca({im:o,re:a})}function kn(e){return parseInt(e.toString(),10)===e}function On(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var u=t[3]&&t[3].length;if(i<Math.abs(r)){n=k([t[1].replace(/\./,""),10]);if(u){r-=u}}}return{exponent:r,mantisa:n}}function Sn(e){var t=En(e);var r=parseFloat(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return k(r)}if(kn(r)&&t.number.match(/e\+?[0-9]/i)){return k(r)}var i=On(t.number),u=i.mantisa,a=i.exponent;if(u!==undefined&&a!==undefined){var o=k(10).pow(k(Math.abs(a)));if(t.exact&&a<0){return Ia({num:u,denom:o})}else if(a>0){return k(u).mul(o)}}}r=ka(r);if(t.exact){return r.toRational()}return r}function Bn(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{return _a(JSON.parse(e))}catch(e){throw new Error("Invalid string literal")}}function jn(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new L(e)}function In(e){if(so.hasOwnProperty(e)){return so[e]}if(e.match(/^"[\s\S]*"$/)){return Bn(e)}else if(e[0]==="#"){var t=e.match(tn);if(t){return new RegExp(t[1],t[2])}else if(e.match(hn)){return xn(e)}var r=e.match(/#\\(.+)/);if(r&&cn(r[1]).length===1){return xn(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(mn)){return Fn(e)}else if(e.match(un)){return Sn(e)}else if(e.match(vn)){return An(e)}else if(e.match(dn)){return Cn(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return jn(e)}function Pn(e){return!(["(",")","[","]"].includes(e)||ei.names().includes(e))}function Nn(e){return Pn(e)&&!(e.match(tn)||e.match(/^"[\s\S]*"$/)||e.match(mn)||e.match(un)||e.match(dn)||e.match(vn)||e.match(hn)||["#t","#f","nil","true","false"].includes(e))}var Rn=/"(?:\\[\S\s]|[^"])*"?/g;function Tn(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function Ln(){this.data=[]}Ln.prototype.push=function(e){this.data.push(e)};Ln.prototype.top=function(){return this.data[this.data.length-1]};Ln.prototype.pop=function(){return this.data.pop()};Ln.prototype.is_empty=function(){return!this.data.length};function Un(e){if(e instanceof _a){e=e.valueOf()}var t=new s(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===Ha){break}r.push(n);t.skip()}return r}function qn(e){var t=e.token,r=S(e,Sr);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return Lr({token:t},r)}function Mn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}Mn.prototype.toString=function(){return"#<Thunk>"};function Yn(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return $n(n.apply(this,t))}}function $n(e){while(e instanceof Mn){var t=e;e=e.fn();if(!(e instanceof Mn)){t.cont()}}return e}function zn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof _a){e=e.toString()}if(t){return Un(e)}else{var r=Un(e).map(function(e){if(e.token==="#\\ "){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return Vn(r)}}function Vn(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var u=e[i];if(u==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(u)){t--}else if(["(","["].includes(u)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var a=0,o=n;a<o.length;a++){var s=j(o[a],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function Jn(e){return _(e)==="symbol"||_(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function L(e){if(typeof this!=="undefined"&&this.constructor!==L||typeof this==="undefined"){return new L(e)}if(e instanceof _a){e=e.valueOf()}if(L.list[e]instanceof L){return L.list[e]}this.__name__=e;if(typeof e==="string"){L.list[e]=this}}L.list={};L.literal=Symbol["for"]("__literal__");L.object=Symbol["for"]("__object__");L.is=function(e,t){return e instanceof L&&(t instanceof L&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};L.prototype.toString=function(e){if(Jn(this.__name__)){return Gn(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};L.prototype.literal=function(){if(this.is_gensym()){return this[L.literal]}return this.valueOf()};L.prototype.serialize=function(){if(_a.isString(this.__name__)){return this.__name__}return[Gn(this.__name__)]};L.prototype.valueOf=function(){return this.__name__.valueOf()};L.prototype.is_gensym=function(){return Hn(this.__name__)};function Gn(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function Hn(e){if(_(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var Wn=function(){var t=0;function r(e,t){var r=new L(t);Wu(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof L){if(e.is_gensym()){return e}e=e.valueOf()}if(Hn(e)){return L(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function Qn(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=Oo(e);n.fulfilled=true;n.pending=false;return e});_i(this,"_promise",e,{hidden:true});if(Du(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});_i(this,"__promise__",e);this.then=false}Qn.prototype.then=function(e){return new Qn(this.valueOf().then(e))};Qn.prototype["catch"]=function(e){return new Qn(this.valueOf()["catch"](e))};Qn.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};Qn.prototype.toString=function(){if(this.__pending__){return Qn.pending_str}if(this.__rejected__){return Qn.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};Qn.pending_str="#<js-promise (pending)>";Qn.rejected_str="#<js-promise (rejected)>";function Zn(e){if(Array.isArray(e)){return Promise.all(Kn(e)).then(Xn)}return e}function Kn(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof Qn){t[r]=new Xa(n)}else{t[r]=n}}return t}function Xn(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof Xa){t[r]=n.valueOf()}else{t[r]=n}}return t}var ei={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this.__list__)},type:function e(t){return this.get(t).type},get:function e(t){return this.__list__[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this.__events__[t]}else{this.__events__=this.__events__.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this.__events__[t]){this.__events__[t]=[r]}else{this.__events__[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this.__events__[t]){this.__events__[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){this.trigger("remove");delete this.__list__[t]},append:function e(t,r,n){this.trigger("append");this.__list__[t]={seq:t,symbol:r,type:n}},__events__:{},__list__:{}};function ti(e){return ei.names().includes(e)}function ri(e){return ei.__builtins__.includes(e)}function ni(e){return ei.type(e)===ei.LITERAL}var ii=[["'",new L("quote"),ei.LITERAL],["`",new L("quasiquote"),ei.LITERAL],[",@",new L("unquote-splicing"),ei.LITERAL],[",",new L("unquote"),ei.LITERAL],["'>",new L("quote-promise"),ei.LITERAL]];var ui=ii.map(function(e){return e[0]});Object.freeze(ui);Object.defineProperty(ei,"__builtins__",{writable:false,value:ui});ii.forEach(function(e){var t=j(e,3),r=t[0],n=t[1],i=t[2];ei.append(r,n,i)});var s=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;A(this,p);_i(this,"__input__",e.replace(/\r/g,""));var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return u[r]},set:function e(t){u[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}x(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return Ha}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return Ha}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return Ha}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return Ha}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var u=i.match(/\n/g);if(u){this._line+=u.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return Ha}return pa(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function c(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.prev_char,n=t["char"],i=t.next_char;var u=j(e,4),a=u[0],o=u[1],s=u[2],f=u[3];if(e.length!==5){throw new Error("Lexer: Invald rule of length ".concat(e.length))}if(!n.match(a)){return false}if(!ai(o,r)){return false}if(!ai(s,i)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function f(){if(this._i>=this.__input__.length){return false}var e=true;e:for(var t=this._i,r=this.__input__.length;t<r;++t){var n=this.__input__[t];var i=this.__input__[t-1]||"";var u=this.__input__[t+1]||"";if(n==="\n"){++this._line;var a=this._newline;if(this._state===null){this._newline=t+1}if(this._whitespace&&this._state===null){this._next=t+1;this._col=this._i-a;return true}}if(e&&this._state===null&&n.match(/\s/)){if(this._whitespace){if(!u.match(/\s/)){this._next=t+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=t+1;continue}}e=false;var o=Pr(p.rules),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(this.match_rule(c,{prev_char:i,char:n,next_char:u})){var l=c[c.length-1];this._state=l;if(this._state===null){this._next=t+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){o.e(e)}finally{o.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();s.symbol_rule=function e(t,r){var n=s.literal_rule(t,r,s.boundary,/\S/);return n.concat([[/\S/,/\S/,s.boundary,null,null],[/\S/,/\S/,null,null,s.symbol],[/\S/,null,s.boundary,s.symbol,null]])};s.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var u=[];for(var a=0,o=t.length;a<o;++a){var s=[];s.push(t[a]);s.push(t[a-1]||n);s.push(t[a+1]||i);if(a===0){s.push(null);s.push(r)}else if(a===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}u.push(s)}return u};s.string=Symbol["for"]("string");s.string_escape=Symbol["for"]("string_escape");s.symbol=Symbol["for"]("symbol");s.comment=Symbol["for"]("comment");s.regex=Symbol["for"]("regex");s.regex_init=Symbol["for"]("regex_init");s.regex_class=Symbol["for"]("regex_class");s.character=Symbol["for"]("character");s.bracket=Symbol["for"]("bracket");s.b_symbol=Symbol["for"]("b_symbol");s.b_comment=Symbol["for"]("b_comment");s.i_comment=Symbol["for"]("i_comment");s.l_datum=Symbol["for"]("l_datum");s.dot=Symbol["for"]("dot");s.boundary=/^$|[\s()[\]']/;s._rules=[[/"/,null,null,s.string,null],[/"/,null,null,null,s.string],[/"/,null,null,s.string_escape,s.string],[/\\/,null,null,s.string,s.string_escape],[/./,/\\/,null,s.string_escape,s.string],[/#/,null,/[bdxoeitf]/i,null,s.symbol],[/#/,null,/\\/,null,s.character],[/\\/,/#/,/\s/,s.character,s.character],[/\\/,/#/,/[()[\]]/,s.character,s.character],[/\s/,/\\/,null,s.character,null],[/\S/,null,s.boundary,s.character,null],[/#/,s.boundary,/\//,null,s.regex_init],[/./,/\//,null,s.regex_init,s.regex],[/[ \t]/,null,null,s.regex,s.regex],[/\[/,null,null,s.regex,s.regex_class],[/\]/,/[^\\]/,null,s.regex_class,s.regex],[/[()[\]]/,null,null,s.regex,s.regex],[/\//,/\\/,null,s.regex,s.regex],[/\//,/[^#]/,s.boundary,s.regex,null],[/[gimyus]/,/\//,s.boundary,s.regex,null],[/[gimyus]/,/\//,/[gimyus]/,s.regex,s.regex],[/[gimyus]/,/[gimyus]/,s.boundary,s.regex,null],[/;/,/^$|[^#]/,null,null,s.comment],[/[\s\S]/,null,/\n/,s.comment,null],[/\s/,null,null,s.comment,s.comment],[/#/,null,/\|/,null,s.b_comment],[/\s/,null,null,s.b_comment,s.b_comment],[/#/,/\|/,null,s.b_comment,null],[/#/,null,/;/,null,s.i_comment],[/;/,/#/,null,s.i_comment,null],[/#/,null,/[0-9]/,null,s.l_datum],[/=/,/[0-9]/,null,s.l_datum,null],[/#/,/[0-9]/,null,s.l_datum,null],[/\./,s.boundary,/,/,null,null],[/\|/,null,null,null,s.b_symbol],[/\s/,null,null,s.b_symbol,s.b_symbol],[/\|/,null,s.boundary,s.b_symbol,null]];s._brackets=[[/[()[\]]/,null,null,null,null]];s._symbol_rules=[[/\S/,s.boundary,s.boundary,null,null],[/\S/,s.boundary,null,null,s.symbol],[/\S/,null,s.boundary,null,null],[/\S/,null,null,null,s.symbol],[/\S/,null,s.boundary,s.symbol,null]];s._cache={valid:false,rules:null};ei.on(["remove","append"],function(){s._cache.valid=false;s._cache.rules=null});Object.defineProperty(s,"rules",{get:function e(){if(s._cache.valid){return s._cache.rules}var t=ei.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=ei.get(t),n=r.type,i=r.symbol;var u;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=i}if(n===ei.SYMBOL){u=s.symbol_rule(t,a)}else{u=s.literal_rule(t,a)}return e.concat(u)},[]);s._cache.rules=s._rules.concat(s._brackets,r,s._symbol_rules);s._cache.valid=true;return s._cache.rules}});function ai(e,t){return e===null||t.match(e)}var oi=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,u=t.formatter,a=u===void 0?qn:u;A(this,o);if(e instanceof _a){e=e.toString()}_i(this,"_formatter",a,{hidden:true});_i(this,"__lexer__",new s(e));_i(this,"__env__",r);_i(this,"_meta",i,{hidden:true});_i(this,"_refs",[],{hidden:true});_i(this,"_state",{parentheses:0},{hidden:true})}x(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=O(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===Ha)){t.next=4;break}return t.abrupt("return",Ha);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===Ha)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=O(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){var r=["(","["].includes(t);if(r){this._state.parentheses++}return r}},{key:"is_close",value:function e(t){var r=[")","]"].includes(t);if(r){this._state.parentheses--}return r}},{key:"read_list",value:function(){var e=O(z.mark(function e(){var r,n,i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=U,n=r;case 1:t.next=4;return this.peek();case 4:i=t.sent;if(!(i===Ha)){t.next=7;break}return t.abrupt("break",27);case 7:if(!this.is_close(i)){t.next=10;break}this.skip();return t.abrupt("break",27);case 10:if(!(i==="."&&r!==U)){t.next=17;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;t.next=25;break;case 17:t.t0=q;t.next=20;return this._read_object();case 20:t.t1=t.sent;t.t2=U;u=new t.t0(t.t1,t.t2);if(r===U){r=u}else{n.cdr=u}n=u;case 25:t.next=1;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=O(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===Ha)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",In(r));case 6:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return Lo(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=O(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof si){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"ballanced",value:function e(){return this._state.parentheses===0}},{key:"ballancing_error",value:function e(t){var r=this._state.parentheses;var n=new Error("Parser: expected parenthesis but eof found");var i=new RegExp("\\){".concat(r,"}$"));n.__code__=[t.toString().replace(i,"")];throw n}},{key:"_resolve_object",value:function(){var t=O(z.mark(function e(r){var n=this;var i;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!zi(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof q)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=O(z.mark(function e(r){return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof q)){t.next=15;break}if(!(r.car instanceof si)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof si)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=O(z.mark(function e(){var r,n,i,u,a,o,s,c,f;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===Ha)){t.next=5;break}return t.abrupt("return",r);case 5:if(!ti(r)){t.next=39;break}n=ei.get(r);i=ri(r);this.skip();t.next=11;return this._read_object();case 11:a=t.sent;if(i){t.next=26;break}o=this.__env__.get(n.symbol);if(!(typeof o==="function")){t.next=26;break}if(!ni(r)){t.next=19;break}return t.abrupt("return",o.call(this.__env__,a));case 19:if(!(a===U)){t.next=23;break}return t.abrupt("return",o.apply(this.__env__));case 23:if(!(a instanceof q)){t.next=25;break}return t.abrupt("return",o.apply(this.__env__,a.to_array(false)));case 25:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 26:if(ni(r)){u=new q(n.symbol,new q(a,U))}else{u=new q(n.symbol,a)}if(!i){t.next=29;break}return t.abrupt("return",u);case 29:if(!(o instanceof hu)){t.next=38;break}t.next=32;return this.evaluate(u);case 32:s=t.sent;if(!(s instanceof q||s instanceof L)){t.next=35;break}return t.abrupt("return",q.fromArray([L("quote"),s]));case 35:return t.abrupt("return",s);case 38:throw new Error("Parse Error: invlid parser extension: "+n.symbol);case 39:c=this.match_datum_ref(r);if(!(c!==null)){t.next=45;break}this.skip();if(!this._refs[c]){t.next=44;break}return t.abrupt("return",new si(c,this._refs[c]));case 44:throw new Error("Parse Error: invalid datum label #".concat(c,"#"));case 45:f=this.match_datum_label(r);if(!(f!==null)){t.next=52;break}this.skip();this._refs[f]=this._read_object();return t.abrupt("return",this._refs[f]);case 52:if(!this.is_open(r)){t.next=57;break}this.skip();return t.abrupt("return",this.read_list());case 57:return t.abrupt("return",this.read_value());case 58:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var si=function(){function r(e,t){A(this,r);this.name=e;this.data=t}x(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function ci(e,t){return fi.apply(this,arguments)}function fi(){fi=e(z.mark(function e(r,n){var i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!n){if(co){n=co.get("**interaction-environment**",{throwError:false})}else{n=fo}}i=new oi(r,{env:n});case 2:t.next=5;return P(i.read_object());case 5:u=t.sent;if(!i.ballanced()){i.ballancing_error(u)}if(!(u===Ha)){t.next=9;break}return t.abrupt("break",13);case 9:t.next=11;return u;case 11:t.next=2;break;case 13:case"end":return t.stop()}}},e)}));return fi.apply(this,arguments)}function li(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(Fu(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return hi(e,t,r)}if(zi(e)){return pi(e,t,r)}return t(e)}function hi(t,r,e){if(t.find(Fu)){return li(Zn(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return r(e)},e)}return r(t)}function pi(t,e,r){var i=Object.keys(t);var n=[],u=[];var a=i.length;while(a--){var o=i[a];var s=t[o];n[a]=s;if(Fu(s)){u.push(s)}}if(u.length){return li(Zn(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function _i(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,u=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!u})}function di(e){return vi.apply(this,arguments)}function vi(){vi=O(z.mark(function e(r){var n,i,u,a,o,s,c;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=[];i=false;u=false;t.prev=3;o=Ur(r);case 5:t.next=7;return o.next();case 7:if(!(i=!(s=t.sent).done)){t.next=13;break}c=s.value;n.push(c);case 10:i=false;t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);u=true;a=t.t0;case 19:t.prev=19;t.prev=20;if(!(i&&o["return"]!=null)){t.next=24;break}t.next=24;return o["return"]();case 24:t.prev=24;if(!u){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:return t.abrupt("return",n);case 30:case"end":return t.stop()}}},e,null,[[3,15,19,29],[20,,24,28]])}));return vi.apply(this,arguments)}function mi(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(Du(t)){return t}throw new Error("Invalid matcher")}function g(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=yi(r)}}if(e){t.__name__=e}else if(t.name&&!Zu(t)){t.__name__=t.name}return t}function yi(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function gi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function bi(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function wi(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=Pr(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var u=f(i,t);if(u!==-1){return u}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[u]===Symbol["for"]("symbol")&&!Nn(n[o])}function i(){var e=r[u+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var u=0;var a={};for(var o=0;o<n.length;++o){if(typeof r[u]==="undefined"){return o}if(r[u]instanceof Ai){var s;if(["+","*"].includes(r[u].flag)){while(o<n.length){s=e(r[u].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;u++;continue}else if(r[u].flag==="?"){s=e(r[u].patterns,n.slice(o));if(s===-1){o-=2}else{u++}continue}}else if(r[u]instanceof RegExp){if(!n[o].match(r[u])){return-1}}else if(ys.LString.isString(r[u])){if(r[u].valueOf()!==n[o]){return-1}}else if(_(r[u])==="symbol"){if(r[u]===Symbol["for"]("*")){a[u]=a[u]||0;if(["(","["].includes(n[o])){a[u]++}else if([")","]"].includes(n[o])){a[u]--}if(typeof r[u+1]!=="undefined"&&a[u]===0&&i()===-1||a[u]>0){continue}}else if(t()){return-1}}else if(r[u]instanceof Array){var c=f(r[u],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;u++;continue}else{return-1}u++}if(r.length!==u){return-1}return n.length}}function Di(e){this.__code__=e.replace(/\r/g,"")}Di.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}};Di.match=wi;Di.prototype._options=function e(t){var r=Di.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var u=n.shift||{1:[]};return Lr(Lr(Lr({},r),t),{},{exceptions:{specials:[].concat(M(r.exceptions.specials),M(i)),shift:Lr(Lr({},u),{},{1:[].concat(M(r.exceptions.shift[1]),M(u[1]))})}})};Di.prototype.indent=function e(t){var r=zn(this.__code__,true);return this._indent(r,t)};Di.exception_shift=function(u,e){function t(e){if(!e.length){return false}if(e.indexOf(u)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=Pr(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(u.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var a=j(i[n],2),o=a[0],s=a[1];if(t(s)){return+o}}return-1};Di.prototype._indent=function f(e,l){var t=this._options(l);var r=bi(e);var n=gi(e);var i=e[e.length-n.length-1];var h=e[e.length-1];if(h.token.match(/^"[\S\s]+[^"]$/)){return r+t.indent}if(n&&n.length){if(n[0].line>0){t.offset=0}if(n.toString()===e.toString()&&Yo(n)){return t.offset+n[0].col}else if(n.length===1){return t.offset+n[0].col+1}else{var u=-1;if(i){var a=Di.exception_shift(i.token,t);if(a!==-1){u=a}}if(u===-1){u=Di.exception_shift(n[1].token,t)}if(u!==-1){return t.offset+n[0].col+u}else if(n[0].line<n[1].line){return t.offset+n[0].col+1}else if(n.length>3&&n[1].line===n[3].line){if(n[1].token==="("||n[1].token==="["){return t.offset+n[1].col}return t.offset+n[3].col}else if(n[0].line===n[1].line){return t.offset+t.indent+n[0].col}else{var o=n.slice(2);for(var s=0;s<o.length;++s){var c=o[s];if(c.token.trim()){return c.col}}}}}else{return 0}return r+t.indent};function Ei(e){this.pattern=e}Ei.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};Ei.prototype.match=function(e){return e.match(this.pattern)};function Ai(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}Ai.prototype.toString=function(){var e=this.patterns.map(function(e){return nu(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};Di.Pattern=Ai;Di.Ahead=Ei;var Fi=/^[[(]$/;var xi=/^[\])]$/;var Ci=/[^()[\]]/;var ki=new Ei(/[^)\]]/);var Oi=Symbol["for"]("*");var Si=new Ai([Fi,Oi,xi],[Ci],"+");var Bi=new Ai([Fi,Oi,xi],"+");var ji=new Ai([Symbol["for"]("symbol")],"?");var Ii=new Ai([Symbol["for"]("symbol")],"*");var Pi=[Fi,Ii,xi];var Ni=new Ai([Fi,Symbol["for"]("symbol"),Oi,xi],"+");var Ri=Ui("define","lambda","define-macro","syntax-rules");var Ti=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var Li=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function Ui(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}Di.rules=[[[Bi],0,ki],[[Fi,Ui("begin","cond-expand")],1],[[Fi,Li,ji,Fi,Ni,xi],1],[[Fi,Li,ji,Si],1,ki],[[Fi,Li,Fi,Ni],1,ki],[[Fi,Ti,new Ai([/[^()[\]]/],"+"),Bi],1,ki],[[Fi,Bi],1,ki],[[Fi,Ci,Bi],1,ki],[[Fi,Ui("lambda","if"),Ci],1,ki],[[Fi,Ui("while"),Ci,Bi],1,ki],[[Fi,Ui("if"),Ci,Oi],1],[[Fi,Ri,Pi],0,ki],[[Fi,Ri,Pi,Rn],0,ki],[[Fi,Ri,Pi,Rn,Bi],0,ki],[[Fi,Ri,Pi,Bi],0,ki]];Di.prototype["break"]=function(){var f=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var l=function e(t){if(t.token.match(Rn)||t.token.match(tn)){return t.token}else{return t.token.replace(/\s+/," ")}};var h=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!ti(n)){return t.length-r-1}}};var e=zn(f,true).map(l).filter(function(e){return e!=="\n"});var t=Di.rules;e:for(var r=1;r<e.length;++r){if(!e[r].trim()){continue}var n=e.slice(0,r);var i={};t.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!i[e]){i[e]=gi(n,e)}});var u=Pr(t),p;try{for(u.s();!(p=u.n()).done;){var a=j(p.value,3),_=a[0],o=a[1],s=a[2];o=o.valueOf();var d=o>0?i[o]:n;var v=d.filter(function(e){return e.trim()&&!ti(e)});var m=h(d);var y=wi(_,v);var g=e.slice(r).find(function(e){return e.trim()&&!ti(e)});if(y&&(s instanceof Ei&&s.match(g)||!s)){var c=r-m;if(e[c]!=="\n"){if(!e[c].trim()){e[c]="\n"}else{e.splice(c,0,"\n");r++}}r+=m;continue e}}}catch(e){u.e(e)}finally{u.f()}}this.__code__=e.join("");return this};Di.prototype._spaces=function(e){return new Array(e+1).join(" ")};Di.prototype.format=function c(e){var t=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var r=zn(t,true);var n=this._options(e);var i=0;var u=0;for(var a=0;a<r.length;++a){var o=r[a];if(o.token==="\n"){i=this._indent(r.slice(0,a),n);u+=i;if(r[a+1]){r[a+1].token=this._spaces(i);i--;u--;for(var s=a+2;s<r.length;++s){r[s].offset+=u;r[s].col+=i;if(r[s].token==="\n"){a=s-1;break}}}}}return r.map(function(e){if(e.token.match(Rn)){if(e.token.match(/\n/)){var t=new Array(e.col+1).join(" ");var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function qi(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var u=t&&e||e.slice();var a;if(!e.length){return i}a=u.pop();do{if(r.call(a)===n){u.push.apply(u,a)}else{i.push(a)}}while(u.length&&(a=u.pop())!==undefined);i.reverse();return i}function Mi(){}Mi.prototype.toString=function(){return"()"};Mi.prototype.valueOf=function(){return undefined};Mi.prototype.serialize=function(){return 0};Mi.prototype.to_object=function(){return{}};Mi.prototype.append=function(e){return new q(e,U)};Mi.prototype.to_array=function(){return[]};var U=new Mi;function q(e,t){if(typeof this!=="undefined"&&this.constructor!==q||typeof this==="undefined"){return new q(e,t)}this.car=e;this.cdr=t}function Yi(u,a){return function e(t){Eo(u,t,["pair","nil"]);if(t===U){return[]}var r=[];var n=t;while(true){if(n instanceof q){if(n.haveCycles("cdr")){break}var i=n.car;if(a&&i instanceof q){i=this.get(u).call(this,i)}r.push(i);n=n.cdr}else if(n===U){break}else{throw new Error("".concat(u,": can't convert improper list"))}}return r}}q.prototype.flatten=function(){return q.fromArray(qi(this.to_array()))};q.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===U||!(t instanceof q)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};q.match=function(e,t){if(e instanceof L){return L.is(e,t)}else if(e instanceof q){return q.match(e.car,t)||q.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return q.match(e,t)})}else if(zi(e)){return Object.values(e).some(function(e){return q.match(e,t)})}return false};q.prototype.find=function(e){return q.match(this,e)};q.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof q){if(n.has(e)){return n.get(e)}var t=new q;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[Yu]=e[Yu];return t}return e}return i(this)};q.prototype.last_pair=function(){var e=this;while(true){if(e.cdr===U){return e}e=e.cdr}};q.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof q){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof q){t=t.concat(this.cdr.to_array())}return t};q.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof q||r&&e instanceof Array&&e[qu]){return e}if(t===false){var n=U;for(var i=e.length;i--;){n=new q(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=M(e)}var u=U;var a=e.length;while(a--){var o=e[a];if(o instanceof Array){o=q.fromArray(o,t,r)}else if(typeof o==="string"){o=_a(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=k(o)}u=new q(o,u)}return u};q.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof q&&t.car instanceof q){var n=t.car;var i=n.car;if(i instanceof L){i=i.__name__}if(i instanceof _a){i=i.valueOf()}var u=n.cdr;if(u instanceof q){u=u.to_object(e)}if(Fo(u)){if(!e){u=u.valueOf()}}r[i]=u;t=t.cdr}else{break}}return r};q.fromPairs=function(e){return e.reduce(function(e,t){return new q(new q(new L(t[0]),t[1]),e)},U)};q.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return q.fromPairs(e)};q.prototype.reduce=function(e){var t=this;var r=U;while(true){if(t!==U){r=e(r,t.car);t=t.cdr}else{break}}return r};q.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=U;while(e!==U){var r=e.cdr;e.cdr=t;t=e;e=r}return t};q.prototype.transform=function(n){function i(e){if(e instanceof q){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof q){t=i(t)}var r=n(e.cdr);if(r instanceof q){r=i(r)}return new q(t,r)}return e}return i(this)};q.prototype.map=function(e){if(typeof this.car!=="undefined"){return new q(e(this.car),this.cdr===U?U:this.cdr.map(e))}else{return U}};var $i=new Map;function zi(e){return e&&_(e)==="object"&&e.constructor===Object}var Vi=Object.getOwnPropertyNames(Array.prototype);var Ji=[];Vi.forEach(function(e){Ji.push(Array[e],Array.prototype[e])});function Gi(e){e=Bu(e);return Ji.includes(e)}function Hi(e){return Du(e)&&(Zu(e)||e.__doc__)}function Wi(r){var e=r.constructor||Object;var n=zi(r);var i=Du(r[Symbol.asyncIterator])||Du(r[Symbol.iterator]);var u;if($i.has(e)){u=$i.get(e)}else{$i.forEach(function(e,t){t=Bu(t);if(r.constructor===t&&(t===Object&&n&&!i||t!==Object)){u=e}})}return u}var Qi=new Map;[[true,"#t"],[false,"#f"],[null,"null"],[undefined,"#<undefined>"]].forEach(function(e){var t=j(e,2),r=t[0],n=t[1];Qi.set(r,n)});function Zi(r){if(r&&_(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=nu(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&_(t)==="object"&&t.constructor===Object){n[e]=Zi(t)}else{n[e]=nu(t)}});return n}return r}function Ki(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Xi(e,t){return e.hasOwnProperty(t)&&Du(e.toString)}function eu(e){if(ea(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(Du(t)&&Zu(t)){if(e[$u]&&t.hasOwnProperty("__name__")){var r=t.__name__;if(_a.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(_(n)==="symbol"){n=Gn(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(Xi(e,"toString")){return e.toString()}else if(e.name&&!Zu(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var tu=new Map;[[Error,function(e){return e.message}],[q,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.markCycles()}return e.toString.apply(e,[r].concat(M(i)))}],[pa,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[_a,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=j(e,2),r=t[0],n=t[1];tu.set(r,n)});var ru=[L,k,hu,eo,Na,Ra,Ka,Qn];function nu(e,t,c){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(Qi.has(e)){return Qi.get(e)}if(iu(e)){return"#<prototype>"}if(e){var r=e.constructor;if(tu.has(r)){for(var n=arguments.length,f=new Array(n>3?n-3:0),i=3;i<n;i++){f[i-3]=arguments[i]}return tu.get(r)(e,{quote:t,skip_cycles:c,pair_args:f})}}var u=Pr(ru),l;try{for(u.s();!(l=u.n()).done;){var h=l.value;if(e instanceof h){return e.toString(t)}}}catch(e){u.e(e)}finally{u.f()}if([U,Ha].includes(e)){return e.toString()}if(Du(e)){return eu(e)}if(e===Mr){return"#<js:global>"}if(e===null){return"null"}if(_(e)==="object"){var a=e.constructor;if(!a){a=Object}var o;if(typeof a.__class__==="string"){o=a.__class__}else{var s=Wi(e);if(s){if(Du(s)){return s(e,t)}else{throw new Error("toString: Invalid repr value")}}o=a.name}if(Du(e.toString)&&Zu(e.toString)){return e.toString().valueOf()}if(Oo(e)==="instance"){if(Zu(a)&&a.__name__){o=a.__name__.valueOf()}else if(!ea(a)){o="instance"}}if(Co(e,Symbol.iterator)){if(o){return"#<iterator(".concat(o,")>")}return"#<iterator>"}if(Co(e,Symbol.asyncIterator)){if(o){return"#<asyncIterator(".concat(o,")>")}return"#<asyncIterator>"}if(o!==""){return"#<"+o+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}function iu(e){return e&&_(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}q.prototype.markCycles=function(){uu(this);return this};q.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[Yu]&&this[Yu][e])};function uu(e){var t=[];var i=[];var u=[];function a(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof q){if(n.includes(r)){if(!u.includes(r)){u.push(r)}if(!e[Yu]){e[Yu]={}}e[Yu][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=Yn(function e(t,r){if(t instanceof q){delete t.ref;delete t[Yu];a(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new Mn(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[Yu][t]instanceof q){var r=n.indexOf(e[Yu][t]);e[Yu][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return u.includes(e)});n.forEach(function(e,t){e[Mu]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}q.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[Mu]){i.push(this[Mu]+"(")}else if(!n){i.push("(")}var u;if(this[Yu]&&this[Yu].car){u=this[Yu].car}else{u=nu(this.car,e,true)}if(u!==undefined){i.push(u)}if(this.cdr instanceof q){if(this[Yu]&&this[Yu].cdr){i.push(" . ");i.push(this[Yu].cdr)}else{if(this.cdr[Mu]){i.push(" . ")}else{i.push(" ")}var a=this.cdr.toString(e,{nested:true});i.push(a)}}else if(this.cdr!==U){i=i.concat([" . ",nu(this.cdr,e,true)])}if(!n||this[Mu]){i.push(")")}return i.join("")};q.prototype.set=function(e,t){this[e]=t;if(t instanceof q){this.markCycles()}};q.prototype.append=function(e){if(e instanceof Array){return this.append(q.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof q){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==U){while(true){if(t instanceof q&&t.cdr!==U){t=t.cdr}else{break}}t.cdr=e}return this};q.prototype.serialize=function(){return[this.car,this.cdr]};q.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===U){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function au(e){return e<0?-e:e}function ou(e,t){var r=b(t),n=r[0],i=r.slice(1);while(i.length>0){var u=i,a=j(u,1),o=a[0];if(!e(n,o)){return false}var s=i;var c=b(s);n=c[0];i=c.slice(1)}return true}function su(e,t){if(Du(e)){return Du(t)&&Bu(e)===Bu(t)}else if(e instanceof k){if(!(t instanceof k)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return su(k(e),k(t))}else if(e instanceof pa){if(!(t instanceof pa)){return false}return e.__char__===t.__char__}else{return e===t}}function cu(e,t){if(Oo(e)!==Oo(t)){return false}if(!fu(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof _a){return e.valueOf()===t.valueOf()}return su(e,t)}function fu(e){return e instanceof L||_a.isString(e)||e===U||e===null||e instanceof pa||e instanceof k||e===true||e===false}var lu=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function hu(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==hu||typeof this==="undefined"){return new hu(e,t)}Eo("Macro",e,"string",1);Eo("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=yi(r)}}this.__name__=e;this.__fn__=t}hu.defmacro=function(e,t,r,n){var i=new hu(e,t,r,n);i.__defmacro__=true;return i};hu.prototype.invoke=function(e,t,r){var n=t.env,i=t.dynamic_scope,u=t.error;var a={dynamic_scope:i,error:u,macro_expand:r};var o=this.__fn__.call(n,e,a,this.__name__);return o};hu.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var pu="define-macro";var _u=-1e4;function du(c){return function(){var r=O(z.mark(function e(r,y){var u,g,n,i,s,D,E,A,F,x,C,b,a,w,o;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:o=function e(){o=O(z.mark(function e(r,n,i){var h,u,a,p,o,_,s,d,c,v,f,l,m;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof q&&r.car instanceof L)){t.next=50;break}if(!r[qu]){t.next=3;break}return t.abrupt("return",r);case 3:h=r.car.valueOf();u=i.get(r.car,{throwError:false});a=D(r.car);p=a||E(u,r)||A(u);if(!(p&&r.cdr.car instanceof q)){t.next=28;break}if(!a){t.next=15;break}g=x(r.cdr.car);t.next=12;return b(r.cdr.car,n);case 12:o=t.sent;t.next=17;break;case 15:g=F(r.cdr.car);o=r.cdr.car;case 17:t.t0=q;t.t1=r.car;t.t2=q;t.t3=o;t.next=23;return w(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!C(h,u)){t.next=50;break}_=u instanceof vu?r:r.cdr;t.next=32;return u.invoke(_,Lr(Lr({},y),{},{env:i}),true);case 32:s=t.sent;if(!(u instanceof vu)){t.next=41;break}d=s,c=d.expr,v=d.scope;if(!(c instanceof q)){t.next=40;break}if(!(n!==-1&&n<=1||n<_u)){t.next=38;break}return t.abrupt("return",c);case 38:if(n!==-1){n=n-1}return t.abrupt("return",w(c,n,v));case 40:s=c;case 41:if(!(s instanceof L)){t.next=43;break}return t.abrupt("return",to(s));case 43:if(!(s instanceof q)){t.next=48;break}if(!(n!==-1&&n<=1||n<_u)){t.next=46;break}return t.abrupt("return",s);case 46:if(n!==-1){n=n-1}return t.abrupt("return",w(s,n,i));case 48:if(!fu(s)){t.next=50;break}return t.abrupt("return",s);case 50:f=r.car;if(!(f instanceof q)){t.next=55;break}t.next=54;return w(f,n,i);case 54:f=t.sent;case 55:l=r.cdr;if(!(l instanceof q)){t.next=60;break}t.next=59;return w(l,n,i);case 59:l=t.sent;case 60:m=new q(f,l);return t.abrupt("return",m);case 62:case"end":return t.stop()}}},e)}));return o.apply(this,arguments)};w=function e(t,r,n){return o.apply(this,arguments)};a=function e(){a=O(z.mark(function e(r,n){var i;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r===U)){t.next=2;break}return t.abrupt("return",U);case 2:i=r.car;t.t0=q;t.t1=q;t.t2=i.car;t.next=8;return w(i.cdr,n,u);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return b(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}}},e)}));return a.apply(this,arguments)};b=function e(t,r){return a.apply(this,arguments)};C=function e(t,r){return r instanceof hu&&r.__defmacro__&&!g.includes(t)};x=function e(t){return[].concat(M(g),M(t.to_array(false).map(function(e){if(e instanceof q){return e.car.valueOf()}throw new Error("macroexpand: Invalid let binding")})))};F=function e(t){var r=[];while(true){if(t!==U){if(t instanceof L){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(M(g),r)};A=function e(t){return t===i};E=function e(t,r){return t===s&&r.cdr.car instanceof q};D=function e(t){var r=t.valueOf();return n.includes(r)};u=y["env"]=this;g=[];n=["let","let*","letrec"];i=co.get("lambda");s=co.get("define");if(!(r.cdr instanceof q&&k.isNumber(r.cdr.car))){t.next=21;break}t.t0=to;t.next=19;return w(r,r.cdr.car.valueOf(),u);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=to;t.next=25;return w(r,1,u);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=to;t.next=30;return w(r,-1,u);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function vu(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}vu.__merge_env__=Symbol["for"]("merge");vu.prototype=Object.create(hu.prototype);vu.prototype.invoke=function(e,t,r){var n=t.error,i=t.env;var u={error:n,env:i,dynamic_scope:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};vu.prototype.constructor=vu;vu.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};vu.className="syntax";var mu=function(e){u(r,e);var t=jr(r);function r(){A(this,r);return t.apply(this,arguments)}return x(r)}(vu);vu.Parameter=mu;function yu(e,t,w,D){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var E={"...":{symbols:{},lists:[]},symbols:{}};var A=r.expansion,C=r.define;function F(e){if(Qr()){console.log(e)}}F(w);function x(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;F({code:t&&nu(t,true),pattern:e&&nu(e,true)});if(fu(e)&&!(e instanceof L)){return cu(e,t)}if(e instanceof L&&w.includes(e.literal())){var c=A.ref(t);if(L.is(t,e)){if(typeof c==="undefined"){return true}return c===C||c===co}return false}if(e instanceof q&&e.car instanceof q&&e.car.cdr instanceof q&&L.is(e.car.cdr.car,D)){F(">> 0");if(t===U){F({pattern:e.toString()});if(e.car.car instanceof L){if(e.car.cdr instanceof q&&L.is(e.car.cdr.car,D)){var f=e.car.car.valueOf();var l=e.last_pair();if(L.is(l.car,D)){E["..."].symbols[f]=null;return true}else{return false}}var h=e.car.car.valueOf();if(E["..."].symbols[h]){throw new Error("syntax: named ellipsis can only "+"appear onces")}E["..."].symbols[h]=t}}}if(e instanceof q&&e.cdr instanceof q&&L.is(e.cdr.car,D)){if(e.cdr.cdr!==U){if(e.cdr.cdr instanceof q){var p=e.cdr.cdr.length();var _=t.length();var i=t;while(_-1>p){i=i.cdr;_--}var d=i.cdr;i.cdr=U;if(!x(e.cdr.cdr,d,r,n)){return false}}}if(e.car instanceof L){var u=e.car.__name__;if(E["..."].symbols[u]&&!r.includes(u)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}F(">> 1");if(t===U){F(">> 2");if(n){F("NIL");E["..."].symbols[u]=U}else{F("NULL");E["..."].symbols[u]=null}}else if(t instanceof q&&(t.car instanceof q||t.car===U)){F(">> 3 "+n);if(n){if(E["..."].symbols[u]){var a=E["..."].symbols[u];if(a===U){a=new q(U,new q(t,U))}else{a=a.append(new q(t,U))}E["..."].symbols[u]=a}else{E["..."].symbols[u]=new q(t,U)}}else{F(">> 4");E["..."].symbols[u]=new q(t,U)}}else{F(">> 6");if(t instanceof q){F(">> 7 "+n);r.push(u);if(!E["..."].symbols[u]){E["..."].symbols[u]=new q(t,U)}else{var v=E["..."].symbols[u];E["..."].symbols[u]=v.append(new q(t,U))}F({IIIIII:E["..."].symbols[u].toString()})}else{F(">> 8");return false}}return true}else if(e.car instanceof q){var m=M(r);if(t===U){F(">> 9");E["..."].lists.push(U);return true}F(">> 10");var y=t;while(y instanceof q){if(!x(e.car,y.car,m,true)){return false}y=y.cdr}return true}return false}if(e instanceof L){if(L.is(e,D)){throw new Error("syntax: invalid usage of ellipsis")}F(">> 11");var o=e.__name__;if(w.includes(o)){return true}F({name:o,ellipsis:n});if(n){E["..."].symbols[o]=E["..."].symbols[o]||[];E["..."].symbols[o].push(t)}E.symbols[o]=t;if(!E.symbols[o]);return true}if(e instanceof q&&t instanceof q){F(">> 12");F({a:12,code:t&&t.toString(),pattern:e.toString()});if(t.cdr===U){var g=e.car instanceof L&&e.cdr instanceof L;if(g){if(!x(e.car,t.car,r,n)){return false}F(">> 12 | 1");var s=e.cdr.valueOf();if(!(s in E.symbols)){E.symbols[s]=U}s=e.car.valueOf();if(!(s in E.symbols)){E.symbols[s]=t.car}return true}}F({pattern:e.toString(),code:t.toString()});if(e.cdr instanceof q&&e.car instanceof L&&e.cdr.cdr instanceof q&&e.cdr.car instanceof L&&L.is(e.cdr.cdr.car,D)&&e.cdr.cdr.cdr instanceof q&&!L.is(e.cdr.cdr.cdr.car,D)&&x(e.car,t.car,r,n)&&x(e.cdr.cdr.cdr,t.cdr,r,n)){var b=e.cdr.car.__name__;F({pattern:e.car.toString(),code:t.car.toString(),name:b});if(w.includes(b)){return true}E["..."].symbols[b]=null;return true}F("recur");if(x(e.car,t.car,r,n)&&x(e.cdr,t.cdr,r,n)){return true}}else if(e===U&&(t===U||t===undefined)){return true}else if(e.car instanceof q&&L.is(e.car.car,D)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(x(e,t)){return E}}function gu(e,i){function u(t){if(t instanceof q){if(!i.length){return t}var e=u(t.car);var r=u(t.cdr);return new q(e,r)}else if(t instanceof L){var n=i.find(function(e){return e.gensym===t});if(n){return L(n.name)}return t}else{return t}}return u(e)}function bu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var O=e.bindings,t=e.expr,S=e.scope,a=e.symbols,f=e.names,B=e.ellipsis;var c={};function o(e){if(e instanceof L){return true}return["string","symbol"].includes(_(e))}function j(e){if(!o(e)){var t=Oo(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===B){throw new Error("syntax: internal error, ellipis not transformed")}var n=_(r);if(["string","symbol"].includes(n)){if(r in O.symbols){return O.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var u=i[0];if(u in O.symbols){return q.fromArray([L("."),O.symbols[u]].concat(i.slice(1).map(function(e){return _a(e)})))}}}if(a.includes(r)){return L(r)}return s(r)}function I(e){if(Qr()){console.log(e)}}function s(e){if(!c[e]){var t=S.ref(e);var r=Wn(e);if(t){var n=S.get(e);S.set(r,n)}else{var i=S.get(e,{throwError:false});if(typeof i!=="undefined"){S.set(r,i)}}f.push({name:e,gensym:r});c[e]=r;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),a=b(u),o=a[0],s=a.slice(1);if(c[o]){Wu(r,"__object__",[c[o]].concat(M(s)))}}}return c[e]}function P(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;I(" ==> "+e.toString(true));I(t);if(e instanceof L){var u=e.valueOf();I("[t 1");if(t[u]){if(t[u]instanceof q){var c=t[u],f=c.car,l=c.cdr;if(i){var h=f.car,p=f.cdr;if(p!==U){n(u,new q(p,U))}return h}if(l!==U){n(u,l)}return f}else if(t[u]instanceof Array){n(u,t[u].slice(1));return t[u][0]}}return j(u)}if(e instanceof q){if(e.car instanceof L&&e.cdr instanceof q&&L.is(e.cdr.car,B)){I("[t 2");var a=e.car.valueOf();var o=t[a];I({expr:e.toString(true),name:a,bindings:t,item:o});if(o===null){return}else if(o){I({b:t[a].toString()});if(o instanceof q){I("[t 2 Pair "+i);I({______:o.toString()});var s=o.car,_=o.cdr;if(i){if(_!==U){I("|| next 1");n(a,_)}I({car:s.toString()});return s}else{if(s.cdr!==U){I("|| next 2");n(a,new q(s.cdr,_))}I({car:s.car.toString()});return s.car}}else if(o instanceof Array){I("[t 2 Array "+i);if(i){n(a,o.slice(1));return q.fromArray(o)}else{var d=o.slice(1);if(d.length){n(a,d)}return o[0]}}else{return o}}}I("[t 3 recur "+e.toString());var v=P(e.car,t,r,n);var m=P(e.cdr,t,r,n);return new q(v,m)}return e}function R(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,M(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof q||e===U||e instanceof Array&&e.length})}function T(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function N(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},e=n.disabled;I("traverse>> "+i.toString());if(i instanceof q){if(!e&&i.car instanceof q&&L.is(i.car.car,B)){return N(i.car.cdr,{disabled:true})}if(i.cdr instanceof q&&L.is(i.cdr.car,B)&&!e){I(">> 1");var t=O["..."].symbols;var f=Object.values(t);if(f.length&&f.every(function(e){return e===null})){return N(i.cdr.cdr,{disabled:e})}var l=T(t);var u=i.car instanceof L&&L.is(i.cdr.cdr.car,B);if(i.car instanceof q||u){if(O["..."].lists[0]===U){return U}var h=i.car;if(u){h=new q(i.car,new q(i.cdr.car,U))}I(">> 2");var a;if(l.length){I(">> 2 (a)");var o=Lr({},t);a=U;var p=function e(){if(!R(o)){return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(h,o,{nested:true},t);if(r!==undefined){if(u){if(a===U){a=r}else{a=a.append(r)}}else{a=new q(r,a)}}o=n};while(true){var _=p();if(_==="break")break}if(a!==U&&!u){a=a.reverse()}if(i.cdr.cdr!==U&&!L.is(i.cdr.cdr.car,B)){var d=N(i.cdr.cdr,{disabled:e});return a.append(d)}return a}else{I(">> 3");var v=P(i.car,t,{nested:true});if(v){return new q(v,U)}return U}}else if(i.car instanceof L){I(">> 4");if(L.is(i.cdr.cdr.car,B)){I(">> 4 (a)")}else{I(">> 4 (b)")}var m=i.car.__name__;var s=Y({},m,t[m]);var y=t[m]===null;var c=U;var g=function e(){if(!R(s,true)){I({bind:s});return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(i,s,{nested:false},t);I({value:r.toString()});if(typeof r!=="undefined"){c=new q(r,c)}s=n};while(true){var b=g();if(b==="break")break}if(c!==U){c=c.reverse()}if(i.cdr instanceof q){if(i.cdr.cdr instanceof q||i.cdr.cdr instanceof L){var w=N(i.cdr.cdr,{disabled:e});if(y){return w}I("<<<< 1");c.append(w)}}I("<<<< 2");return c}}var D=N(i.car,{disabled:e});var r;var E;if(i.car instanceof L){var A=S.get(i.car,{throwError:false});E=A instanceof hu&&A.__name__==="syntax-rules"}if(E){if(i.cdr.car instanceof L){r=new q(N(i.cdr.car,{disabled:e}),new q(i.cdr.cdr.car,N(i.cdr.cdr.cdr,{disabled:e})))}else{r=new q(i.cdr.car,N(i.cdr.cdr,{disabled:e}))}I("REST >>>> "+r.toString())}else{r=N(i.cdr,{disabled:e})}I({a:true,car:nu(i.car),cdr:nu(i.cdr),head:nu(D),rest:nu(r)});return new q(D,r)}if(i instanceof L){if(e&&L.is(i,B)){return i}var F=Object.keys(O["..."].symbols);var x=i.literal();if(F.includes(x)){var C="missing ellipsis symbol next to name `".concat(x,"'");throw new Error("syntax-rules: ".concat(C))}var k=j(i);if(typeof k!=="undefined"){return k}}return i}return N(t,{})}function wu(e){return xu(e)||e===U||e===null}function Du(e){return typeof e==="function"&&typeof e.bind==="function"}function Eu(e){return e instanceof Ro}function Au(e){return Du(e)||Eu(e)}function Fu(e){if(e instanceof Qn){return false}if(e instanceof Promise){return true}return e&&Du(e.then)}function xu(e){return typeof e==="undefined"}function Cu(e){switch(_(e)){case"string":return _a(e);case"bigint":return k(e);case"number":if(Number.isNaN(e)){return oo}else{return k(e)}}return e}function ku(n,i){var e=Object.getOwnPropertyNames(n);var t=Object.getOwnPropertySymbols(n);e.concat(t).forEach(function(e){var t=i(n[e]);var r=Object.getOwnPropertyDescriptor(n,e);if(!r||r.writable&&n[e]!==t){n[e]=t}});return n}function Ou(t){var e=[_a,k].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(Ou)}if(t instanceof Qn){delete t.then}if(zi(t)){return ku(t,Ou)}return t}function Su(e,t){if(e instanceof q){e.markCycles();return to(e)}if(Du(e)){if(t){return ju(e,t)}}return Cu(e)}function Bu(e){if(Pu(e)){return e[Uu]}return e}function ju(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=Pr(n),u;try{for(i.s();!(u=i.n()).done;){var a=u.value;if(Hu(a)){try{r[a]=e[a]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}Wu(r,"__fn__",e);Wu(r,"__context__",t);Wu(r,"__bound__",true);if(ea(e)){Wu(r,"__native__",true)}if(zi(t)&&Zu(e)){Wu(r,"__method__",true)}r.valueOf=function(){return e};return r}function Iu(e){return Pu(e)&&e[Symbol["for"]("__context__")]===Object}function Pu(e){return!!(Du(e)&&e[Uu])}function Nu(e){if(Du(e)){var t=e[Lu];if(t&&(t===ys||t.constructor&&t.constructor.__class__)){return true}}return false}function Ru(e){return e instanceof Na||e instanceof Ra}function Tu(e){if(Du(e)){if(Ru(e[Lu])){return true}}return false}var Lu=Symbol["for"]("__context__");var Uu=Symbol["for"]("__fn__");var qu=Symbol["for"]("__data__");var Mu=Symbol["for"]("__ref__");var Yu=Symbol["for"]("__cycles__");var $u=Symbol["for"]("__class__");var zu=Symbol["for"]("__method__");var Vu=Symbol["for"]("__prototype__");var Ju=Symbol["for"]("__lambda__");var Gu=["name","length","caller","callee","arguments","prototype"];function Hu(e){return!Gu.includes(e)}function Wu(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function Qu(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function Zu(e){return e&&e[Ju]}function Ku(e){return e&&e[zu]}function Xu(e){return Zu(e)&&!e[Vu]&&!Ku(e)&&!Tu(e)}function ea(e){var t=Symbol["for"]("__native__");return Du(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function ta(e){var g;switch(e){case Symbol["for"]("letrec"):g="letrec";break;case Symbol["for"]("let"):g="let";break;case Symbol["for"]("let*"):g="let*";break;default:throw new Error("Invalid let_macro value")}return hu.defmacro(g,function(t,e){var f=e.dynamic_scope,l=e.error,n=e.macro_expand;var h;if(t.car instanceof L){if(!(t.cdr.car instanceof q||t.cdr.car===U)){throw new Error("let require list of pairs")}var r;if(t.cdr.car===U){h=U;r=U}else{r=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return q.fromArray([L("letrec"),[[t.car,q(L("lambda"),q(r,t.cdr.cdr))]],q(t.car,h)])}else if(n){return}var p=this;h=co.get("list->array")(t.car);var _=p.inherit(g);var d,v;if(g==="let*"){v=_}else if(g==="let"){d=[]}var m=0;function y(){var e=new q(new L("begin"),t.cdr);return Lo(e,{env:_,dynamic_scope:f,error:l})}return function t(){var r=h[m++];if(f){f=g==="let*"?_:p}if(!r){if(d&&d.length){var e=d.map(function(e){return e.value});var n=e.filter(Fu);if(n.length){return Zn(e).then(function(e){for(var t=0,r=e.length;t<r;++t){_.set(d[t].name,e[t])}}).then(y)}else{var i=Pr(d),u;try{for(i.s();!(u=i.n()).done;){var a=u.value,o=a.name,s=a.value;_.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return y()}else{if(g==="let"){v=p}else if(g==="letrec"){v=_}var c=Lo(r.cdr.car,{env:v,dynamic_scope:f,error:l});if(g==="let*"){v=_=v.inherit("let*["+m+"]")}if(d){d.push({name:r.car,value:c});return t()}else{return li(c,function(e){_.set(r.car,e);return t()})}}}()})}function ra(e,s){return new hu(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;var i=this;if(r){r=this}var u=e;var a=[];while(u instanceof q){a.push(Lo(u.car,{env:i,dynamic_scope:r,error:n}));u=u.cdr}var o=a.filter(Fu).length;if(o){return Zn(a).then(s.bind(this))}else{return s.call(this,a)}})}function na(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){Eo("",e,"number")});return e.apply(void 0,r)}function ia(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){Eo("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function ua(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){Eo("compose",e,"function",t+1)});return ia.apply(void 0,M(t.reverse()))}function aa(a,o){var s=this;return function e(t,r){Eo(a,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),u=2;u<n;u++){i[u-2]=arguments[u]}if(i.some(wu)){if(typeof r==="number"){return k(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function oa(e,t){return ha(e+1,la(na,t))}var sa=la(oa,1);var ca=la(oa,2);function fa(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(M(t))}return t.reduce(ca(n))}}function la(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}Eo("curry",u,"function");var a=u.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=a){return u.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function ha(n,i){Eo("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,M(t.slice(0,n)))}}function pa(e){if(typeof this!=="undefined"&&!(this instanceof pa)||typeof this==="undefined"){return new pa(e)}if(e instanceof _a){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(pa.__names__[e]){t=e;e=pa.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=pa.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}pa.__names__=sn;pa.__rev_names__={};Object.keys(pa.__names__).forEach(function(e){var t=pa.__names__[e];pa.__rev_names__[t]=e});pa.prototype.toUpperCase=function(){return pa(this.__char__.toUpperCase())};pa.prototype.toLowerCase=function(){return pa(this.__char__.toLowerCase())};pa.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};pa.prototype.valueOf=pa.prototype.serialize=function(){return this.__char__};function _a(e){if(typeof this!=="undefined"&&!(this instanceof _a)||typeof this==="undefined"){return new _a(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){Eo("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var da=["length","constructor"];var va=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!da.includes(e)});var ma=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var ya=Pr(va),ga;try{for(ya.s();!(ga=ya.n()).done;){var ba=ga.value;_a.prototype[ba]=ma(String.prototype[ba])}}catch(e){ya.e(e)}finally{ya.f()}}_a.prototype[Symbol.iterator]=z.mark(function e(){var r,n,i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=Array.from(this.__string__);n=0,i=r;case 2:if(!(n<i.length)){t.next=9;break}u=i[n];t.next=6;return pa(u);case 6:n++;t.next=2;break;case 9:case"end":return t.stop()}}},e,this)});_a.prototype.serialize=function(){return this.valueOf()};_a.isString=function(e){return e instanceof _a||typeof e==="string"};_a.prototype.get=function(e){Eo("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};_a.prototype.cmp=function(e){Eo("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};_a.prototype.lower=function(){return _a(this.__string__.toLowerCase())};_a.prototype.upper=function(){return _a(this.__string__.toUpperCase())};_a.prototype.set=function(e,t){Eo("LString::set",e,"number");Eo("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof pa){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(_a.prototype,"length",{get:function e(){return this.__string__.length}});_a.prototype.clone=function(){return _a(this.valueOf())};_a.prototype.fill=function(e){Eo("LString::fill",e,["string","character"]);if(e instanceof pa){e=e.toString()}var t=this.__string__.length;this.__string__=new Array(t+1).join(e)};function k(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof k){return e}if(typeof this!=="undefined"&&!(this instanceof k)||typeof this==="undefined"){return new k(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=k.getType(e);if(k.types[r]){return k.types[r](e,t)}var n=e instanceof Array&&_a.isString(e[0])&&k.isNumber(e[1]);if(e instanceof k){return k(e.value)}if(!k.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(Oo(e)))}if(e===null){e=0}var i;if(n){var c=e,u=j(c,2),a=u[0],o=u[1];if(a instanceof _a){a=a.valueOf()}if(o instanceof k){o=o.valueOf()}var f=a.match(/^([+-])/);var l=false;if(f){a=a.replace(/^[+-]/,"");if(f[1]==="-"){l=true}}}if(Number.isNaN(e)){return ka(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var s;switch(o){case 8:s="0o";break;case 16:s="0x";break;case 2:s="0b";break;case 10:s="";break}if(typeof s==="undefined"){var h=BigInt(o);i=M(a).map(function(e,t){return BigInt(parseInt(e,o))*Fa(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(s+a)}}else{i=BigInt(e)}if(l){i*=BigInt(-1)}}else{i=e}return Pa(i,true)}else if(typeof Gr!=="undefined"&&!(e instanceof Gr)){if(e instanceof Array){return Pa(p(Gr,M(e)))}return Pa(new Gr(e))}else if(n){this.constant(parseInt(a,o),"integer")}else{this.constant(e,"integer")}}k.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};k.types={float:function e(t){return new ka(t)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!k.isComplex(t)){t={im:0,re:t}}return new Ca(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!k.isRational(t)){t={num:t,denom:1}}return new Ia(t,r)}};k.prototype.serialize=function(){return this.__value__};k.prototype.isNaN=function(){return Number.isNaN(this.__value__)};k.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};k.isFloat=function e(t){return t instanceof ka||Number(t)===t&&t%1!==0};k.isNumber=function(e){return e instanceof k||k.isNative(e)||k.isBN(e)};k.isComplex=function(e){if(!e){return false}var t=e instanceof Ca||(k.isNumber(e.im)||Number.isNaN(e.im))&&(k.isNumber(e.re)||Number.isNaN(e.re));return t};k.isRational=function(e){if(!e){return false}return e instanceof Ia||k.isNumber(e.num)&&k.isNumber(e.denom)};k.isInteger=function(e){if(!(k.isNative(e)||e instanceof k)){return false}if(k.isFloat(e)){return false}if(k.isRational(e)){return false}if(k.isComplex(e)){return false}return true};k.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};k.isBigInteger=function(e){return e instanceof Pa||typeof e==="bigint"||k.isBN(e)};k.isBN=function(e){return typeof Gr!=="undefined"&&e instanceof Gr};k.getArgsType=function(e,t){if(e instanceof ka||t instanceof ka){return ka}if(e instanceof Pa||t instanceof Pa){return Pa}return k};k.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};k.prototype.asType=function(e){var t=k.getType(this);return k.types[t]?k.types[t](e):k(e)};k.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof Gr!=="undefined"&&!(this.value instanceof Gr)};["floor","ceil","round"].forEach(function(e){k.prototype[e]=function(){if(this["float"]||k.isFloat(this.__value__)){return k(Math[e](this.__value__))}else{return k(Math[e](this.valueOf()))}}});k.prototype.valueOf=function(){if(k.isNative(this.__value__)){return Number(this.__value__)}else if(k.isBN(this.__value__)){return this.__value__.toNumber()}};var wa=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[ka(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[ka(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&ka(r.valueOf())]},integer:function e(t,r){return[t,r&&ka(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&ka(r.valueOf())]},complex:function e(t,r){return[{re:t,im:ka(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function f(e,t){var r=k.coerce(e.__re__,t.__re__),n=j(r,2),i=n[0],u=n[1];var a=k.coerce(e.__im__,t.__im__),o=j(a,2),s=o[0],c=o[1];return[{im:s,re:i},{im:c,re:u}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[ka(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:Da(t.__type__,r.__im__.__type__,0)[0],re:Da(t.__type__,r.__re__.__type__,t)[0]},{im:Da(t.__type__,r.__im__.__type__,r.__im__)[0],re:Da(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:Da(r,e.__im__.__type__,0,e.__im__)[1],re:Da(r,e.__re__.__type__,0,e.__re__)[1]},{im:Da(r,e.__im__.__type__,0,0)[1],re:Da(r,t.__type__,0,t)[1]}]}}}();function Da(e,t,r,n){return wa[e][t](r,n)}k.coerce=function(e,t){var r=k.getType(e);var n=k.getType(t);if(!wa[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!wa[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=wa[r][n](e,t);return i.map(function(e){return k(e,true)})};k.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof k)){throw new Error("LNumber: you can't coerce ".concat(Oo(e)))}if(typeof e==="number"){e=k(e)}return k.coerce(this,e)};k.getType=function(e){if(e instanceof k){return e.__type__}if(k.isFloat(e)){return"float"}if(k.isComplex(e)){return"complex"}if(k.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof Gr!=="undefined"&&!(e instanceof Gr)){return"bigint"}};k.prototype.isFloat=function(){return!!(k.isFloat(this.__value__)||this["float"])};var Ea={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var Aa={};Object.keys(Ea).forEach(function(t){Aa[Ea[t]]=t;k.prototype[t]=function(e){return this.op(Ea[t],e)}});k._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};k.prototype.op=function(e,t){if(typeof t==="undefined"){return k(k._ops[e](this.valueOf()))}if(typeof t==="number"){t=k(t)}if(Number.isNaN(this.__value__)&&!k.isComplex(t)||!k.isComplex(this)&&Number.isNaN(t.__value__)){return k(NaN)}var r=this.coerce(t),n=j(r,2),i=n[0],u=n[1];if(i._op){return i._op(e,u)}return k(k._ops[e](i,u))};k.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return Ca({re:0,im:t})}return k(Math.sqrt(e))};var Fa=function e(t,r){var n=typeof t==="bigint"?BigInt(1):1;return new Array(Number(r)).fill(0).reduce(function(e){return e*t},n)};var xa=new Function("a,b","return a ** b");try{if(xa(2,2)===4){Fa=xa}}catch(e){}k.prototype.pow=function(e){var t;if(k.isBN(this.__value__)){t=this.__value__.pow(e.__value__)}else{t=Fa(this.__value__,e.__value__)}return k(t)};k.prototype.abs=function(){var e=this.__value__;if(k.isNative(this.__value__)){if(e<0){e=-e}}else if(k.isBN(e)){e.iabs()}return new k(e)};k.prototype.isOdd=function(){if(k.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}return this.__value__%2===1}else if(k.isBN(this.__value__)){return this.__value__.isOdd()}};k.prototype.isEven=function(){return!this.isOdd()};k.prototype.cmp=function(e){var t=this.coerce(e),r=j(t,2),n=r[0],i=r[1];function u(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(k.isNative(n.__value__)){return u(n,i)}else if(k.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof ka){return u(n,i)}};function Ca(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof Ca)||typeof this==="undefined"){return new Ca(e,t)}if(e instanceof Ca){return Ca({im:e.__im__,re:e.__re__})}if(k.isNumber(e)&&t){if(!t){return Number(e)}}else if(!k.isComplex(e)){throw new Error("Invalid constructor call for LComplex")}var r=e.im instanceof k?e.im:k(e.im);var n=e.re instanceof k?e.re:k(e.re);this.constant(r,n)}Ca.prototype=Object.create(k.prototype);Ca.prototype.constructor=Ca;Ca.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};Ca.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};Ca.prototype.toRational=function(e){if(k.isFloat(this.__im__)&&k.isFloat(this.__re__)){var t=ka(this.__im__).toRational(e);var r=ka(this.__re__).toRational(e);return Ca({im:t,re:r})}return this};Ca.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};Ca.prototype.factor=function(){if(this.__im__ instanceof ka||this.__im__ instanceof ka){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof ka){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof ka){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};Ca.prototype.modulus=function(){return this.factor().sqrt()};Ca.prototype.conjugate=function(){return Ca({re:this.__re__,im:this.__im__.sub()})};Ca.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=ka(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=ka(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return Ca({im:r,re:t})};Ca.prototype.div=function(e){if(k.isNumber(e)&&!k.isComplex(e)){if(!(e instanceof k)){e=k(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return Ca({re:t,im:r})}else if(!k.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}if(this.cmp(e)===0){var n=this.coerce(e),i=j(n,2),f=i[0],u=i[1];var l=f.__im__.div(u.__im__);return l.coerce(u.__re__)[0]}var h=this.coerce(e),a=j(h,2),p=a[0],o=a[1];var s=o.factor();var _=o.conjugate();var c=p.mul(_);if(!k.isComplex(c)){return c.div(s)}var d=c.__re__.op("/",s);var v=c.__im__.op("/",s);return Ca({re:d,im:v})};Ca.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};Ca.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};Ca.prototype.complex_op=function(e,t,i){var u=this;var r=function e(t,r){var n=i(u.__re__,t,u.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0){return n.re}return Ca(n,true)}return n};if(typeof t==="undefined"){return r()}if(k.isNumber(t)&&!k.isComplex(t)){if(!(t instanceof k)){t=k(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!k.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var a=t.__re__ instanceof k?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof k?t.__im__:this.__im__.asType(t.__im__);return r(a,o)};Ca._op={"+":"add","-":"sub","*":"mul","/":"div"};Ca.prototype._op=function(e,t){var r=Ca._op[e];return this[r](t)};Ca.prototype.cmp=function(e){var t=this.coerce(e),r=j(t,2),n=r[0],i=r[1];var u=n.__re__.coerce(i.__re__),a=j(u,2),o=a[0],f=a[1];var s=o.cmp(f);if(s!==0){return s}else{var l=n.__im__.coerce(i.__im__),c=j(l,2),h=c[0],p=c[1];return h.cmp(p)}};Ca.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};Ca.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[nu(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=nu(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function ka(e){if(typeof this!=="undefined"&&!(this instanceof ka)||typeof this==="undefined"){return new ka(e)}if(!k.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof k){return ka(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}ka.prototype=Object.create(k.prototype);ka.prototype.constructor=ka;ka.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!k.isFloat(this.__value__)&&!e.match(/e/i)){var t=e+".0";return this._minus?"-"+t:t}return e.replace(/^([0-9]+)e/,"$1.0e")};ka.prototype._op=function(e,t){if(t instanceof k){t=t.__value__}var r=k._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return ka(r(this.__value__,t))};ka.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return Oa(this.__value__.valueOf())}return Sa(e.valueOf())(this.__value__.valueOf())};ka.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=ka(Math.sqrt(-e));return Ca({re:0,im:t})}return ka(Math.sqrt(e))};ka.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return ka(e)};var Oa=Sa(1e-10);function Sa(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return Ia({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function Ba(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=ja(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=ja(r,n)}else if(t.cmp(0)<0){i=k(ja(n.sub(),r.sub())).sub()}else{i=k(0)}if(k.isFloat(t)||k.isFloat(e)){return ka(i)}return i}function ja(e,t){var r=k(e).floor();var n=k(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=k(1).div(t.sub(n));var u=k(1).div(e.sub(r));return r.add(k(1).div(ja(i,u)))}else{return r.add(k(1))}}function Ia(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof Ia)||typeof this==="undefined"){return new Ia(e,t)}if(!k.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof Ia){r=k(e.__num__);n=k(e.__denom__)}else{r=k(e.num);n=k(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return k(r.div(n))}}this.constant(r,n)}Ia.prototype=Object.create(k.prototype);Ia.prototype.constructor=Ia;Ia.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};Ia.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};Ia.prototype.pow=function(e){var t=e.cmp(0);if(t===0){return k(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return Ia({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};Ia.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof ka||t instanceof ka){return e.div(t)}return Ia({num:e,denom:t})};Ia.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return Ia({num:e,denom:t})};Ia.prototype.cmp=function(e){return k(this.valueOf(),true).cmp(e)};Ia.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof Ia){t=k(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof Ia){r=k(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};Ia.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return k._ops["/"](this.__num__.value,this.__denom__.value)}return ka(this.__num__.valueOf()).div(this.__denom__.valueOf())};Ia.prototype.mul=function(e){if(!(e instanceof k)){e=k(e)}if(k.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return Ia({num:t,denom:r})}var n=k.coerce(this,e),i=j(n,2),u=i[0],a=i[1];return u.mul(a)};Ia.prototype.div=function(e){if(!(e instanceof k)){e=k(e)}if(k.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return Ia({num:t,denom:r})}var n=k.coerce(this,e),i=j(n,2),u=i[0],a=i[1];var o=u.div(a);return o};Ia.prototype._op=function(e,t){return this[Aa[e]](t)};Ia.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof k)){e=k(e)}if(k.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(Ia({num:t,denom:r}))}if(!(e instanceof k)){e=k(e).sub()}else{e=e.sub()}var n=k.coerce(this,e),i=j(n,2),u=i[0],a=i[1];return u.add(a)};Ia.prototype.add=function(e){if(!(e instanceof k)){e=k(e)}if(k.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var u,a;if(t!==r){a=r.mul(n).add(i.mul(t));u=t.mul(r)}else{a=n.add(i);u=t}return Ia({num:a,denom:u})}if(k.isFloat(e)){return ka(this.valueOf()).add(e)}var o=k.coerce(this,e),s=j(o,2),c=s[0],f=s[1];return c.add(f)};function Pa(e,t){if(typeof this!=="undefined"&&!(this instanceof Pa)||typeof this==="undefined"){return new Pa(e,t)}if(e instanceof Pa){return Pa(e.__value__,e._native)}if(!k.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}Pa.prototype=Object.create(k.prototype);Pa.prototype.constructor=Pa;Pa.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};Pa.prototype.serialize=function(){return this.__value__.toString()};Pa.prototype._op=function(e,t){if(typeof t==="undefined"){if(k.isBN(this.__value__)){e=Pa.bn_op[e];return Pa(this.__value__.clone()[e](),false)}return Pa(k._ops[e](this.__value__),true)}if(k.isBN(this.__value__)&&k.isBN(t.__value__)){e=Pa.bn_op[e];return Pa(this.__value__.clone()[e](t),false)}var r=k._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return k(r)}return Ia({num:this,denom:t})}return Pa(r,true)};Pa.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(k.isNative(this.__value__)){e=k(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(k.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return Ca({re:0,im:e})}return e};k.NaN=k(NaN);function Na(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof Na)||typeof this==="undefined"){return new Na(e)}Eo("InputPort",e,"function");_i(this,"__type__",Ga);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){Eo("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,O(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new oi(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==Ha};this._make_defaults()}Na.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!k.isInteger(t)){var r=k.getType(t);bo("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Na.prototype._with_init_parser=function(o,s){var c=this;return O(z.mark(function e(){var r,n,i,u,a=arguments;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=a.length,i=new Array(n),u=0;u<n;u++){i[u]=a[u]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}}},e)}))};Na.prototype.is_open=function(){return this._with_parser!==null};Na.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};Na.prototype.toString=function(){return"#<input-port>"};function Ra(e){if(typeof this!=="undefined"&&!(this instanceof Ra)||typeof this==="undefined"){return new Ra(e)}Eo("OutputPort",e,"function");_i(this,"__type__",Ga);this.write=e}Ra.prototype.is_open=function(){return this._closed!==true};Ra.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Ra.prototype.flush=function(){};Ra.prototype.toString=function(){return"#<output-port>"};var Ta=function(e){u(n,e);var r=jr(n);function n(e){var t;A(this,n);t=r.call(this,function(){var e;return(e=t)._write.apply(e,arguments)});Eo("BufferedOutputPort",e,"function");_i(i(t),"_fn",e,{hidden:true});_i(i(t),"_buffer",[],{hidden:true});return t}x(n,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var u=this._buffer[this._buffer.length-1];if(u.match(/\n$/)){this._buffer[this._buffer.length-1]=u.replace(/\n$/,"");this.flush()}}}}]);return n}(Ra);function La(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof La)||typeof this==="undefined"){return new La(t)}Eo("OutputStringPort",t,"function");_i(this,"__type__",Ga);_i(this,"__buffer__",[]);this.write=function(e){if(!_a.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}La.prototype=Object.create(Ra.prototype);La.prototype.constructor=La;La.prototype.toString=function(){return"#<output-port (string)>"};La.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function Ua(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Ua)||typeof this==="undefined"){return new Ua(e,t)}Eo("OutputFilePort",e,"string");_i(this,"__filename__",e);_i(this,"_fd",t.valueOf(),{hidden:true});_i(this,"__type__",Ga);this.write=function(e){if(!_a.isString(e)){e=nu(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}Ua.prototype=Object.create(Ra.prototype);Ua.prototype.constructor=Ua;Ua.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};Ua.prototype.internal=function(e){return fo.get("**internal-env**").get(e)};Ua.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{_i(n,"_fd",null,{hidden:true});Ra.prototype.close.call(n);t()}})})};Ua.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function qa(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof qa)||typeof this==="undefined"){return new qa(e)}Eo("InputStringPort",e,"string");t=t||co;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new oi(e,{env:t})}return r.__parser__});_i(this,"__type__",Ga);this._make_defaults()}qa.prototype.char_ready=function(){return true};qa.prototype=Object.create(Na.prototype);qa.prototype.constructor=qa;qa.prototype.toString=function(){return"#<input-port (string)>"};function Ma(e){if(typeof this!=="undefined"&&!(this instanceof Ma)||typeof this==="undefined"){return new Ma(e)}Eo("InputByteVectorPort",e,"uint8array");_i(this,"__vector__",e);_i(this,"__type__",Ja);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){Eo("InputByteVectorPort::__index__",t,"number");if(t instanceof k){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}Ma.prototype=Object.create(Na.prototype);Ma.prototype.constructor=Ma;Ma.prototype.toString=function(){return"#<input-port (bytevector)>"};Ma.prototype.close=function(){var t=this;_i(this,"__vector__",U);["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=function(){throw new Error("Input-binary-port: port is closed")}});this.char_ready=function(){return false}};Ma.prototype.u8_ready=function(){return true};Ma.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return Ha}return this.__vector__[this.__index__]};Ma.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};Ma.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};Ma.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===Ha){return Ha}return this.__vector__.slice(this.__index__,e)};function Ya(){if(typeof this!=="undefined"&&!(this instanceof Ya)||typeof this==="undefined"){return new Ya}_i(this,"__type__",Ja);_i(this,"_buffer",[],{hidden:true});this.write=function(e){Eo("write",e,["number","uint8array"]);if(k.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,M(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}Ya.prototype=Object.create(Ra.prototype);Ya.prototype.constructor=Ya;Ya.prototype.close=function(){Ra.prototype.close.call(this);_i(this,"_buffer",null,{hidden:true})};Ya.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};Ya.prototype.write_u8=function(e){Eo("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Ya.prototype.write_u8_vector=function(e){Eo("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};Ya.prototype.toString=function(){return"#<output-port (bytevector)>"};Ya.prototype.valueOf=function(){return this.__buffer__};function $a(e,t){if(typeof this!=="undefined"&&!(this instanceof $a)||typeof this==="undefined"){return new $a(e,t)}qa.call(this,e);Eo("InputFilePort",t,"string");_i(this,"__filename__",t)}$a.prototype=Object.create(qa.prototype);$a.prototype.constructor=$a;$a.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function za(e,t){if(typeof this!=="undefined"&&!(this instanceof za)||typeof this==="undefined"){return new za(e,t)}Ma.call(this,e);Eo("InputBinaryFilePort",t,"string");_i(this,"__filename__",t)}za.prototype=Object.create(Ma.prototype);za.prototype.constructor=za;za.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function Va(e,t){if(typeof this!=="undefined"&&!(this instanceof Va)||typeof this==="undefined"){return new Va(e,t)}Eo("OutputBinaryFilePort",e,"string");_i(this,"__filename__",e);_i(this,"_fd",t.valueOf(),{hidden:true});_i(this,"__type__",Ja);var u,r;this.write=function(e){var n=this;Eo("write",e,["number","uint8array"]);var i;if(!u){u=this.internal("fs")}if(!r){r=this.internal("Buffer")}if(k.isNumber(e)){i=r.from([e.valueOf()])}else{i=r.from(Array.from(e))}return new Promise(function(t,r){u.write(n._fd,i,function(e){if(e){r(e)}else{t()}})})}}Va.prototype=Object.create(Ua.prototype);Va.prototype.constructor=Va;Va.prototype.write_u8=function(e){Eo("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Va.prototype.write_u8_vector=function(e){Eo("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var Ja=Symbol["for"]("binary");var Ga=Symbol["for"]("text");var Ha=new Wa;function Wa(){}Wa.prototype.toString=function(){return"#<eof>"};function Qa(e){var c=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.stderr,n=t.stdin,i=t.stdout,u=t.command_line,a=u===void 0?null:u,o=S(t,Br);if(typeof this!=="undefined"&&!(this instanceof Qa)||typeof this==="undefined"){return new Qa(e,Lr({stdin:n,stdout:i,stderr:r,command_line:a},o))}if(typeof e==="undefined"){e="anonymous"}this.__env__=fo.inherit(e,o);this.__env__.set("parent.frame",g("parent.frame",function(){return c.__env__},co.__env__["parent.frame"].__doc__));var f="**interaction-environment-defaults**";this.set(f,Ki(o).concat(f));var s=ao.inherit("internal-".concat(e));if(Ru(n)){s.set("stdin",n)}if(Ru(r)){s.set("stderr",r)}if(Ru(i)){s.set("stdout",i)}s.set("command-line",a);lo(this.__env__,s)}Qa.prototype.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Eo("Interpreter::exec",e,["string","array"],1);Eo("Interpreter::exec",t,"boolean",2);co.set("**interaction-environment**",this.__env__);if(r===null){r=this.__env__}return qo(e,r,t?r:false)};Qa.prototype.get=function(e){var t=this.__env__.get(e);if(Du(t)){return t.bind(this.__env__)}return t};Qa.prototype.set=function(e,t){return this.__env__.set(e,t)};Qa.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function Za(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}Za.prototype=new Error;Za.prototype.constructor=Za;function Ka(e,t,r){if(arguments.length===1){if(_(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}Ka.prototype.list=function(){return Ki(this.__env__)};Ka.prototype.fs=function(){return this.get("**fs**")};Ka.prototype.unset=function(e){if(e instanceof L){e=e.valueOf()}if(e instanceof _a){e=e.valueOf()}delete this.__env__[e]};Ka.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(_(e)==="object"){t=e}if(!e||_(e)==="object"){e="child of "+(this.__name__||"unknown")}return new Ka(t||{},this,e)};Ka.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof L){e=e.__name__}if(e instanceof _a){e=e.valueOf()}if(t){if(!r){t=yi(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};Ka.prototype.newFrame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",g("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!(t instanceof Ka)){return U}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},co.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};Ka.prototype._lookup=function(e){if(e instanceof L){e=e.__name__}if(e instanceof _a){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return Xa(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};Ka.prototype.toString=function(){return"#<environment:"+this.__name__+">"};Ka.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new Ka(r,this.__parent__,this.__name__)};Ka.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";Eo("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function Xa(e){if(typeof this!=="undefined"&&!(this instanceof Xa)||typeof this==="undefined"){return new Xa(e)}this.value=e}Xa.isUndefined=function(e){return e instanceof Xa&&typeof e.value==="undefined"};Xa.prototype.valueOf=function(){return this.value};function eo(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof eo)||typeof this==="undefined"){return new eo(e)}this.__values__=e}eo.prototype.toString=function(){return this.__values__.map(function(e){return nu(e)}).join("\n")};eo.prototype.valueOf=function(){return this.__values__};Ka.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Eo("Environment::get",e,["symbol","string"]);var r=t.throwError,c=r===void 0?true:r;var n=e;if(n instanceof L||n instanceof _a){n=n.valueOf()}var i=this._lookup(n);if(i instanceof Xa){if(Xa.isUndefined(i)){return undefined}return Su(i.valueOf())}var u;if(e instanceof L&&e[L.object]){u=e[L.object]}else if(typeof n==="string"){u=n.split(".").filter(Boolean)}if(u&&u.length>0){var f=u,a=b(f),o=a[0],s=a.slice(1);i=this._lookup(o);if(s.length){try{if(i instanceof Xa){i=i.valueOf()}else{i=no(Mr,o);if(Du(i)){i=Bu(i)}}if(typeof i!=="undefined"){return no.apply(void 0,[i].concat(M(s)))}}catch(e){throw e}}else if(i instanceof Xa){return Su(i.valueOf())}i=no(Mr,n)}if(typeof i!=="undefined"){return i}if(c){throw new Error("Unbound variable `"+n.toString()+"'")}};Ka.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Eo("Environment::set",e,["string","symbol"]);if(k.isNumber(t)){t=k(t)}if(e instanceof L){e=e.__name__}if(e instanceof _a){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};Ka.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&zi(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};Ka.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};Ka.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};Ka.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function to(e){if(Fu(e)){return e.then(to)}if(e instanceof q||e instanceof L){e[qu]=true}return e}var ro=ci(zn('(lambda ()\n                                      "[native code]"\n                                      (throw "Invalid Invocation"))'))[0];var no=g("get",function c(e){var t;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var u=n.length;while(n.length){if(Du(e)&&_(n[0])!=="symbol"){e=Bu(e)}var a=n.shift();var o=Ou(a);if(o==="then"&&e instanceof Qn){t=Qn.prototype.then}else if(o==="__code__"&&Du(e)&&typeof e.__code__==="undefined"){t=ro}else{t=e[o]}if(typeof t==="undefined"){if(n.length){throw new Error("Try to get ".concat(n[0]," from undefined"))}return t}else{var s;if(n.length-1<u){s=e}t=Su(t,s)}e=t}return t},"(. obj . args)\n    (get obj . args)\n\n    This function uses an object as a base and keeps using arguments to get the\n    property of JavaScript object. Arguments need to be a strings.\n    e.g. `(. console \"log\")` if you use any function inside LIPS it\n    will be weakly bound (can be rebound), so you can call this log function\n    without problem unlike in JavaScript when you use\n    `var log = console.log`.\n    `get` is an alias because . doesn't work everywhere, e.g. you can't\n    pass it as an argument.");function io(e,t){var r=uo(e,"**internal-env**");return r.get(t)}function uo(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var ao=new Ka({stdout:new Ta(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Ta(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:Na(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var oo=k(NaN);var so={true:true,false:false,"#true":true,"#false":false,"#t":true,"#f":false,nil:U,undefined:undefined,null:null,NaN:oo,"+nan.0":oo,"-nan.0":oo};var co=new Ka({eof:Ha,undefined:undefined,"peek-char":g("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=io(this,"stdin")}Do("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n        This function reads and returns a character from the string\n        port, or, if there is no more data in the string port, it\n        returns an EOF."),"read-line":g("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=io(this,"stdin")}Do("read-line",e,"input-port");return e.read_line()},"(read-char port)\n\n        This function reads and returns the next line from the input\n        port."),"read-char":g("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=io(this,"stdin")}Do("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n        This function reads and returns the next character from the\n        input port."),read:g("read",function(){var e=O(z.mark(function e(){var r,n,i,u,a,o,s,c,f=arguments;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=f.length>0&&f[0]!==undefined?f[0]:null;if(!_a.isString(r)){t.next=30;break}n=false;i=false;t.prev=4;a=Ur(ci(r,this));case 6:t.next=8;return a.next();case 8:if(!(n=!(o=t.sent).done)){t.next=14;break}s=o.value;return t.abrupt("return",s);case 11:n=false;t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16;t.t0=t["catch"](4);i=true;u=t.t0;case 20:t.prev=20;t.prev=21;if(!(n&&a["return"]!=null)){t.next=25;break}t.next=25;return a["return"]();case 25:t.prev=25;if(!i){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(20);case 30:if(r===null){c=io(this,"stdin")}else{c=r}Do("read",c,"input-port");return t.abrupt("return",c.read.call(this));case 33:case"end":return t.stop()}}},e,this,[[4,16,20,30],[21,,25,29]])}));function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n        This function, if used with a string, will parse it and\n        return the LIPS code, if there is any. If called without an\n        input, it will read a string from standard input (using\n        the browser's prompt or a user defined input method) and\n        calls itself with that string. This function can be used\n        together with `eval` to evaluate code from a string."),pprint:g("pprint",function e(t){if(t instanceof q){t=new ys.Formatter(t.toString(true))["break"]().format();co.get("display").call(co,t)}else{co.get("write").call(co,t)}co.get("newline").call(co)},"(pprint expression)\n\n        This function will pretty print its input. If it is called\n        with a non-list, it will just call the print function on its\n        input."),print:g("print",function e(){var t=co.get("display");var r=co.get("newline");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}i.forEach(function(e){t.call(co,e);r.call(co)})},"(print . args)\n\n        This function converts each input into a string and prints\n        the result to the standard output. (by default it's the\n        console but it can be defined in user code) This function\n        calls `newline` after printing each input."),format:g("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Eo("format",t,"string");var u=/(~[as%~])/g;var a=t.match(/(~[as])/g);if(a&&a.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=co.get("repr");t=t.replace(u,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});a=t.match(/~([\S])/);if(a){throw new Error("format: Unrecognized escape seqence ".concat(a[1]))}return t},"(format string n1 n2 ...)\n\n        This function accepts a string template and replaces any\n        escape sequences in its inputs:\n\n        * ~a value as if printed with `display`\n        * ~s value as if printed with `write`\n        * ~% newline character\n        * ~~ literal tilde '~'\n\n        If there are missing inputs or other escape characters it\n        will error."),display:g("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=io(this,"stdout")}else{Eo("display",r,"output-port")}var n=co.get("repr")(t);r.write.call(co,n)},"(display string [port])\n\n        This function outputs the string to the standard output or\n        the port if given."),"display-error":g("display-error",function e(){var t=io(this,"stderr");var r=co.get("repr");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}var a=i.map(r).join(" ");t.write.call(co,a);co.get("newline")(t)},"(display-error . args)\n\n        Display an error message."),"%same-functions":g("%same-functions",function(e,t){if(!Du(e)){return false}if(!Du(t)){return false}return Bu(e)===Bu(t)},"(%same-functions a b)\n\n        A helper function that checks if the two input functions are\n        the same."),help:g(new hu("help",function(e,t){var r=t.dynamic_scope,n=t.error;var i;if(e.car instanceof L){i=e.car}else if(e.car instanceof q&&e.car.car instanceof L){i=e.car.car}else{var u=this;if(r){r=this}var a=Lo(e.car,{env:u,error:n,dynamic_scope:r});if(a&&a.__doc__){return a.__doc__}return}var o;var s=this.get(i);o=s&&s.__doc__;if(o){return o}var c=this.ref(i);if(c){o=c.doc(i);if(o){return o}}}),"(help object)\n\n         This macro returns documentation for a function or macro.\n         You can save the function or macro in a variable and use it\n         here. But getting help for a variable requires passing the\n         variable in a `quote`."),cons:g("cons",function e(t,r){return new q(t,r)},"(cons left right)\n\n        This function returns a new list with the first appended\n        before the second."),car:g("car",function e(t){Eo("car",t,"pair");return t.car},"(car pair)\n\n        This function returns the car (item 1) of the list."),cdr:g("cdr",function e(t){Eo("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n        This function returns the cdr (all but first) of the list."),"set!":g(new hu("set!",function(e){var c=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;if(r){r=this}var i=this;var u;var a=Lo(e.cdr.car,{env:this,dynamic_scope:r,error:n});a=So(a);function o(t,r,n){if(Fu(t)){return t.then(function(e){return o(t,e,n)})}if(Fu(r)){return r.then(function(e){return o(t,e,n)})}if(Fu(n)){return n.then(function(e){return o(t,r,e)})}i.get("set-obj!").call(i,t,r,n);return n}if(e.car instanceof q&&L.is(e.car.car,".")){var f=e.car.cdr.car;var l=e.car.cdr.cdr.car;var h=Lo(f,{env:this,dynamic_scope:r,error:n});var p=Lo(l,{env:this,dynamic_scope:r,error:n});return o(h,p,a)}if(!(e.car instanceof L)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var s=e.car.valueOf();u=this.ref(e.car.__name__);return li(a,function(e){if(!u){var t=s.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=c.get(n,{throwError:false});if(i){o(i,r,e);return}}throw new Error("Unbound variable `"+s+"'")}u.set(s,e)})}),"(set! name value)\n\n         Macro that can be used to set the value of the variable (mutate)\n         it search the scope chain until it finds first non emtpy slot and set it."),"unset!":g(new hu("set!",function(e){if(!(e.car instanceof L)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n         Function delete specified name from environment."),"set-car!":g("set-car!",function(e,t){Eo("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n         Function that set car (head) of the list/pair to specified value.\n         It can destroy the list. Old value is lost."),"set-cdr!":g("set-cdr!",function(e,t){Eo("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n         Function that set cdr (tail) of the list/pair to specified value.\n         It can destroy the list. Old value is lost."),"empty?":g("empty?",function(e){return typeof e==="undefined"||e===U},"(empty? object)\n\n         Function return true if value is undfined empty list."),gensym:g("gensym",Wn,"(gensym)\n\n         Function generate unique symbol, to use with macros as meta name."),load:g("load",function e(o,t){Eo("load",o,"string");var s=this;if(s.__name__==="__frame__"){s=s.__parent__}if(!(t instanceof Ka)){if(s===co){t=s}else{t=this.get("**interaction-environment**")}}var c="**module-path**";var f=co.get(c,{throwError:false});o=o.valueOf();if(!o.match(/.[^.]+$/)){o+=".scm"}var r=o.match(/\.xcb$/);function l(e){if(r){e=ps(e)}else{if(Oo(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/^\{/)){e=as(e)}}return qo(e,t)}function n(e){return Mr.fetch(e).then(function(e){return r?e.arrayBuffer():e.text()}).then(function(e){if(r){e=new Uint8Array(e)}return e})}if(mo()){return new Promise(function(){var r=O(z.mark(function e(r,n){var i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i=Jr("path");if(!f){t.next=6;break}f=f.valueOf();o=i.join(f,o);t.next=12;break;case 6:u=s.get("command-line",{throwError:false});if(!u){t.next=11;break}t.next=10;return u();case 10:a=t.sent;case 11:if(a&&a!==U){process.cwd();o=i.join(i.dirname(a.car.valueOf()),o)}case 12:co.set(c,i.dirname(o));Jr("fs").readFile(o,function(e,t){if(e){n(e);co.set(c,f)}else{try{l(t).then(function(){r();co.set(c,f)})["catch"](n)}catch(e){n(e)}}});case 14:case"end":return t.stop()}}},e)}));return function(e,t){return r.apply(this,arguments)}}())}if(f){f=f.valueOf();o=f+"/"+o.replace(/^\.?\/?/,"")}return n(o).then(function(e){co.set(c,o.replace(/\/[^/]*$/,""));return l(e)}).then(function(){})["finally"](function(){co.set(c,f)})},"(load filename)\n        (load filename environment)\n\n        Function fetch the file and evaluate its content as LIPS code,\n        If second argument is provided and it's environment the evaluation\n        will happen in that environment."),do:g(new hu("do",function(){var r=O(z.mark(function e(r,h){var n,i,u,o,s,a,c,f,l,p,_;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=h.dynamic_scope,i=h.error;u=this;if(n){n=u}o=u.inherit("do");s=r.car;a=r.cdr.car;c=r.cdr.cdr;if(c!==U){c=new q(L("begin"),c)}f={env:u,dynamic_scope:n,error:i};l=s;case 10:if(!(l!==U)){t.next=21;break}p=l.car;t.t0=o;t.t1=p.car;t.next=16;return Lo(p.cdr.car,f);case 16:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);l=l.cdr;t.next=10;break;case 21:f={env:o,dynamic_scope:n,error:i};_=z.mark(function e(){var r,n,i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(c!==U)){t.next=3;break}t.next=3;return ys.evaluate(c,f);case 3:r=s;n={};case 5:if(!(r!==U)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==U)){t.next=12;break}t.next=10;return Lo(i.cdr.cdr.car,f);case 10:u=t.sent;n[i.car.valueOf()]=u;case 12:r=r.cdr;t.next=5;break;case 15:a=Object.getOwnPropertySymbols(n);Object.keys(n).concat(a).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}}},e)});case 23:t.next=25;return Lo(a.car,f);case 25:t.t3=t.sent;if(!(t.t3===false)){t.next=30;break}return t.delegateYield(_(),"t4",28);case 28:t.next=23;break;case 30:if(!(a.cdr!==U)){t.next=34;break}t.next=33;return Lo(a.cdr.car,f);case 33:return t.abrupt("return",t.sent);case 34:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test expression) . body)\n\n         Iteration macro that evaluate the expression body in scope of the variables.\n         On each loop it increase the variables according to next expression and runs\n         test to check if the loop should continue. If test is single called, the macro\n         will not return anything. If the test is pair of expression and value the\n         macro will return that value after finish."),if:g(new hu("if",function(r,e){var n=e.dynamic_scope,i=e.error;if(n){n=this}var u=this;var t=function e(t){if(t===false){return Lo(r.cdr.cdr.car,{env:u,dynamic_scope:n,error:i})}else{return Lo(r.cdr.car,{env:u,dynamic_scope:n,error:i})}};if(r===U){throw new Error("too few expressions for `if`")}var a=Lo(r.car,{env:u,dynamic_scope:n,error:i});return li(a,t)}),"(if cond true-expr false-expr)\n\n         Macro evaluate condition expression and if the value is true, it\n         evaluate and return true expression if not it evaluate and return\n         false expression"),"let-env":new hu("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_scope,n=e.error;Eo("let-env",t,"pair");var i=Lo(t.car,{env:this,dynamic_scope:r,error:n});return li(i,function(e){Eo("let-env",e,"environment");return Lo(q(L("begin"),t.cdr),{env:e,dynamic_scope:r,error:n})})},"(let-env env . body)\n\n        Special macro that evaluate body in context of given environment\n        object."),letrec:g(ta(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b)) body)\n\n         Macro that creates new environment, then evaluate and assign values to\n         names and then evaluate the body in context of that environment.\n         Values are evaluated sequentialy and next value can access to\n         previous values/names."),"letrec*":g(ta(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b)) body)\n\n         Same as letrec but the order of execution of the binding is guaranteed,\n         so use can use recursive code as well as reference previous binding.\n         In LIPS both letrec and letrec* behave the same."),"let*":g(ta(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b)) body)\n\n         Macro similar to `let` but next argument get environment\n         from previous let variable, so they you can define one variable,\n         and use in next argument."),let:g(ta(Symbol["for"]("let")),"(let ((a value-a) (b value-b)) body)\n\n         Macro that creates new environment, then evaluate and assign values to\n         names and then evaluate the body in context of that environment.\n         Values are evaluated sequentialy but you can't access\n         previous values/names when next are evaluated. You can only get them\n         from body of let expression."),"begin*":g(ra("begin*",function(e){return e.pop()}),"(begin* . expr)\n\n         This macro is parallel version of begin. It evaluate each expression and\n         if it's a promise it will evaluate it in parallel and return value\n         of last expression."),begin:g(new hu("begin",function(e,t){var n=Object.assign({},t);var i=co.get("list->array")(e);if(n.dynamic_scope){n.dynamic_scope=this}n.env=this;var u;return function t(){if(i.length){var e=i.shift();var r=Lo(e,n);return li(r,function(e){u=e;return t()})}else{return u}}()}),"(begin . args)\n\n         Macro runs list of expression and return valuate of the list one.\n         It can be used in place where you can only have single exression,\n         like if expression."),ignore:new hu("ignore",function(e,t){var r=t.dynamic_scope,n=t.error;var i={env:this,error:n};if(r){i.dynamic_scope=this}Lo(new q(new L("begin"),e),i)},"(ignore expression)\n\n        Macro that will evaluate expression and swallow any promises that may\n        be created. It wil run and ignore any value that may be returned by\n        expression. The code should have side effects and/or when it's promise\n        it should resolve to undefined."),"call/cc":g(hu.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Lr({env:this},t);return li(Lo(e.car,r),function(e){if(Du(e)){return e(new Ro(null))}})}),"(call/cc proc)\n\n         TODO"),define:g(hu.defmacro("define",function(r,e){var n=this;if(r.car instanceof q&&r.car.car instanceof L){var t=new q(new L("define"),new q(r.car.car,new q(new q(new L("lambda"),new q(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}if(e.dynamic_scope){e.dynamic_scope=this}e.env=n;var i=r.cdr.car;var u;if(i instanceof q){i=Lo(i,e);u=true}else if(i instanceof L){i=n.get(i)}Eo("define",r.car,"symbol");return li(i,function(e){if(n.__name__===vu.__merge_env__){n=n.__parent__}if(u&&(Du(e)&&Zu(e)||e instanceof vu)){e.__name__=r.car.valueOf();if(e.__name__ instanceof _a){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof q&&_a.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n         (define name expression "doc string")\n         (define (function-name . args) body)\n\n         Macro for defining values. It can be used to define variables,\n         or function. If first argument is list it will create function\n         with name beeing first element of the list. The macro evalute\n         code `(define function (lambda args body))`'),"set-obj!":g("set-obj!",function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=_(e);if(wu(e)||i!=="object"&&i!=="function"){var u=bo("set-obj!",Oo(e),["object","function"]);throw new Error(u)}Eo("set-obj!",t,["string","symbol","number"]);e=Bu(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(iu(e)&&Du(r)){e[t]=Bu(r);e[t][Vu]=true}else if(Du(r)||Fo(r)||r===U){e[t]=r}else{e[t]=r&&!iu(r)?r.valueOf():r}if(Vi){var a=e[t];Object.defineProperty(e,t,Lr(Lr({},n),{},{value:a}))}},"(set-obj! obj key value)\n        (set-obj! obj key value props)\n\n        Function set property of JavaScript object. Props should be vector of pairs,\n        passed to Object.defineProperty."),"null-environment":g("null-environment",function(){return co.inherit("null")},"(null-environment)\n\n        Function return new base environment with std lib."),values:g("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return eo(r)},"(values a1 a2 ...)\n\n        If called with more then one elment it will create special\n        Values object that can be used in call-with-values function"),"call-with-values":g("call-with-values",function(e,t){Eo("call-with-values",e,"function",1);Eo("call-with-values",t,"function",2);var r=e();if(r instanceof eo){return t.apply(void 0,M(r.valueOf()))}return t(r)},"(call-with-values producer consumer)\n\n        Calls its producer argument with no values and a continuation that,\n        when passed some values, calls the consumer procedure with those\n        values as arguments."),"current-environment":g("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n        Function return current environement."),"parent.frame":g("parent.frame",function(){return fo},"(parent.frame)\n\n        Return parent environment if called from inside function.\n        If no parent frame found it return nil."),eval:g("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return Lo(e,{env:t,error:function e(t){var e=co.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n        (eval expr environment)\n\n        Function evalute LIPS Scheme code."),lambda:new hu("lambda",function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.dynamic_scope,p=e.error;var _=this;var d;if(l.cdr instanceof q&&_a.isString(l.cdr.car)&&l.cdr.cdr!==U){d=l.cdr.car.valueOf()}function v(){var e;if(h){if(!(this instanceof Ka)){e=_}else{e=this}}else{e=_}e=e.inherit("lambda");var t=l.car;var r=0;var n;if(typeof this!=="undefined"&&!(this instanceof Ka)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}e.set("this",this)}for(var i=arguments.length,u=new Array(i),a=0;a<i;a++){u[a]=arguments[a]}if(this instanceof Ka){var o={throwError:false};e.set("arguments",this.get("arguments",o));e.set("parent.frame",this.get("parent.frame",o))}else{var s=u.slice();s.callee=v;s.env=e;e.set("arguments",s)}if(t instanceof L||t!==U){while(true){if(t.car!==U){if(t instanceof L){n=to(q.fromArray(u.slice(r),false));e.__env__[t.__name__]=n;break}else{n=u[r];e.__env__[t.car.__name__]=n}}if(t.cdr===U){break}r++;t=t.cdr}}if(h){h=e}var c=d?l.cdr.cdr:l.cdr;var f=new q(new L("begin"),c);return Lo(f,{env:e,dynamic_scope:h,error:p})}var t=l.car instanceof q?l.car.length():null;v.__code__=new q(new L("lambda"),l);v[Ju]=true;if(!(l.car instanceof q)){return g(v,d,true)}return g(Qu(v,t),d,true)},"(lambda (a b) body)\n        (lambda args body)\n        (lambda (a b . rest) body)\n\n        Macro lambda create new anonymous function, if first element of the body\n        is string and there is more elements it will be documentation, that can\n        be read using (help fn)"),macroexpand:new hu("macroexpand",du()),"macroexpand-1":new hu("macroexpand-1",du(true)),"define-macro":g(new hu(pu,function(o,e){var s=e.dynamic_scope,c=e.error;if(o.car instanceof q&&o.car.car instanceof L){var t=o.car.car.__name__;var f;if(_a.isString(o.cdr.car)&&o.cdr.cdr instanceof q){f=o.cdr.car.valueOf()}var r=hu.defmacro(t,function(e){var t=new Ka({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===U){break}if(r instanceof L){t.__env__[r.__name__]=n;break}else if(r.car!==U){if(n===U){t.__env__[r.car.__name__]=U}else{if(n.car instanceof q){n.car[qu]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===U){break}if(n!==U){n=n.cdr}r=r.cdr}if(s){s=t}var i={env:t,dynamic_scope:s,error:c};if(o.cdr instanceof q){var u=f?o.cdr.cdr:o.cdr;var a=u.reduce(function(e,t){return Lo(t,i)});return li(a,function(e){if(_(e)==="object"){delete e[qu]}return e})}},f,true);r.__code__=new q(new L("define-macro"),o);this.set(t,r)}}),"(define-macro (name . args) body)\n\n         Meta macro, macro that create new macros, if return value is list structure\n         it will be evaluated when macro is invoked. You can use quasiquote ` and\n         unquote , and unquote-splicing ,@ inside to create expression that will be\n         evaluated on runtime. Macros works like this: if you pass any expression to\n         macro the arguments will not be evaluated unless macro itself evaluate it.\n         Because of this macro can manipulate expression (arguments) as lists."),"syntax-rules":new hu("syntax-rules",function(m,e){var y=e.dynamic_scope,g=e.error;var b=this;function w(e){var t=[];while(e!==U){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==U){var t=e.car;if(!(t instanceof L)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(m.car instanceof L){t(m.cdr.car)}else{t(m.car)}var r=new vu(function(e,f){var l=f.macro_expand;var t=b.inherit("syntax");if(y){y=t}var r=this;if(r.__name__===vu.__merge_env__){var h=Object.getOwnPropertySymbols(r.__env__);h.forEach(function(e){r.__parent__.set(e,r.__env__[e])});r=r.__parent__}var p={env:t,dynamic_scope:y,error:g};var n,i,u;if(m.car instanceof L){n=m.car;u=w(m.cdr.car);i=m.cdr.cdr}else{n="...";u=w(m.car);i=m.cdr}try{while(i!==U){var a=i.car.car;var o=i.car.cdr.car;Wr(a);var s=yu(a,e,u,n,{expansion:this,define:b});if(s){if(Qr()){console.log(JSON.stringify(Zi(s),true,2));console.log("PATTERN: "+a.toString(true));console.log("MACRO: "+e.toString(true))}var _=[];var c=bu({bindings:s,expr:o,symbols:u,scope:t,lex_scope:r,names:_,ellipsis:n});Wr("OUPUT>>> "+c.toString());if(c){o=c}var d=r.merge(t,vu.__merge_env__);if(l){return{expr:o,scope:d}}var v=Lo(o,Lr(Lr({},p),{},{env:d}));return gu(v,_)}i=i.cdr}}catch(e){e.message+=" in macro: ".concat(m.toString(true));throw e}throw new Error("Invalid Syntax ".concat(e.toString(true)))},b);r.__code__=m;return r},"(syntax-rules () (pattern expression) ...)\n\n        Base of Hygienic macro, it will return new syntax expander\n        that works like lisp macros."),quote:g(new hu("quote",function(e){return to(e.car)}),"(quote expression)\n\n         Macro that return single lips expression as data (it don't evaluate its\n         argument). It will return list of pairs if put in front of lips code.\n         And if put in fron of symbol it will return that symbol not value\n         associated with that name."),"unquote-splicing":g("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code)\n\n        Special form to be used in quasiquote macro, parser is processing special\n        characters ,@ and create call to this pseudo function. It can be used\n        to evalute expression inside and return the value without parenthesis.\n        the value will be joined to the output list structure."),unquote:g("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code)\n\n        Special form to be used in quasiquote macro, parser is processing special\n        characters , and create call to this pseudo function. It can be used\n        to evalute expression inside and return the value, the output is inserted\n        into list structure created by queasiquote."),quasiquote:hu.defmacro("quasiquote",function(e,t){var o=t.dynamic_scope,s=t.error;var c=this;if(o){o=c}function a(e){return e instanceof q||zi(e)||Array.isArray(e)}function h(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a;if(e instanceof q){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(Fu(n)||Fu(i)){return Zn([n,i]).then(function(e){var t=j(e,2),r=t[0],n=t[1];return new q(r,n)})}else{return new q(n,i)}}return e}function u(e,t){if(e instanceof q){if(t!==U){e.append(t)}}else{e=new q(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof q&&L.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function p(e,n,i){return e.reduce(function(e,t){if(!(t instanceof q)){e.push(t);return e}if(L.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=l(t.cdr,n+1,i)}else{r=Lo(t.cdr.car,{env:c,dynamic_scope:o,error:s})}if(!(r instanceof q)){throw new Error("Expecting list ".concat(Oo(t)," found"))}return e.concat(r.to_array())}e.push(l(t,n,i));return e},[])}function _(n,i,u){var a={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof q){if(L.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<u){r=l(t.cdr.car,i,u)}else{r=Lo(t.cdr.car,{env:c,dynamic_scope:o,error:s})}a[e]=r}else{a[e]=t}});if(Object.isFrozen(n)){Object.freeze(a)}return a}function f(i,e,t){if(e<t){return new q(new q(i.car.car,l(i.car.cdr,e,t)),U)}var n=[];return function e(t){var r=Lo(t.car,{env:c,dynamic_scope:o,error:s});n.push(r);if(t.cdr instanceof q){return e(t.cdr)}return li(n,function(r){if(r.some(function(e){return!(e instanceof q)})){if(i.cdr instanceof q&&L.is(i.cdr.car,".")&&i.cdr.cdr instanceof q&&i.cdr.cdr.cdr===U){return i.cdr.cdr.car}if(!(i.cdr===U||i.cdr instanceof q)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof q&&r[0]===U)){return r[0]}}r=r.map(function(e){if(d.has(e)){return e.clone()}else{d.add(e);return e}});var n=l(i.cdr,0,1);if(n===U&&r[0]===U){return undefined}return li(n,function(e){if(r[0]===U){return e}if(r.length===1){return u(r[0],e)}var t=r.reduce(function(e,t){return u(e,t)});return u(t,e)})})}(i.car.cdr)}var d=new Set;function l(e,t,r){if(e instanceof q){if(e.car instanceof q){if(L.is(e.car.car,"unquote-splicing")){return f(e,t+1,r)}if(L.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof q&&e.car.cdr.car instanceof q&&L.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new q(new q(new L("unquote"),f(n,t+2,r)),U)}else if(e.car.cdr instanceof q&&e.car.cdr.cdr!==U){if(e.car.cdr.car instanceof q){var i=[];return function t(r){if(r===U){return q.fromArray(i)}return li(Lo(r.car,{env:c,dynamic_scope:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(L.is(e.car,"quasiquote")){var u=l(e.cdr,t,r+1);return new q(e.car,u)}if(L.is(e.car,"quote")){return new q(e.car,l(e.cdr,t,r))}if(L.is(e.car,"unquote")){t++;if(t<r){return new q(new L("unquote"),l(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof q){if(e.cdr.cdr!==U){if(e.cdr.car instanceof q){var a=[];return function t(r){if(r===U){return q.fromArray(a)}return li(Lo(r.car,{env:c,dynamic_scope:o,error:s}),function(e){a.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return Lo(e.cdr.car,{env:c,dynamic_scope:o,error:s})}}else{return e.cdr}}return h(e,function(e){return l(e,t,r)})}else if(zi(e)){return _(e,t,r)}else if(e instanceof Array){return p(e,t,r)}return e}function n(e){if(e instanceof q){delete e[qu];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(zi(e.car)&&!r(Object.values(e.car))){return to(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return to(e.car)}if(e.car instanceof q&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return to(e.car)}var i=l(e.car,0,1);return li(i,function(e){n(e);return to(e)})},"(quasiquote list ,value ,@value)\n\n        Similar macro to `quote` but inside it you can use special\n        expressions unquote abbreviated to , that will evaluate expresion inside\n        and return its value or unquote-splicing abbreviated to ,@ that will\n        evaluate expression but return value without parenthesis (it will join)\n        the list with its value. Best used with macros but it can be used outside"),clone:g("clone",function e(t){Eo("clone",t,"pair");return t.clone()},"(clone list)\n\n        Function return clone of the list."),append:g("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof q){return e.clone()}return e});return(t=co.get("append!")).call.apply(t,[this].concat(M(n)))},"(append item ...)\n\n        Function will create new list with eac argument appended to the end.\n        It will always return new list and not modify it's arguments."),"append!":g("append!",function(){var r=co.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){Eo("append!",e,["nil","pair"]);if((t instanceof q||t===U)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(wu(t)){return e}if(e===U){if(t===U){return U}return t}return e.append(t)},U)},"(append! arg1 ...)\n\n        Destructive version of append, it modify the list in place. It return\n        new list where each argument is appened to the end. It may modify\n        lists added as arguments."),reverse:g("reverse",function e(t){Eo("reverse",t,["array","pair","nil"]);if(t===U){return U}if(t instanceof q){var r=co.get("list->array")(t).reverse();return co.get("array->list")(r)}else if(!(t instanceof Array)){throw new Error(bo("reverse",Oo(t),"array or pair"))}else{return t.reverse()}},"(reverse list)\n\n        Function will reverse the list or array. If value is not a list\n        or array it will throw exception."),nth:g("nth",function e(t,r){Eo("nth",t,"number");Eo("nth",r,["array","pair"]);if(r instanceof q){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===U||n.haveCycles("cdr")){return U}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(bo("nth",Oo(r),"array or pair",2))}},"(nth index obj)\n\n        Function return nth element of the list or array. If used with different\n        value it will throw exception"),list:g("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new q(t,e)},U)},"(list . args)\n\n        Function create new list out of its arguments."),substring:g("substring",function e(t,r,n){Eo("substring",t,"string");Eo("substring",r,"number");Eo("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n            Function return part of the string starting at start ending with end."),concat:g("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return Eo("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n        Function create new string by joining its arguments"),join:g("join",function e(t,r){Eo("join",t,"string");Eo("join",r,["pair","nil"]);return co.get("list->array")(r).join(t)},"(join separator list)\n\n        Function return string by joining elements of the list"),split:g("split",function e(t,r){Eo("split",t,["regex","string"]);Eo("split",r,"string");return co.get("array->list")(r.split(t))},"(split separator string)\n\n            Function create list by splitting string by separatar that can\n            be a string or regular expression."),replace:g("replace",function e(t,r,n){Eo("replace",t,["regex","string"]);Eo("replace",r,["string","function"]);Eo("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n        Function change pattern to replacement inside string. Pattern can be string\n        or regex and replacement can be function or string."),match:g("match",function e(t,r){Eo("match",t,["regex","string"]);Eo("match",r,"string");var n=r.match(t);return n?co.get("array->list")(n):false},"(match pattern string)\n\n        function return match object from JavaScript as list or #f if not match."),search:g("search",function e(t,r){Eo("search",t,["regex","string"]);Eo("search",r,"string");return r.search(t)},"(search pattern string)\n\n        Function return first found index of the pattern inside a string"),repr:g("repr",function e(t,r){return nu(t,r)},"(repr obj)\n\n        Function return string LIPS representation of an object as string."),"escape-regex":g("escape-regex",function(e){Eo("escape-regex",e,"string");return Tn(e.valueOf())},"(escape-regex string)\n\n        Function return new string where all special operators used in regex,\n        are escaped with slash so they can be used in RegExp constructor\n        to match literal string"),env:g("env",function e(e){e=e||this;var t=Object.keys(e.__env__).map(L);var r;if(t.length){r=q.fromArray(t)}else{r=U}if(e.__parent__ instanceof Ka){return co.get("env")(e.__parent__).append(r)}return r},"(env)\n        (env obj)\n\n        Function return list of values (functions, macros and variables)\n        inside environment and it's parents."),new:g("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=p(Bu(e),M(r.map(function(e){return Ou(e)})));return i},"(new obj . args)\n\n        Function create new JavaScript instance of an object."),typecheck:g(Eo,"(typecheck label value type [position])\n\n         Function check type and throw exception if type don't match.\n         Type can be string or list of strings. Position optional argument\n         is used to created proper error message."),"unset-special!":g("unset-special!",function(e){Eo("remove-special!",e,"string");delete ei.remove(e.valueOf())},"(unset-special! name)\n\n        Function remove special symbol from parser. Added by `set-special!`,\n        name must be a string."),"set-special!":g("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ei.LITERAL;Eo("set-special!",e,"string",1);Eo("set-special!",t,"symbol",2);ei.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n        Add special symbol to the list of transforming operators by the parser.\n        e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n        transformed into (x (1 2 3)) so you can write x macro that will process\n        the list. 3rd argument is optional and it can be constant value\n        lips.specials.SPLICE if this constant is used it will transform\n        `#(1 2 3)` into (x 1 2 3) that is required by # that define vectors.'),get:no,".":no,unbind:g(Bu,"(unbind fn)\n\n         Function remove bidning from function so you can get props from it."),type:g(Oo,"(type object)\n\n         Function return type of an object as string."),debugger:g("debugger",function(){debugger},"(debugger)\n\n            Function stop JavaScript code in debugger."),in:g("in",function(e,t){if(e instanceof L||e instanceof _a||e instanceof k){e=e.valueOf()}return e in Ou(t)},"(in key value)\n\n        Function use is in operator to check if value is in object."),instanceof:g("instanceof",function(e,t){return t instanceof Bu(e)},"(instanceof type obj)\n\n        Function check of object is instance of object."),"prototype?":g("prototype?",iu,"(prototype? obj)\n\n         Function check if value is JavaScript Object prototype."),"macro?":g("macro?",function(e){return e instanceof hu},"(macro? expression)\n\n        Function check if value is a macro."),"function?":g("function?",Du,"(function? expression)\n\n         Function check if value is a function."),"real?":g("real?",function(e){if(Oo(e)!=="number"){return false}if(e instanceof k){return e.isFloat()}return k.isFloat(e)},"(real? number)\n\n        Function check if value is real number."),"number?":g("number?",function(e){return Number.isNaN(e)||k.isNumber(e)},"(number? expression)\n\n        Function check if value is a number or NaN value."),"string?":g("string?",function(e){return _a.isString(e)},"(string? expression)\n\n        Function check if value is a string."),"pair?":g("pair?",function(e){return e instanceof q},"(pair? expression)\n\n            Function check if value is a pair or list structure."),"regex?":g("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n        Function check if value is regular expression."),"null?":g("null?",function(e){return wu(e)},"(null? expression)\n\n        Function check if value is nulish."),"boolean?":g("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n        Function check if value is boolean."),"symbol?":g("symbol?",function(e){return e instanceof L},"(symbol? expression)\n\n        Function check if value is LIPS symbol"),"array?":g("array?",function(e){return e instanceof Array},"(array? expression)\n\n        Function check if value is an arrray."),"object?":g("object?",function(e){return e!==U&&e!==null&&!(e instanceof pa)&&!(e instanceof RegExp)&&!(e instanceof _a)&&!(e instanceof q)&&!(e instanceof k)&&_(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n        Function check if value is an plain object."),flatten:g("flatten",function e(t){Eo("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n        Return shallow list from tree structure (pairs)."),"array->list":g("array->list",function(e){Eo("array->list",e,"array");return q.fromArray(e)},"(array->list array)\n\n        Function convert JavaScript array to LIPS list."),"tree->array":g("tree->array",Yi("tree->array",true),"(tree->array list)\n\n         Function convert LIPS list structure into JavaScript array."),"list->array":g("list->array",Yi("list->array"),"(list->array list)\n\n         Function convert LIPS list into JavaScript array."),apply:g("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Eo("apply",t,"function",1);var u=n.pop();Eo("apply",u,["pair","nil"],n.length+2);n=n.concat(co.get("list->array").call(this,u));return t.apply(this,Po(t,n))},"(apply fn list)\n\n        Function that call function with list of arguments."),length:g("length",function e(t){if(!t||t===U){return 0}if(t instanceof q){return t.length()}if("length"in t){return t.length}},"(length expression)\n\n        Function return length of the object, the object can be list\n        or any object that have length property."),"string->number":g("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;Eo("string->number",e,"string",1);Eo("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(gn)||e.match(vn)){return An(e,t)}else if(e.match(bn)||e.match(dn)){return Cn(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(yn)&&r||e.match(mn)){return Fn(e,t)}if(e.match(un)){return Sn(e)}}return false},"(string->number number [radix])\n\n        Function convert string to number."),try:g(new hu("try",function(t,e){var c=this;var f=e.dynamic_scope,l=e.error;return new Promise(function(i,n){var u,a;if(L.is(t.cdr.car.car,"catch")){u=t.cdr.car;if(t.cdr.cdr instanceof q&&L.is(t.cdr.cdr.car.car,"finally")){a=t.cdr.cdr.car}}else if(L.is(t.cdr.car.car,"finally")){a=t.cdr.car}if(!(a||u)){throw new Error("try: invalid syntax")}var o=i;if(a){o=function e(t,r){o=n;li(Lo(new q(new L("begin"),a.cdr),s),function(){r(t)})}}var s={env:c,error:function e(t){var r=c.inherit("try");if(u){r.set(u.cdr.car.car,t);var n={env:r,error:l};if(f){n.dynamic_scope=c}li(Lo(new q(new L("begin"),u.cdr.cdr),n),function(e){o(e,i)})}else{o(t,l)}}};if(f){s.dynamic_scope=c}var e=Lo(t.car,s);if(Fu(e)){e.then(function(e){o(e,i)})["catch"](s.error)}else{o(e,i)}})}),"(try expr (catch (e) code))\n         (try expr (catch (e) code) (finally code))\n         (try expr (finally code))\n\n         Macro execute user code and catch exception. If catch is provided\n         it's executed when expression expr throw error. If finally is provide\n         it's always executed at the end."),raise:g("raise",function(e){throw e},"(raise obj)\n\n        Throws new exception with given object."),throw:g("throw",function(e){throw new Error(e)},"(throw string)\n\n        Throws new expection."),find:g("find",function t(r,n){Eo("find",r,["regex","function"]);Eo("find",n,["pair","nil"]);if(wu(n)){return U}var e=mi("find",r);return li(e(n.car),function(e){if(e&&e!==U){return n.car}return t(r,n.cdr)})},"(find fn list)\n        (find regex list)\n\n        Higher order Function find first value for which function return true.\n        If called with regex it will create matcher function."),"for-each":g("for-each",function(e){var t;Eo("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){Eo("for-each",e,["pair","nil"],t+1)});var u=(t=co.get("map")).call.apply(t,[this,e].concat(n));if(Fu(u)){return u.then(function(){})}},"(for-each fn . lists)\n\n        Higher order function that call function `fn` by for each\n        value of the argument. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments."),map:g("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),u=1;u<t;u++){i[u-1]=arguments[u]}Eo("map",r,"function");var a=co.get("list?");i.forEach(function(e,t){Eo("map",e,["pair","nil"],t+1);if(e instanceof q&&!a.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return U}if(i.some(function(e){return e===U})){return U}var o=i.map(function(e){return e.car});var c=this.get("parent.frame");var s=this.newFrame(r,o);s.set("parent.frame",c);return li(r.call.apply(r,[s].concat(M(o))),function(t){return li(e.call.apply(e,[n,r].concat(M(i.map(function(e){return e.cdr})))),function(e){return new q(t,e)})})},"(map fn . lists)\n\n        Higher order function that call function `fn` by for each\n        value of the argument. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments. The return\n        values of the function call is acumulated in result list and\n        returned by the call to map."),"list?":g("list?",function(e){var t=e;while(true){if(t===U){return true}if(!(t instanceof q)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n        Function test if value is proper linked list structure.\n        The car of each pair can be any value. It return false on cycles."'),some:g("some",function t(r,n){Eo("some",r,"function");Eo("some",n,["pair","nil"]);if(wu(n)){return false}else{return li(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n        Higher order function that call argument on each element of the list.\n        It stops when function fn return true for a value if so it will\n        return true. If none of the values give true, the function return false"),fold:g("fold",aa("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),u=3;u<n;u++){i[u-3]=arguments[u]}Eo("fold",t,"function");i.forEach(function(e,t){Eo("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===U})){return r}var a=e.call.apply(e,[this,t,r].concat(M(i.map(function(e){return e.cdr}))));return li(a,function(e){return t.apply(void 0,M(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n         Function fold is reverse of the reduce. it call function `fn`\n         on each elements of the list and return single value.\n         e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))\n         for: (fold fn '() alist blist)"),pluck:g("pluck",function e(){for(var t=arguments.length,u=new Array(t),r=0;r<t;r++){u[r]=arguments[r]}return function(t){u=u.map(function(e){return e instanceof L?e.__name__:e});if(u.length===0){return U}else if(u.length===1){var e=u,r=j(e,1),n=r[0];return t[n]}var i={};u.forEach(function(e){i[e]=t[e]});return i}},"(pluck . string)\n\n        If called with single string it will return function that will return\n        key from object. If called with more then one argument function will\n        return new object by taking all properties from given object."),reduce:g("reduce",aa("reduce",function(t,r,e){var n=this;for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}Eo("reduce",r,"function");u.forEach(function(e,t){Eo("reduce",e,["pair","nil"],t+1)});if(u.some(function(e){return e===U})){return e}return li(r.apply(void 0,M(u.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(M(u.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n         Higher order function take each element of the list and call\n         the function with result of previous call or init and next element\n         on the list until each element is processed and return single value\n         as result of last call to `fn` function.\n         e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))\n         for (reduce fn init alist blist)"),filter:g("filter",function e(t,r){Eo("filter",t,["regex","function"]);Eo("filter",r,["pair","nil"]);var i=co.get("list->array")(r);var u=[];var a=mi("filter",t);return function t(r){function e(e){if(e&&e!==U){u.push(n)}return t(++r)}if(r===i.length){return q.fromArray(u)}var n=i[r];return li(a(n),e)}(0)},"(filter fn list)\n        (filter regex list)\n\n        Higher order function that call `fn` for each element of the list\n        and return list for only those elements for which funtion return\n        true value. If called with regex it will create matcher function."),compose:g(ua,"(compose . fns)\n\n         Higher order function and create new function that apply all functions\n         From right to left and return it's value. Reverse of compose.\n         e.g.:\n         ((compose (curry + 2) (curry * 3)) 3)\n         11"),pipe:g(ia,"(pipe . fns)\n\n         Higher order function and create new function that apply all functions\n         From left to right and return it's value. Reverse of compose.\n         e.g.:\n         ((pipe (curry + 2) (curry * 3)) 3)\n         15"),curry:g(la,"(curry fn . args)\n\n         Higher order function that create curried version of the function.\n         The result function will have parially applied arguments and it\n         will keep returning functions until all arguments are added\n\n         e.g.:\n         (define (add a b c d) (+ a b c d))\n         (define add1 (curry add 1))\n         (define add12 (add 2))\n         (display (add12 3 4))"),gcd:g("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}wo("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n            Function return the greatest common divisor of their arguments."),lcm:g("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}wo("lcm",r,"number");var i=r.length,u=au(r[0]);for(var a=1;a<i;a++){var o=au(r[a]),s=u;while(u&&o){u>o?u%=o:o%=u}u=au(s*r[a])/(u+o)}return k(u)},"(lcm n1 n2 ...)\n\n        Function return the least common multiple of their arguments."),"odd?":g("odd?",sa(function(e){return k(e).isOdd()}),"(odd? number)\n\n         Function check if number os odd."),"even?":g("even?",sa(function(e){return k(e).isEven()}),"(even? number)\n\n         Function check if number is even."),"*":g("*",fa(function(e,t){return k(e).mul(t)},k(1)),"(* . numbers)\n\n        Multiplicate all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":g("+",fa(function(e,t){return k(e).add(t)},k(0)),"(+ . numbers)\n\n        Sum all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":g("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}wo("-",t,"number");if(t.length===1){return k(t[0]).sub()}if(t.length){return t.reduce(ca(function(e,t){return k(e).sub(t)}))}},"(- n1 n2 ...)\n        (- n)\n\n        Substract number passed as argument. If only one argument is passed\n        it will negate the value."),"/":g("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}wo("/",t,"number");if(t.length===1){return k(1).div(t[0])}return t.reduce(ca(function(e,t){return k(e).div(t)}))},"(/ n1 n2 ...)\n        (/ n)\n\n        Divide number passed as arguments one by one. If single argument\n        is passed it will calculate (/ 1 n1)."),abs:g("abs",sa(function(e){return k(e).abs()}),"(abs number)\n\n         Function create absolute value from number."),truncate:g("truncate",function(e){Eo("truncate",e,"number");if(k.isFloat(e)){if(e instanceof k){e=e.valueOf()}return ka(lu(e))}return e},"(truncate n)\n\n        Function return integer value from real number."),sqrt:g("sqrt",sa(function(e){return k(e).sqrt()}),"(sqrt number)\n\n         Function return square root of the number."),"**":g("**",ca(function(e,t){e=k(e);t=k(t);if(t.cmp(0)===-1){return ka(1).div(e).pow(t.sub())}return e.pow(t)}),"(** a b)\n\n         Function calculate number a to to the power of b."),"1+":g("1+",sa(function(e){return k(e).add(1)}),"(1+ number)\n\n             Function add 1 to the number and return result."),"1-":g(sa(function(e){return k(e).sub(1)}),"(1- number)\n\n         Function substract 1 from the number and return result."),"%":g("%",function(e,t){wo("%",[e,t],"number");return k(e).rem(t)},"(% n1 n2)\n\n        Function get reminder of it's arguments."),"==":g("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}wo("==",t,"number");return ou(function(e,t){return k(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are equal"),">":g(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}wo(">",t,"number");return ou(function(e,t){return k(e).cmp(t)===1},t)},"(> x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically increasing"),"<":g("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}wo("<",t,"number");return ou(function(e,t){return k(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically decreasing"),"<=":g("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}wo("<=",t,"number");return ou(function(e,t){return[0,-1].includes(k(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically nonincreasing"),">=":g(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}wo(">=",t,"number");return ou(function(e,t){return[0,1].includes(k(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically nondecreasing"),"eq?":g("eq?",su,"(eq? a b)\n\n         Function compare two values if they are identical."),or:g(new hu("or",function(e,t){var i=t.dynamic_scope,u=t.error;var a=co.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return false}var s;return function t(){function e(e){s=e;if(s!==false){return s}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=Lo(r,{env:o,dynamic_scope:i,error:u});return li(n,e)}}()}),"(or . expressions)\n\n         Macro execute the values one by one and return the one that is truthy value.\n         If there are no expression that evaluate to true it return false."),and:g(new hu("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=t.dynamic_scope,u=t.error;var a=co.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return true}var s;return function t(){function e(e){s=e;if(s===false){return false}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=Lo(r,{env:o,dynamic_scope:i,error:u});return li(n,e)}}()}),"(and . expressions)\n\n         Macro evalute each expression in sequence if any value return false it will\n         return false. If each value return true it will return the last value.\n         If it's called without arguments it will return true."),"|":g("|",function(e,t){return k(e).or(t)},"(| a b)\n\n        Function calculate or bit operation."),"&":g("&",function(e,t){return k(e).and(t)},"(& a b)\n\n        Function calculate and bit operation."),"~":g("~",function(e){return k(e).neg()},"(~ number)\n\n        Function negate the value."),">>":g(">>",function(e,t){return k(e).shr(t)},"(>> a b)\n\n        Function right shit the value a by value b."),"<<":g("<<",function(e,t){return k(e).shl(t)},"(<< a b)\n\n        Function left shit the value a by value b."),not:g("not",function e(t){if(wu(t)){return true}return!t},"(not object)\n\n        Function return negation of the argument.")},undefined,"global");var fo=co.inherit("user-env");function lo(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n         Constant used to hide stdin, stdout and stderr so they don't interfere\n         with variables with the same name. Constants are internal type\n         of variables that can't be redefined, defining variable with same name\n         will throw an error.");co.set("**interaction-environment**",e)}lo(fo,ao);co.doc("**interaction-environment**","**interaction-environment**\n\n    Internal dynamic, global variable used to find interpreter environment.\n    It's used so the read and write functions can locate **internal-env**\n    that contain references to stdin, stdout and stderr.");(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;co.set(r,g(r,function(e){Eo(r,e,"number");if(e instanceof k){return e[t]()}},"(".concat(r," number)\n\n            Function calculate ").concat(r," of a number.")))})})();function ho(e){if(e.length===1){return e[0]}else{var t=[];var r=ho(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function po(e,t,r){var n=[];for(var i=t;i<=r;++i){var u=[];for(var a=0;a<i;++a){u.push(e)}n=n.concat(ho(u))}return n}po(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";co.set(i,g(i,function(e){return r.reduce(function(e,t){Eo(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n        Function calculate ").concat(n)))});function _o(e,t){var r=e.split(Vr.sep).filter(Boolean);for(var n=r.length;n--;){var i;var u=(i=Vr).join.apply(i,["/"].concat(M(r.slice(0,n+1))));if(t(u)){return u}}}function vo(e){return _o(e,function(e){return zr.existsSync(Vr.join(e,"node_modules"))})}function mo(){return typeof global!=="undefined"&&global.global===global}function yo(){return go.apply(this,arguments)}function go(){go=O(z.mark(function e(){var r,n,i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Promise.resolve().then(function(){return bs});case 2:r=t.sent;n=r.createRequire;Jr=n(typeof document==="undefined"&&typeof location==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:typeof document==="undefined"?location.href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);t.next=7;return Promise.resolve().then(function(){return bs});case 7:zr=t.sent;t.next=10;return Promise.resolve().then(function(){return Ts});case 10:Vr=t.sent;co.set("global",global);co.set("self",global);co.set("window",undefined);i=new URL(typeof document==="undefined"&&typeof location==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:typeof document==="undefined"?location.href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);u=Vr.dirname(i.pathname);a=Vr.basename(i.pathname);co.set("__dirname",u);co.set("__filename",a);co.set("require.resolve",g("require.resolve",function(e){Eo("require.resolve",e,"string");var t=e.valueOf();return Jr.resolve(t)},"(require.resolve path)\n\n        Return path relative the current module."));co.set("require",g("require",function(t){Eo("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=Jr(Vr.join(e,t))}else{var n=vo(e);if(n){r=Jr(Vr.join(n,"node_modules",t))}else{r=Jr(t)}}}catch(e){r=Jr(t)}return Su(r,global)},"(require module)\n\n        Function to be used inside Node.js to import the module."));case 21:case"end":return t.stop()}}},e)}));return go.apply(this,arguments)}if(mo()){yo()}else if(typeof window!=="undefined"&&window===Mr){co.set("window",window);co.set("global",undefined);co.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){co.set("self",self);co.set("window",undefined);co.set("global",undefined)}function bo(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(Du(r)){return"Invalid type got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){r=r[0]}else{var u=r[r.length-1];r=r.slice(0,-1).join(", ")+" or "+u}}return"Expecting ".concat(r,", got ").concat(t).concat(i)}function wo(r,e,n){e.forEach(function(e,t){Eo(r,e,n,t+1)})}function Do(e,t,r){Eo(e,t,r);if(t.__type__===Ja){throw new Error(bo(e,"binary-port","textual-port"))}}function Eo(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=Oo(t).toLowerCase();if(Du(r)){if(!r(t)){throw new Error(bo(e,i,r,n))}return}var u=false;if(r instanceof q){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){u=true}}else{r=r.valueOf().toLowerCase()}if(!u&&i!==r){throw new Error(bo(e,i,r,n))}}function Ao(e){var t=_(e);return["string","function"].includes(t)||_(e)==="symbol"||e instanceof Qn||e instanceof L||e instanceof k||e instanceof _a||e instanceof RegExp}function Fo(e){return e instanceof k||e instanceof _a||e instanceof pa}function xo(e,t){if(e===null){return false}return _(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function Co(e,t){if(xo(e,t)||xo(e.__proto__,t)){return Du(e[t])}}function ko(r){var n=new WeakMap;return function(e){var t=n.get(e);if(!t){t=r(e)}return t}}Oo=ko(Oo);function Oo(e){var t=$r.get(e);if(t){return t}if(_(e)==="object"){for(var r=0,n=Object.entries(Yr);r<n.length;r++){var i=j(n[r],2),u=i[0],a=i[1];if(e instanceof a){return u}}if(e.__instance__){e.__instance__=false;if(e.__instance__){if(Du(e.toType)){return e.toType()}return"instance"}}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(Co(e,Symbol.iterator)){return"iterator"}if(Co(e,Symbol.asyncIterator)){return"async-iterator"}}if(e.constructor.name===""){return"object"}return e.constructor.name.toLowerCase()}}return _(e)}function So(e){var t=[];r(e);if(t.length){return u(e)}return e;function r(e){if(Fu(e)){t.push(e)}else if(e instanceof q){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=O(z.mark(function e(r){var n;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.t0=q;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return u(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return u(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[qu]){n[qu]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}}},e)}));return i.apply(this,arguments)}function u(e){if(e instanceof Array){return Zn(e.map(u))}if(e instanceof q&&t.length){return n(e)}return e}}function Bo(e,t){var r=t.env,n=t.dynamic_scope,i=t.error;var u=[];var a=e;uu(a);function o(){return u}return function t(){if(a instanceof q){var e=Lo(a.car,{env:r,dynamic_scope:n,error:i});if(n){e=li(e,function(e){if(ea(e)){return e.bind(n)}return e})}return li(So(e),function(e){u.push(e);if(a.haveCycles("cdr")){return o()}a=a.cdr;return t()})}else if(a===U){return o()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function jo(e,t,r){var n=e.invoke(t,r);return li(So(n),function(e){if(e instanceof q){e.markCycles()}return to(e)})}function Io(e,t,r){function n(e){if(e instanceof q){e.markCycles();return e}return to(e)}var i=e.invoke(t,r);return li(So(i),function e(t){if(!t||t&&t[qu]||Ao(t)){return t}else{return li(Lo(t,r),n)}})}function Po(e,t){if(Pu(e)&&!Iu(e)&&(!Nu(e)||Tu(e))){t=t.map(Ou)}if(!Xu(e)&&t.some(Hi)&&!Hi(e)&&!Gi(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(Hi(i)){u=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return li(i.apply(this,r),Ou)};Wu(u,"__bound__",true);Wu(u,"__fn__",i);u.prototype=i.prototype;r[n]=u}else{r[n]=i}};while(n--){var u;i()}t=r}return t}function No(i,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=t.env,a=t.dynamic_scope,r=t.error,o=r===void 0?function(){}:r;e=Bo(e,{env:u,dynamic_scope:a,error:o});return li(e,function(e){if(Xu(i)){i=Bu(i)}e=Po(i,e);var t=e.slice();var r=(a||u).newFrame(i,t);var n=So(i.apply(r,e));return li(n,function(e){if(e instanceof q){e.markCycles();return to(e)}return Cu(e)},o)})}var Ro=function(){function t(e){A(this,t);this.__value__=e}x(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}},{key:"toString",value:function e(){return"#<Continuation>"}}]);return t}();var To=function e(){};function Lo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=e.env,n=e.dynamic_scope,c=e.error,i=c===void 0?To:c;try{if(n===true){r=n=r||co}else if(r===true){r=n=co}else{r=r||co}var u={env:r,dynamic_scope:n,error:i};var a;if(wu(t)){return t}if(t instanceof L){return r.get(t)}if(!(t instanceof q)){return t}var o=t.car;var f=t.cdr;if(o instanceof q){a=So(Lo(o,u));if(Fu(a)){return a.then(function(e){return Lo(new q(e,t.cdr),u)})}else if(!Au(a)){throw new Error(Oo(a)+" "+r.get("repr")(a)+" is not callable while evaluating "+t.toString())}}if(o instanceof L){a=r.get(o)}else if(Du(o)){a=o}var s;if(a instanceof vu){s=jo(a,t,u)}else if(a instanceof hu){s=Io(a,f,u)}else if(Du(a)){s=No(a,f,u)}else if(Eu(a)){s=a.invoke()}else if(t instanceof q){a=o&&o.toString();throw new Error("".concat(Oo(o)," ").concat(a," is not a function"))}else{return t}var l=r.get(Symbol["for"]("__promise__"),{throwError:false});if(l===true&&Fu(s)){s=s.then(function(e){if(e instanceof q&&!a[qu]){return Lo(e,u)}return e});return new Qn(s)}return s}catch(e){i&&i.call(r,e,t)}}var Uo=Mo(function(e){return e});var qo=Mo(function(e,t){return t});function Mo(_){return function(){var n=O(z.mark(function e(r,n,i){var u,a,o,s,h,c,p,f,l;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(i===true){n=i=n||fo}else if(n===true){n=i=fo}else{n=n||fo}u=[];a=Array.isArray(r)?r:ci(r);o=false;s=false;t.prev=5;c=Ur(a);case 7:t.next=9;return c.next();case 9:if(!(o=!(p=t.sent).done)){t.next=27;break}f=p.value;l=Lo(f,{env:n,dynamic_scope:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}throw t}});if(Fu(l)){t.next=16;break}u.push(_(f,l));t.next=24;break;case 16:t.t0=u;t.t1=_;t.t2=f;t.next=21;return l;case 21:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 24:o=false;t.next=7;break;case 27:t.next=33;break;case 29:t.prev=29;t.t5=t["catch"](5);s=true;h=t.t5;case 33:t.prev=33;t.prev=34;if(!(o&&c["return"]!=null)){t.next=38;break}t.next=38;return c["return"]();case 38:t.prev=38;if(!s){t.next=41;break}throw h;case 41:return t.finish(38);case 42:return t.finish(33);case 43:return t.abrupt("return",u);case 44:case"end":return t.stop()}}},e,null,[[5,29,33,43],[34,,38,42]])}));function e(e,t,r){return n.apply(this,arguments)}return e}()}function Yo(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=zn(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var u=new Ln;var a=Pr(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.includes(s)){u.push(s)}else if(!u.is_empty()){var f=u.top();var c=t[f];if(s===c){u.pop()}else{throw new Error("Syntax error: missing closing ".concat(c))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){a.e(e)}finally{a.f()}return u.is_empty()}function $o(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new Mr.Worker(r.createObjectURL(n))}function zo(){return ys.version.match(/^(\{\{VER\}\}|DEV)$/)}function Vo(){if(mo()){return}var e;if(document.currentScript){e=document.currentScript}else{var t=document.querySelectorAll("script");if(!t.length){return}e=t[t.length-1]}var r=e.getAttribute("src");return r}var Jo=Vo();function Go(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t="dist/std.xcb";if(e===""){if(Jo){e=Jo.replace(/[^/]*$/,"std.xcb")}else if(zo()){e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t)}else{e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(ys.version,"/").concat(t)}}var r=co.get("load");return r.call(fo,e,co)}function Ho(e){this.url=e;var a=this.worker=$o(function(){var a;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initilized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];a.exec(e,t).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var u=r.params[0];if(typeof u!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(u,"/dist/lips.min.js"));a=new ys.Interpreter("worker");o=Go(u);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var u=++n;return new Promise(function(n,i){a.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===u){if(r.error){i(r.error)}else{n(r.result)}a.removeEventListener("message",e)}});a.postMessage({type:"RPC",method:t,id:u,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.rpc("eval",[e,t])}}var Wo={pair:function e(t){var r=j(t,2),n=r[0],i=r[1];return q(n,i)},number:function e(t){if(_a.isString(t)){return k([t,10])}return k(t)},regex:function e(t){var r=j(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return U},symbol:function e(t){if(_a.isString(t)){return L(t)}else if(Array.isArray(t)){return L(Symbol["for"](t[0]))}},string:_a,character:pa};var Qo=Object.keys(Wo);var Zo={};for(var Ko=0,Xo=Object.entries(Qo);Ko<Xo.length;Ko++){var es=j(Xo[Ko],2),ts=es[0],rs=es[1];Zo[rs]=+ts}function ns(e){return Zo[e]}function is(e){return Qo[e]}function us(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":ns("regex"),"#":[r.source,r.flags]}}var n=ns(r.constructor.__class__);if(!xu(n)){return{"@":n,"#":r.serialize()}}}return t})}function as(e){return JSON.parse(e,function(e,t){if(t&&_(t)==="object"){if(!xu(t["@"])){var r=is(t["@"]);if(Wo[r]){return Wo[r](t["#"])}}}return t})}var os=function(){var e={pair:q,symbol:L,number:k,string:_a,character:pa,nil:U.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new nr;var u={};for(var n=0,i=Object.entries(Wo);n<i.length;n++){var a=j(i[n],2),o=a[0],s=a[1];var f=e[o];u[o]=t(f,s)}var c=43311;Object.keys(u).forEach(function(e){var t=u[e];if(typeof t==="function"){var r=t;sr({Class:r,tag:c,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;sr({Class:i,tag:c,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}c++});return r}();function ss(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var u=0;t.forEach(function(e){i.set(e,u);u+=e.length});return i}else if(t.length){return t[0]}}function cs(){var e=1;var t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}var fs=7;function ls(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,fs));var n=r.substring(0,4);if(n==="LIPS"){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function hs(e){var t=cs();var r=os.encode(e);return ss(t,Cr(r,{magic:false}))}function ps(e){var t=ls(e),r=t.type,n=t.version;if(r==="LIPS"&&n===1){var i=kr(e.slice(fs),{magic:false});return os.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}function _s(e){console.error(e.message||e);if(e.code){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function ds(){var a=["text/x-lips","text/x-scheme"];var o;function s(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(qo).then(t)["catch"](function(e){_s(e);t()})}else{return qo(r.innerHTML).then(t)["catch"](function(e){_s(e);t()})}})}function e(){return new Promise(function(i){var u=Array.from(document.querySelectorAll("script"));return function e(){var t=u.shift();if(!t){i()}else{var r=t.getAttribute("type");if(a.includes(r)){var n=t.getAttribute("bootstrap");if(!o&&typeof n==="string"){return Go(n).then(function(){return s(t)}).then(e)}else{return s(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+a.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(vs){var t=vs;var r=t.getAttribute("bootstrap");if(typeof r==="string"){return Go(r).then(function(){o=true;return e()})}}return e()}var vs=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){Hr(window,ds)}var ms=function(){var e=_a("Tue, 31 Jan 2023 09:57:18 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var u="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter DEV (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specic function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return u}();_i(Ei,"__class__","ahead");_i(q,"__class__","pair");_i(Mi,"__class__","nil");_i(Ai,"__class__","pattern");_i(Di,"__class__","formatter");_i(hu,"__class__","macro");_i(vu,"__class__","syntax");_i(Ka,"__class__","environment");_i(Na,"__class__","input-port");_i(Ra,"__class__","output-port");_i(Ta,"__class__","output-port");_i(La,"__class__","output-string-port");_i(qa,"__class__","input-string-port");_i($a,"__class__","input-file-port");_i(Ua,"__class__","output-file-port");_i(Za,"__class__","lips-error");[k,Ca,Ia,ka,Pa].forEach(function(e){_i(e,"__class__","number")});_i(pa,"__class__","character");_i(L,"__class__","symbol");_i(_a,"__class__","string");_i(Qn,"__class__","promise");var ys={version:"DEV",banner:ms,date:"Tue, 31 Jan 2023 09:57:18 +0000",exec:qo,parse:ua(di,ci),tokenize:zn,evaluate:Lo,compile:Uo,serialize:us,unserialize:as,serialize_bin:hs,unserialize_bin:ps,bootstrap:Go,Environment:Ka,env:fo,Worker:Ho,Interpreter:Qa,balanced_parenthesis:Yo,balancedParenthesis:Yo,balanced:Yo,Macro:hu,Syntax:vu,Pair:q,Values:eo,QuotedPromise:Qn,Error:Za,quote:to,InputPort:Na,OutputPort:Ra,BufferedOutputPort:Ta,InputFilePort:$a,OutputFilePort:Ua,InputStringPort:qa,OutputStringPort:La,InputByteVectorPort:Ma,OutputByteVectorPort:Ya,InputBinaryFilePort:za,OutputBinaryFilePort:Va,Formatter:Di,Parser:oi,Lexer:s,specials:ei,repr:$i,nil:U,eof:Ha,LSymbol:L,LNumber:k,LFloat:ka,LComplex:Ca,LRational:Ia,LBigInteger:Pa,LCharacter:pa,LString:_a,rationalize:Ba};co.set("lips",ys);var gs={};var bs=Object.freeze({__proto__:null,default:gs});function ws(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var Ds=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var Es=function(e){return Ds.exec(e).slice(1)};function As(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=ws(Ns(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function Fs(e){var t=xs(e),r=Rs(e,-1)==="/";e=ws(Ns(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}function xs(e){return e.charAt(0)==="/"}function Cs(){var e=Array.prototype.slice.call(arguments,0);return Fs(Ns(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function ks(e,t){e=As(e).substr(1);t=As(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var u=Math.min(n.length,i.length);var a=u;for(var o=0;o<u;o++){if(n[o]!==i[o]){a=o;break}}var s=[];for(var o=a;o<n.length;o++){s.push("..")}s=s.concat(i.slice(a));return s.join("/")}var Os="/";var Ss=":";function Bs(e){var t=Es(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}function js(e,t){var r=Es(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}function Is(e){return Es(e)[3]}var Ps={extname:Is,basename:js,dirname:Bs,sep:Os,delimiter:Ss,relative:ks,join:Cs,isAbsolute:xs,normalize:Fs,resolve:As};function Ns(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var Rs="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)};var Ts=Object.freeze({__proto__:null,resolve:As,normalize:Fs,isAbsolute:xs,join:Cs,relative:ks,sep:Os,delimiter:Ss,dirname:Bs,basename:js,extname:Is,default:Ps});return ys});