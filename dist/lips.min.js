/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. DEV
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Tue, 14 Nov 2023 19:09:39 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.lips=t())})(this,function(){"use strict";function i(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function o(e,t){o=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return o(e,t)}function n(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function p(e,t,r){if(n()){p=Reflect.construct}else{p=function e(t,r,n){var i=[null];i.push.apply(i,r);var u=Function.bind.apply(t,i);var a=new u;if(n)o(a,n.prototype);return a}}return p.apply(null,arguments)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)o(e,t)}function _(e){"@babel/helpers - typeof";return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function a(e,t){if(t&&(_(t)==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return i(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function r(e){if(Array.isArray(e))return e}function t(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function l(e,t){if(!e)return;if(typeof e==="string")return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return r(e)||t(e)||l(e)||d()}function g(e){if(Array.isArray(e))return f(e)}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e){return g(e)||t(e)||l(e)||b()}function w(e,t,r,n,i,u,a){try{var o=e[u](a);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function B(o){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=o.apply(e,a);function i(e){w(n,t,r,i,u,"next",e)}function u(e){w(n,t,r,i,u,"throw",e)}i(undefined)})}}function D(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function A(e,t,r){if(t)E(e.prototype,t);if(r)E(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function Y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function x(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,u;for(u=0;u<n.length;u++){i=n[u];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function F(e,t){if(e==null)return{};var r=x(e,t);var n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++){n=u[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function k(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var i=true;var u=false;var a,o;try{for(r=r.call(e);!(i=(a=r.next()).done);i=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){u=true;o=e}finally{try{if(!i&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}return n}function j(e,t){return r(e)||k(e,t)||l(e,t)||d()}function I(e){this.wrapped=e}function P(e){return new I(e)}function N(u){var a,o;function e(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(o){o=o.next=r}else{a=o=r;s(n,i)}})}function s(t,e){try{var r=u[t](e);var n=r.value;var i=n instanceof I;Promise.resolve(i?n.wrapped:n).then(function(e){if(i){s(t==="return"?"return":"next",e);return}c(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){s(a.key,a.arg)}else{o=null}}this._invoke=e;if(typeof u["return"]!=="function"){this["return"]=undefined}}N.prototype[typeof Symbol==="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};N.prototype.next=function(e){return this._invoke("next",e)};N.prototype["throw"]=function(e){return this._invoke("throw",e)};N.prototype["return"]=function(e){return this._invoke("return",e)};function e(e){return function(){return new N(e.apply(this,arguments))}}function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var T={exports:{}};var V={exports:{}};(function(e){var t=function(a){var e=Object.prototype;var f=e.hasOwnProperty;var s;var o=typeof Symbol==="function"?Symbol:{};var i=o.iterator||"@@iterator";var c=o.asyncIterator||"@@asyncIterator";var p=o.toStringTag||"@@toStringTag";function r(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{r({},"")}catch(e){r=function(e,t,r){return e[t]=r}}function _(e,t,r,n){var i=t&&t.prototype instanceof g?t:g;var u=Object.create(i.prototype);var a=new O(n||[]);u._invoke=x(e,r,a);return u}a.wrap=_;function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var v="suspendedStart";var y="suspendedYield";var m="executing";var l="completed";var h={};function g(){}function n(){}function t(){}var b={};r(b,i,function(){return this});var w=Object.getPrototypeOf;var D=w&&w(w(S([])));if(D&&D!==e&&f.call(D,i)){b=D}var u=t.prototype=g.prototype=Object.create(b);n.prototype=t;r(u,"constructor",t);r(t,"constructor",n);n.displayName=r(t,p,"GeneratorFunction");function E(e){["next","throw","return"].forEach(function(t){r(e,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===n||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}else{e.__proto__=t;r(e,p,"GeneratorFunction")}e.prototype=Object.create(u);return e};a.awrap=function(e){return{__await:e}};function A(o,s){function c(e,t,r,n){var i=d(o[e],o,t);if(i.type==="throw"){n(i.arg)}else{var u=i.arg;var a=u.value;if(a&&typeof a==="object"&&f.call(a,"__await")){return s.resolve(a.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)})}return s.resolve(a).then(function(e){u.value=e;r(u)},function(e){return c("throw",e,r,n)})}}var t;function e(r,n){function e(){return new s(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}E(A.prototype);r(A.prototype,c,function(){return this});a.AsyncIterator=A;a.async=function(e,t,r,n,i){if(i===void 0)i=Promise;var u=new A(_(e,t,r,n),i);return a.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})};function x(a,o,s){var c=v;return function e(t,r){if(c===m){throw new Error("Generator is already running")}if(c===l){if(t==="throw"){throw r}return B()}s.method=t;s.arg=r;while(true){var n=s.delegate;if(n){var i=F(n,s);if(i){if(i===h)continue;return i}}if(s.method==="next"){s.sent=s._sent=s.arg}else if(s.method==="throw"){if(c===v){c=l;throw s.arg}s.dispatchException(s.arg)}else if(s.method==="return"){s.abrupt("return",s.arg)}c=m;var u=d(a,o,s);if(u.type==="normal"){c=s.done?l:y;if(u.arg===h){continue}return{value:u.arg,done:s.done}}else if(u.type==="throw"){c=l;s.method="throw";s.arg=u.arg}}}}function F(e,t){var r=e.iterator[t.method];if(r===s){t.delegate=null;if(t.method==="throw"){if(e.iterator["return"]){t.method="return";t.arg=s;F(e,t);if(t.method==="throw"){return h}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return h}var i=n.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return h}if(i.done){t[e.resultName]=i.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=s}}else{return i}t.delegate=null;return h}E(u);r(u,p,"Generator");r(u,i,function(){return this});r(u,"toString",function(){return"[object Generator]"});function k(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(k,this);this.reset(true)}a.keys=function(r){var n=[];for(var e in r){n.push(e)}n.reverse();return function e(){while(n.length){var t=n.pop();if(t in r){e.value=t;e.done=false;return e}}e.done=true;return e}};function S(t){if(t){var e=t[i];if(e){return e.call(t)}if(typeof t.next==="function"){return t}if(!isNaN(t.length)){var r=-1,n=function e(){while(++r<t.length){if(f.call(t,r)){e.value=t[r];e.done=false;return e}}e.value=s;e.done=true;return e};return n.next=n}}return{next:B}}a.values=S;function B(){return{value:s,done:true}}O.prototype={constructor:O,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=s;this.done=false;this.delegate=null;this.method="next";this.arg=s;this.tryEntries.forEach(C);if(!e){for(var t in this){if(t.charAt(0)==="t"&&f.call(this,t)&&!isNaN(+t.slice(1))){this[t]=s}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var n=this;function e(e,t){u.type="throw";u.arg=r;n.next=e;if(t){n.method="next";n.arg=s}return!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];var u=i.completion;if(i.tryLoc==="root"){return e("end")}if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc");var o=f.call(i,"finallyLoc");if(a&&o){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else if(a){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}}else if(o){if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc){i=null}var u=i?i.completion:{};u.type=e;u.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return h}return this.complete(u)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);C(r);return h}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:S(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=s}return h}};return a}(e.exports);try{regeneratorRuntime=t}catch(e){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=t}else{Function("r","regeneratorRuntime = r")(t)}}})(V);(function(e){e.exports=V.exports})(T);var z=R(T.exports);var $=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var J=[];var K=[];var G=typeof Uint8Array!=="undefined"?Uint8Array:Array;var H=false;function W(){H=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){J[t]=e[t];K[e.charCodeAt(t)]=t}K["-".charCodeAt(0)]=62;K["_".charCodeAt(0)]=63}function Q(e){if(!H){W()}var t,r,n,i,u,a;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}u=e[o-2]==="="?2:e[o-1]==="="?1:0;a=new G(o*3/4-u);n=u>0?o-4:o;var s=0;for(t=0,r=0;t<n;t+=4,r+=3){i=K[e.charCodeAt(t)]<<18|K[e.charCodeAt(t+1)]<<12|K[e.charCodeAt(t+2)]<<6|K[e.charCodeAt(t+3)];a[s++]=i>>16&255;a[s++]=i>>8&255;a[s++]=i&255}if(u===2){i=K[e.charCodeAt(t)]<<2|K[e.charCodeAt(t+1)]>>4;a[s++]=i&255}else if(u===1){i=K[e.charCodeAt(t)]<<10|K[e.charCodeAt(t+1)]<<4|K[e.charCodeAt(t+2)]>>2;a[s++]=i>>8&255;a[s++]=i&255}return a}function Z(e){return J[e>>18&63]+J[e>>12&63]+J[e>>6&63]+J[e&63]}function X(e,t,r){var n;var i=[];for(var u=t;u<r;u+=3){n=(e[u]<<16)+(e[u+1]<<8)+e[u+2];i.push(Z(n))}return i.join("")}function ee(e){if(!H){W()}var t;var r=e.length;var n=r%3;var i="";var u=[];var a=16383;for(var o=0,s=r-n;o<s;o+=a){u.push(X(e,o,o+a>s?s:o+a))}if(n===1){t=e[r-1];i+=J[t>>2];i+=J[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=J[t>>10];i+=J[t>>4&63];i+=J[t<<2&63];i+="="}u.push(i);return u.join("")}function te(e,t,r,n,f){var i,u;var l=f*8-n-1;var h=(1<<l)-1;var p=h>>1;var a=-7;var o=r?f-1:0;var s=r?-1:1;var c=e[t+o];o+=s;i=c&(1<<-a)-1;c>>=-a;a+=l;for(;a>0;i=i*256+e[t+o],o+=s,a-=8){}u=i&(1<<-a)-1;i>>=-a;a+=n;for(;a>0;u=u*256+e[t+o],o+=s,a-=8){}if(i===0){i=1-p}else if(i===h){return u?NaN:(c?-1:1)*Infinity}else{u=u+Math.pow(2,n);i=i-p}return(c?-1:1)*u*Math.pow(2,i-n)}function re(e,t,f,l,r,h){var n,i,u;var a=h*8-r-1;var o=(1<<a)-1;var s=o>>1;var p=r===23?Math.pow(2,-24)-Math.pow(2,-77):0;var c=l?0:h-1;var _=l?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){i=isNaN(t)?1:0;n=o}else{n=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-n))<1){n--;u*=2}if(n+s>=1){t+=p/u}else{t+=p*Math.pow(2,1-s)}if(t*u>=2){n++;u/=2}if(n+s>=o){i=0;n=o}else if(n+s>=1){i=(t*u-1)*Math.pow(2,r);n=n+s}else{i=t*Math.pow(2,s-1)*Math.pow(2,r);n=0}}for(;r>=8;e[f+c]=i&255,c+=_,i/=256,r-=8){}n=n<<r|i;a+=r;for(;a>0;e[f+c]=n&255,c+=_,n/=256,a-=8){}e[f+c-_]|=d*128}var ne={}.toString;var ie=Array.isArray||function(e){return ne.call(e)=="[object Array]"};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */var ue=50;se.TYPED_ARRAY_SUPPORT=$.TYPED_ARRAY_SUPPORT!==undefined?$.TYPED_ARRAY_SUPPORT:true;ae();function ae(){return se.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function oe(e,t){if(ae()<t){throw new RangeError("Invalid typed array length")}if(se.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=se.prototype}else{if(e===null){e=new se(t)}e.length=t}return e}function se(e,t,r){if(!se.TYPED_ARRAY_SUPPORT&&!(this instanceof se)){return new se(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return he(this,e)}return ce(this,e,t,r)}se.poolSize=8192;se._augment=function(e){e.__proto__=se.prototype;return e};function ce(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return de(e,t,r,n)}if(typeof t==="string"){return pe(e,t,r)}return ve(e,t)}se.from=function(e,t,r){return ce(null,e,t,r)};if(se.TYPED_ARRAY_SUPPORT){se.prototype.__proto__=Uint8Array.prototype;se.__proto__=Uint8Array}function fe(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function le(e,t,r,n){fe(t);if(t<=0){return oe(e,t)}if(r!==undefined){return typeof n==="string"?oe(e,t).fill(r,n):oe(e,t).fill(r)}return oe(e,t)}se.alloc=function(e,t,r){return le(null,e,t,r)};function he(e,t){fe(t);e=oe(e,t<0?0:ye(t)|0);if(!se.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}se.allocUnsafe=function(e){return he(null,e)};se.allocUnsafeSlow=function(e){return he(null,e)};function pe(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!se.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=ge(t,r)|0;e=oe(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function _e(e,t){var r=t.length<0?0:ye(t.length)|0;e=oe(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function de(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(se.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=se.prototype}else{e=_e(e,t)}return e}function ve(e,t){if(me(t)){var r=ye(t.length)|0;e=oe(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||et(t.length)){return oe(e,0)}return _e(e,t)}if(t.type==="Buffer"&&ie(t.data)){return _e(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function ye(e){if(e>=ae()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+ae().toString(16)+" bytes")}return e|0}se.isBuffer=tt;function me(e){return!!(e!=null&&e._isBuffer)}se.compare=function e(t,r){if(!me(t)||!me(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var u=0,a=Math.min(n,i);u<a;++u){if(t[u]!==r[u]){n=t[u];i=r[u];break}}if(n<i)return-1;if(i<n)return 1;return 0};se.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};se.concat=function e(t,r){if(!ie(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return se.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=se.allocUnsafe(r);var u=0;for(n=0;n<t.length;++n){var a=t[n];if(!me(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,u);u+=a.length}return i};function ge(e,t){if(me(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return He(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Ze(e).length;default:if(n)return He(e).length;t=(""+t).toLowerCase();n=true}}}se.byteLength=ge;function be(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return Re(this,t,r);case"utf8":case"utf-8":return Be(this,t,r);case"ascii":return Pe(this,t,r);case"latin1":case"binary":return Ne(this,t,r);case"base64":return Se(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}se.prototype._isBuffer=true;function we(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}se.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){we(this,r,r+1)}return this};se.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){we(this,r,r+3);we(this,r+1,r+2)}return this};se.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){we(this,r,r+7);we(this,r+1,r+6);we(this,r+2,r+5);we(this,r+3,r+4)}return this};se.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return Be(this,0,t);return be.apply(this,arguments)};se.prototype.equals=function e(t){if(!me(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return se.compare(this,t)===0};se.prototype.inspect=function e(){var t="";var r=ue;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};se.prototype.compare=function f(e,t,r,n,i){if(!me(e)){throw new TypeError("Argument must be a Buffer")}if(t===undefined){t=0}if(r===undefined){r=e?e.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(t<0||r>e.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&t>=r){return 0}if(n>=i){return-1}if(t>=r){return 1}t>>>=0;r>>>=0;n>>>=0;i>>>=0;if(this===e)return 0;var u=i-n;var a=r-t;var l=Math.min(u,a);var o=this.slice(n,i);var s=e.slice(t,r);for(var c=0;c<l;++c){if(o[c]!==s[c]){u=o[c];a=s[c];break}}if(u<a)return-1;if(a<u)return 1;return 0};function De(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=se.from(t,n)}if(me(t)){if(t.length===0){return-1}return Ee(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(se.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return Ee(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function Ee(e,t,r,n,f){var i=1;var u=e.length;var a=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;u/=2;a/=2;r/=2}}function o(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var s;if(f){var c=-1;for(s=r;s<u;s++){if(o(e,s)===o(t,c===-1?0:s-c)){if(c===-1)c=s;if(s-c+1===a)return c*i}else{if(c!==-1)s-=s-c;c=-1}}}else{if(r+a>u)r=u-a;for(s=r;s>=0;s--){var l=true;for(var h=0;h<a;h++){if(o(e,s+h)!==o(t,h)){l=false;break}}if(l)return s}}return-1}se.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};se.prototype.indexOf=function e(t,r,n){return De(this,t,r,n,true)};se.prototype.lastIndexOf=function e(t,r,n){return De(this,t,r,n,false)};function Ae(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var u=t.length;if(u%2!==0)throw new TypeError("Invalid hex string");if(n>u/2){n=u/2}for(var a=0;a<n;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function xe(e,t,r,n){return Xe(He(t,e.length-r),e,r,n)}function Fe(e,t,r,n){return Xe(We(t),e,r,n)}function ke(e,t,r,n){return Fe(e,t,r,n)}function Ce(e,t,r,n){return Xe(Ze(t),e,r,n)}function Oe(e,t,r,n){return Xe(Qe(t,e.length-r),e,r,n)}se.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var u=this.length-r;if(n===undefined||n>u)n=u;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return Ae(this,t,r,n);case"utf8":case"utf-8":return xe(this,t,r,n);case"ascii":return Fe(this,t,r,n);case"latin1":case"binary":return ke(this,t,r,n);case"base64":return Ce(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};se.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(e,t,r){if(t===0&&r===e.length){return ee(e)}else{return ee(e.slice(t,r))}}function Be(e,f,t){t=Math.min(e.length,t);var r=[];var n=f;while(n<t){var i=e[n];var u=null;var a=i>239?4:i>223?3:i>191?2:1;if(n+a<=t){var o,s,l,c;switch(a){case 1:if(i<128){u=i}break;case 2:o=e[n+1];if((o&192)===128){c=(i&31)<<6|o&63;if(c>127){u=c}}break;case 3:o=e[n+1];s=e[n+2];if((o&192)===128&&(s&192)===128){c=(i&15)<<12|(o&63)<<6|s&63;if(c>2047&&(c<55296||c>57343)){u=c}}break;case 4:o=e[n+1];s=e[n+2];l=e[n+3];if((o&192)===128&&(s&192)===128&&(l&192)===128){c=(i&15)<<18|(o&63)<<12|(s&63)<<6|l&63;if(c>65535&&c<1114112){u=c}}}}if(u===null){u=65533;a=1}else if(u>65535){u-=65536;r.push(u>>>10&1023|55296);u=56320|u&1023}r.push(u);n+=a}return Ie(r)}var je=4096;function Ie(e){var t=e.length;if(t<=je){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=je))}return r}function Pe(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function Ne(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function Re(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var u=t;u<r;++u){i+=Ge(e[u])}return i}function Te(e,t,r){var n=e.slice(t,r);var i="";for(var u=0;u<n.length;u+=2){i+=String.fromCharCode(n[u]+n[u+1]*256)}return i}se.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(se.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=se.prototype}else{var u=r-t;i=new se(u,undefined);for(var a=0;a<u;++a){i[a]=this[a+t]}}return i};function Le(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}se.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Le(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}return i};se.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){Le(t,r,this.length)}var i=this[t+--r];var u=1;while(r>0&&(u*=256)){i+=this[t+--r]*u}return i};se.prototype.readUInt8=function e(t,r){if(!r)Le(t,1,this.length);return this[t]};se.prototype.readUInt16LE=function e(t,r){if(!r)Le(t,2,this.length);return this[t]|this[t+1]<<8};se.prototype.readUInt16BE=function e(t,r){if(!r)Le(t,2,this.length);return this[t]<<8|this[t+1]};se.prototype.readUInt32LE=function e(t,r){if(!r)Le(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};se.prototype.readUInt32BE=function e(t,r){if(!r)Le(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};se.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Le(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}u*=128;if(i>=u)i-=Math.pow(2,8*r);return i};se.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)Le(t,r,this.length);var i=r;var u=1;var a=this[t+--i];while(i>0&&(u*=256)){a+=this[t+--i]*u}u*=128;if(a>=u)a-=Math.pow(2,8*r);return a};se.prototype.readInt8=function e(t,r){if(!r)Le(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};se.prototype.readInt16LE=function e(t,r){if(!r)Le(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};se.prototype.readInt16BE=function e(t,r){if(!r)Le(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};se.prototype.readInt32LE=function e(t,r){if(!r)Le(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};se.prototype.readInt32BE=function e(t,r){if(!r)Le(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};se.prototype.readFloatLE=function e(t,r){if(!r)Le(t,4,this.length);return te(this,t,true,23,4)};se.prototype.readFloatBE=function e(t,r){if(!r)Le(t,4,this.length);return te(this,t,false,23,4)};se.prototype.readDoubleLE=function e(t,r){if(!r)Le(t,8,this.length);return te(this,t,true,52,8)};se.prototype.readDoubleBE=function e(t,r){if(!r)Le(t,8,this.length);return te(this,t,false,52,8)};function Ue(e,t,r,n,i,u){if(!me(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}se.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Ue(this,t,r,n,u,0)}var a=1;var o=0;this[r]=t&255;while(++o<n&&(a*=256)){this[r+o]=t/a&255}return r+n};se.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Ue(this,t,r,n,u,0)}var a=n-1;var o=1;this[r+a]=t&255;while(--a>=0&&(o*=256)){this[r+a]=t/o&255}return r+n};se.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,1,255,0);if(!se.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function Me(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,u=Math.min(e.length-r,2);i<u;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}se.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,2,65535,0);if(se.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Me(this,t,r,true)}return r+2};se.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,2,65535,0);if(se.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Me(this,t,r,false)}return r+2};function qe(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,u=Math.min(e.length-r,4);i<u;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}se.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,4,4294967295,0);if(se.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{qe(this,t,r,true)}return r+4};se.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,4,4294967295,0);if(se.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{qe(this,t,r,false)}return r+4};se.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Ue(this,t,r,n,u-1,-u)}var a=0;var o=1;var s=0;this[r]=t&255;while(++a<n&&(o*=256)){if(t<0&&s===0&&this[r+a-1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};se.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Ue(this,t,r,n,u-1,-u)}var a=n-1;var o=1;var s=0;this[r+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&s===0&&this[r+a+1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};se.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,1,127,-128);if(!se.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};se.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,2,32767,-32768);if(se.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Me(this,t,r,true)}return r+2};se.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,2,32767,-32768);if(se.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Me(this,t,r,false)}return r+2};se.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,4,2147483647,-2147483648);if(se.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{qe(this,t,r,true)}return r+4};se.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Ue(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(se.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{qe(this,t,r,false)}return r+4};function Ye(e,t,r,n,i,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ve(e,t,r,n,i){if(!i){Ye(e,t,r,4)}re(e,t,r,n,23,4);return r+4}se.prototype.writeFloatLE=function e(t,r,n){return Ve(this,t,r,true,n)};se.prototype.writeFloatBE=function e(t,r,n){return Ve(this,t,r,false,n)};function ze(e,t,r,n,i){if(!i){Ye(e,t,r,8)}re(e,t,r,n,52,8);return r+8}se.prototype.writeDoubleLE=function e(t,r,n){return ze(this,t,r,true,n)};se.prototype.writeDoubleBE=function e(t,r,n){return ze(this,t,r,false,n)};se.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var u=i-n;var a;if(this===t&&n<r&&r<i){for(a=u-1;a>=0;--a){t[a+r]=this[a+n]}}else if(u<1e3||!se.TYPED_ARRAY_SUPPORT){for(a=0;a<u;++a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+u),r)}return u};se.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var u=t.charCodeAt(0);if(u<256){t=u}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!se.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var o=me(t)?t:He(new se(t,i).toString());var s=o.length;for(a=0;a<n-r;++a){this[a+r]=o[a%s]}}return this};var $e=/[^+\/0-9A-Za-z-_]/g;function Je(e){e=Ke(e).replace($e,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Ke(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Ge(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function He(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var u=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)u.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)u.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)u.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)u.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return u}function We(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function Qe(e,t){var r,n,i;var u=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;u.push(i);u.push(n)}return u}function Ze(e){return Q(Je(e))}function Xe(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function et(e){return e!==e}function tt(e){return e!=null&&(!!e._isBuffer||rt(e)||nt(e))}function rt(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function nt(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&rt(e.slice(0,0))}let it;try{it=new TextDecoder}catch(e){}let ut;let at;let v=0;const ot=105;const st=57342;const ct=57343;const ft=57337;const lt=6;const ht={};let pt={};let _t;let dt;let vt=0;let yt=0;let mt;let gt;let bt=[];let wt=[];let Dt;let Et;let At;let xt={useRecords:false,mapsAsObjects:true};let Ft=false;let kt=2;try{new Function("")}catch(e){kt=Infinity}class Ct{constructor(r){if(r){if((r.keyMap||r._keyMap)&&!r.useRecords){r.useRecords=false;r.mapsAsObjects=true}if(r.useRecords===false&&r.mapsAsObjects===undefined)r.mapsAsObjects=true;if(r.getStructures)r.getShared=r.getStructures;if(r.getShared&&!r.structures)(r.structures=[]).uninitialized=true;if(r.keyMap){this.mapKey=new Map;for(let[e,t]of Object.entries(r.keyMap))this.mapKey.set(t,e)}}Object.assign(this,r)}decodeKey(e){return this.keyMap?this.mapKey.get(e)||e:e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(r){if(!this._keyMap)return r;let n=new Map;for(let[e,t]of Object.entries(r))n.set(this._keyMap.hasOwnProperty(e)?this._keyMap[e]:e,t);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let r={};e.forEach((e,t)=>r[It(this._mapKey.has(t)?this._mapKey.get(t):t)]=e);return r}mapDecode(e,t){let r=this.decode(e);if(this._keyMap){switch(r.constructor.name){case"Array":return r.map(e=>this.decodeKeys(e))}}return r}decode(t,e){if(ut){return nr(()=>{ir();return this?this.decode(t,e):Ct.prototype.decode.call(xt,t,e)})}at=e>-1?e:t.length;v=0;yt=0;dt=null;mt=null;ut=t;try{Et=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){ut=null;if(t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Ct){pt=this;Dt=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues);if(this.structures){_t=this.structures;return Ot()}else if(!_t||_t.length>0){_t=[]}}else{pt=xt;if(!_t||_t.length>0)_t=[];Dt=null}return Ot()}decodeMultiple(r,n){let i,u=0;try{let e=r.length;Ft=true;let t=this?this.decode(r,e):or.decode(r,e);if(n){if(n(t)===false){return}while(v<e){u=v;if(n(Ot())===false){return}}}else{i=[t];while(v<e){u=v;i.push(Ot())}return i}}catch(e){e.lastPosition=u;e.values=i;throw e}finally{Ft=false;ir()}}}function Ot(){try{let e=St();if(mt){if(v>=mt.postBundlePosition){let e=new Error("Unexpected bundle position");e.incomplete=true;throw e}v=mt.postBundlePosition;mt=null}if(v==at){_t=null;ut=null;if(gt)gt=null}else if(v>at){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!Ft){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){ir();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function St(){let n=ut[v++];let i=n>>5;n=n&31;if(n>23){switch(n){case 24:n=ut[v++];break;case 25:if(i==7){return Yt()}n=Et.getUint16(v);v+=2;break;case 26:if(i==7){let t=Et.getFloat32(v);if(pt.useFloat32>2){let e=ar[(ut[v]&127)<<1|ut[v+1]>>7];v+=4;return(e*t+(t>0?.5:-.5)>>0)/e}v+=4;return t}n=Et.getUint32(v);v+=4;break;case 27:if(i==7){let e=Et.getFloat64(v);v+=8;return e}if(i>1){if(Et.getUint32(v)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=Et.getUint32(v+4)}else if(pt.int64AsNumber){n=Et.getUint32(v)*4294967296;n+=Et.getUint32(v+4)}else n=Et.getBigUint64(v);v+=8;break;case 31:switch(i){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[];let t,r=0;while((t=St())!=ht){e[r++]=t}return i==4?e:i==3?e.join(""):se.concat(e);case 5:let n;if(pt.mapsAsObjects){let e={};if(pt.keyMap)while((n=St())!=ht)e[It(pt.decodeKey(n))]=St();else while((n=St())!=ht)e[It(n)]=St();return e}else{if(At){pt.mapsAsObjects=true;At=false}let e=new Map;if(pt.keyMap)while((n=St())!=ht)e.set(pt.decodeKey(n),St());else while((n=St())!=ht)e.set(n,St());return e}case 7:return ht;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+n)}}switch(i){case 0:return n;case 1:return~n;case 2:return Ut(n);case 3:if(yt>=v){return dt.slice(v-vt,(v+=n)-vt)}if(yt==0&&at<140&&n<32){let e=n<16?Lt(n):Tt(n);if(e!=null)return e}return Pt(n);case 4:let t=new Array(n);for(let e=0;e<n;e++)t[e]=St();return t;case 5:if(pt.mapsAsObjects){let t={};if(pt.keyMap)for(let e=0;e<n;e++)t[It(pt.decodeKey(St()))]=St();else for(let e=0;e<n;e++)t[It(St())]=St();return t}else{if(At){pt.mapsAsObjects=true;At=false}let t=new Map;if(pt.keyMap)for(let e=0;e<n;e++)t.set(pt.decodeKey(St()),St());else for(let e=0;e<n;e++)t.set(St(),St());return t}case 6:if(n>=ft){let e=_t[n&8191];if(e){if(!e.read)e.read=jt(e);return e.read()}if(n<65536){if(n==ct){let e=tr();let t=St();let r=St();zt(t,r);let n={};if(pt.keyMap)for(let t=2;t<e;t++){let e=pt.decodeKey(r[t-2]);n[It(e)]=St()}else for(let t=2;t<e;t++){let e=r[t-2];n[It(e)]=St()}return n}else if(n==st){let t=tr();let r=St();for(let e=2;e<t;e++){zt(r++,St())}return St()}else if(n==ft){return er()}if(pt.getShared){rr();e=_t[n&8191];if(e){if(!e.read)e.read=jt(e);return e.read()}}}}let e=bt[n];if(e){if(e.handlesRead)return e(St);else return e(St())}else{let r=St();for(let t=0;t<wt.length;t++){let e=wt[t](n,r);if(e!==undefined)return e}return new Vt(r,n)}case 7:switch(n){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:let e=(Dt||Gt())[n];if(e!==undefined)return e;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+n)}}const Bt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function jt(e){function t(){let t=ut[v++];t=t&31;if(t>23){switch(t){case 24:t=ut[v++];break;case 25:t=Et.getUint16(v);v+=2;break;case 26:t=Et.getUint32(v);v+=4;break;default:throw new Error("Expected array header, but got "+ut[v-1])}}let r=this.compiledReader;while(r){if(r.propertyCount===t)return r(St);r=r.next}if(this.slowReads++>=kt){let e=this.length==t?this:this.slice(0,t);r=pt.keyMap?new Function("r","return {"+e.map(e=>pt.decodeKey(e)).map(e=>Bt.test(e)?It(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}"):new Function("r","return {"+e.map(e=>Bt.test(e)?It(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}");if(this.compiledReader)r.next=this.compiledReader;r.propertyCount=t;this.compiledReader=r;return r(St)}let n={};if(pt.keyMap)for(let e=0;e<t;e++)n[It(pt.decodeKey(this[e]))]=St();else for(let e=0;e<t;e++){n[It(this[e])]=St()}return n}e.slowReads=0;return t}function It(e){return e==="__proto__"?"__proto_":e}let Pt=Nt;function Nt(e){let t;if(e<16){if(t=Lt(e))return t}if(e>64&&it)return it.decode(ut.subarray(v,v+=e));const r=v+e;const n=[];t="";while(v<r){const i=ut[v++];if((i&128)===0){n.push(i)}else if((i&224)===192){const u=ut[v++]&63;n.push((i&31)<<6|u)}else if((i&240)===224){const u=ut[v++]&63;const a=ut[v++]&63;n.push((i&31)<<12|u<<6|a)}else if((i&248)===240){const u=ut[v++]&63;const a=ut[v++]&63;const o=ut[v++]&63;let e=(i&7)<<18|u<<12|a<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=Rt.apply(String,n);n.length=0}}if(n.length>0){t+=Rt.apply(String,n)}return t}let Rt=String.fromCharCode;function Tt(t){let r=v;let n=new Array(t);for(let e=0;e<t;e++){const i=ut[v++];if((i&128)>0){v=r;return}n[e]=i}return Rt.apply(String,n)}function Lt(d){if(d<4){if(d<2){if(d===0)return"";else{let e=ut[v++];if((e&128)>1){v-=1;return}return Rt(e)}}else{let e=ut[v++];let t=ut[v++];if((e&128)>0||(t&128)>0){v-=2;return}if(d<3)return Rt(e,t);let r=ut[v++];if((r&128)>0){v-=3;return}return Rt(e,t,r)}}else{let l=ut[v++];let h=ut[v++];let p=ut[v++];let _=ut[v++];if((l&128)>0||(h&128)>0||(p&128)>0||(_&128)>0){v-=4;return}if(d<6){if(d===4)return Rt(l,h,p,_);else{let e=ut[v++];if((e&128)>0){v-=5;return}return Rt(l,h,p,_,e)}}else if(d<8){let e=ut[v++];let t=ut[v++];if((e&128)>0||(t&128)>0){v-=6;return}if(d<7)return Rt(l,h,p,_,e,t);let r=ut[v++];if((r&128)>0){v-=7;return}return Rt(l,h,p,_,e,t,r)}else{let o=ut[v++];let s=ut[v++];let c=ut[v++];let f=ut[v++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){v-=8;return}if(d<10){if(d===8)return Rt(l,h,p,_,o,s,c,f);else{let e=ut[v++];if((e&128)>0){v-=9;return}return Rt(l,h,p,_,o,s,c,f,e)}}else if(d<12){let e=ut[v++];let t=ut[v++];if((e&128)>0||(t&128)>0){v-=10;return}if(d<11)return Rt(l,h,p,_,o,s,c,f,e,t);let r=ut[v++];if((r&128)>0){v-=11;return}return Rt(l,h,p,_,o,s,c,f,e,t,r)}else{let n=ut[v++];let i=ut[v++];let u=ut[v++];let a=ut[v++];if((n&128)>0||(i&128)>0||(u&128)>0||(a&128)>0){v-=12;return}if(d<14){if(d===12)return Rt(l,h,p,_,o,s,c,f,n,i,u,a);else{let e=ut[v++];if((e&128)>0){v-=13;return}return Rt(l,h,p,_,o,s,c,f,n,i,u,a,e)}}else{let e=ut[v++];let t=ut[v++];if((e&128)>0||(t&128)>0){v-=14;return}if(d<15)return Rt(l,h,p,_,o,s,c,f,n,i,u,a,e,t);let r=ut[v++];if((r&128)>0){v-=15;return}return Rt(l,h,p,_,o,s,c,f,n,i,u,a,e,t,r)}}}}}function Ut(e){return pt.copyBuffers?Uint8Array.prototype.slice.call(ut,v,v+=e):ut.subarray(v,v+=e)}let Mt=new Float32Array(1);let qt=new Uint8Array(Mt.buffer,0,4);function Yt(){let t=ut[v++];let r=ut[v++];let e=(t&127)>>2;if(e===31){if(r||t&3)return NaN;return t&128?-Infinity:Infinity}if(e===0){let e=((t&3)<<8|r)/(1<<24);return t&128?-e:e}qt[3]=t&128|(e>>1)+56;qt[2]=(t&7)<<5|r>>3;qt[1]=r<<5;qt[0]=0;return Mt[0]}new Array(4096);class Vt{constructor(e,t){this.value=e;this.tag=t}}bt[0]=e=>{return new Date(e)};bt[1]=e=>{return new Date(Math.round(e*1e3))};bt[2]=r=>{let n=BigInt(0);for(let e=0,t=r.byteLength;e<t;e++){n=BigInt(r[e])+n<<BigInt(8)}return n};bt[3]=e=>{return BigInt(-1)-bt[2](e)};bt[4]=e=>{return+(e[1]+"e"+e[0])};bt[5]=e=>{return e[1]*Math.exp(e[0]*Math.log(2))};const zt=(e,t)=>{e=e-57344;let r=_t[e];if(r&&r.isShared){(_t.restoreStructures||(_t.restoreStructures=[]))[e]=r}_t[e]=t;t.read=jt(t)};bt[ot]=r=>{let e=r.length;let n=r[1];zt(r[0],n);let i={};for(let t=2;t<e;t++){let e=n[t-2];i[It(e)]=r[t]}return i};bt[14]=e=>{if(mt)return mt[0].slice(mt.position0,mt.position0+=e);return new Vt(e,14)};bt[15]=e=>{if(mt)return mt[1].slice(mt.position1,mt.position1+=e);return new Vt(e,15)};let $t={Error:Error,RegExp:RegExp};bt[27]=e=>{return($t[e[0]]||Error)(e[1],e[2])};const Jt=e=>{if(ut[v++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let t=e();Dt=Dt?t.concat(Dt.slice(t.length)):t;Dt.prefixes=e();Dt.suffixes=e();return e()};Jt.handlesRead=true;bt[51]=Jt;bt[lt]=e=>{if(!Dt){if(pt.getShared)rr();else return new Vt(e,lt)}if(typeof e=="number")return Dt[16+(e>=0?2*e:-2*e-1)];throw new Error("No support for non-integer packed references yet")};bt[28]=e=>{if(!gt){gt=new Map;gt.id=0}let t=gt.id++;let r=ut[v];let n;if(r>>5==4)n=[];else n={};let i={target:n};gt.set(t,i);let u=e();if(i.used)return Object.assign(n,u);i.target=u;return u};bt[28].handlesRead=true;bt[29]=e=>{let t=gt.get(e);t.used=true;return t.target};bt[258]=e=>new Set(e);(bt[259]=e=>{if(pt.mapsAsObjects){pt.mapsAsObjects=false;At=true}return e()}).handlesRead=true;function Kt(e,t){if(typeof e==="string")return e+t;if(e instanceof Array)return e.concat(t);return Object.assign({},e,t)}function Gt(){if(!Dt){if(pt.getShared)rr();else throw new Error("No packed values available")}return Dt}const Ht=1399353956;wt.push((e,t)=>{if(e>=225&&e<=255)return Kt(Gt().prefixes[e-224],t);if(e>=28704&&e<=32767)return Kt(Gt().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return Kt(Gt().prefixes[e-1879048192],t);if(e>=216&&e<=223)return Kt(t,Gt().suffixes[e-216]);if(e>=27647&&e<=28671)return Kt(t,Gt().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return Kt(t,Gt().suffixes[e-1811939328]);if(e==Ht){return{packedValues:Dt,structures:_t.slice(0),version:t}}if(e==55799)return t});const Wt=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;const Qt=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array];const Zt=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<Qt.length;e++){Xt(Qt[e],Zt[e])}function Xt(o,s){let c="get"+o.name.slice(0,-5);let e;if(typeof o==="function")e=o.BYTES_PER_ELEMENT;else o=null;for(let a=0;a<2;a++){if(!a&&e==1)continue;let u=e==2?1:e==4?2:3;bt[a?s:s-4]=e==1||a==Wt?e=>{if(!o)throw new Error("Could not find typed array for code "+s);return new o(Uint8Array.prototype.slice.call(e,0).buffer)}:e=>{if(!o)throw new Error("Could not find typed array for code "+s);let t=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=e.length>>u;let n=new o(r);let i=t[c];for(let e=0;e<r;e++){n[e]=i.call(t,e<<u,a)}return n}}}function er(){let t=tr();let e=v+St();for(let e=2;e<t;e++){let e=tr();v+=e}let r=v;v=e;mt=[Nt(tr()),Nt(tr())];mt.position0=0;mt.position1=0;mt.postBundlePosition=v;v=r;return St()}function tr(){let e=ut[v++]&31;if(e>23){switch(e){case 24:e=ut[v++];break;case 25:e=Et.getUint16(v);v+=2;break;case 26:e=Et.getUint32(v);v+=4;break}}return e}function rr(){if(pt.getShared){let e=nr(()=>{ut=null;return pt.getShared()})||{};let t=e.structures||[];pt.sharedVersion=e.version;Dt=pt.sharedValues=e.packedValues;if(_t===true)pt.structures=_t=t;else _t.splice.apply(_t,[0,t.length].concat(t))}}function nr(e){let t=at;let r=v;let n=vt;let i=yt;let u=dt;let a=gt;let o=mt;let s=new Uint8Array(ut.slice(0,at));let c=_t;let f=pt;let l=Ft;let h=e();at=t;v=r;vt=n;yt=i;dt=u;gt=a;mt=o;ut=s;Ft=l;_t=c;pt=f;Et=new DataView(ut.buffer,ut.byteOffset,ut.byteLength);return h}function ir(){ut=null;gt=null;_t=null}function ur(e){bt[e.tag]=e.decode}const ar=new Array(147);for(let e=0;e<256;e++){ar[e]=+("1e"+Math.floor(45.15-e*.30103))}let or=new Ct({useRecords:false});or.decode;or.decodeMultiple;let sr;try{sr=new TextEncoder}catch(e){}let cr,fr;const lr=typeof globalThis==="object"&&globalThis.Buffer;const hr=typeof lr!=="undefined";const pr=hr?lr.allocUnsafeSlow:Uint8Array;const _r=hr?lr:Uint8Array;const dr=256;const vr=hr?4294967296:2144337920;let yr;let O;let mr;let S=0;let gr;let br=null;const wr=61440;const Dr=/[\u0080-\uFFFF]/;const Er=Symbol("record-id");class Ar extends Ct{constructor(r){super(r);this.offset=0;let s;let a;let _;let f;let n;r=r||{};let c=_r.prototype.utf8Write?function(e,t,r){return O.utf8Write(e,t,r)}:sr&&sr.encodeInto?function(e,t){return sr.encodeInto(e,O.subarray(t)).written}:false;let u=this;let e=r.structures||r.saveStructures;let l=r.maxSharedStructures;if(l==null)l=e?128:0;if(l>8190)throw new Error("Maximum maxSharedStructure is 8190");let o=r.sequential;if(o){l=0}if(!this.structures)this.structures=[];if(this.saveStructures)this.saveShared=this.saveStructures;let d,v,y=r.sharedValues;let i;if(y){i=Object.create(null);for(let e=0,t=y.length;e<t;e++){i[y[e]]=e}}let h=[];let m=0;let g=0;this.mapEncode=function(e,t){if(this._keyMap&&!this._mapped){switch(e.constructor.name){case"Array":e=e.map(e=>this.encodeKeys(e));break}}return this.encode(e,t)};this.encode=function(t,e){if(!O){O=new pr(8192);mr=new DataView(O.buffer,0,8192);S=0}gr=O.length-10;if(gr-S<2048){O=new pr(O.length);mr=new DataView(O.buffer,0,O.length);gr=O.length-10;S=0}else if(e===Lr)S=S+7&2147483640;s=S;if(u.useSelfDescribedHeader){mr.setUint32(S,3654940416);S+=3}n=u.structuredClone?new Map:null;if(u.bundleStrings&&typeof t!=="string"){br=[];br.size=Infinity}else br=null;a=u.structures;if(a){if(a.uninitialized){let e=u.getShared()||{};u.structures=a=e.structures||[];u.sharedVersion=e.version;let r=u.sharedValues=e.packedValues;if(r){i={};for(let e=0,t=r.length;e<t;e++)i[r[e]]=e}}let e=a.length;if(e>l&&!o)e=l;if(!a.transitions){a.transitions=Object.create(null);for(let u=0;u<e;u++){let r=a[u];if(!r)continue;let n,i=a.transitions;for(let t=0,e=r.length;t<e;t++){if(i[Er]===undefined)i[Er]=u;let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[Er]=u|1048576}}if(!o)a.nextId=e}if(_)_=false;f=a||[];v=i;if(r.pack){let e=new Map;e.values=[];e.encoder=u;e.maxValues=r.maxPrivatePackedValues||(i?16:Infinity);e.objectMap=i||false;e.samplingPackedValues=d;Sr(t,e);if(e.values.length>0){O[S++]=216;O[S++]=51;kr(4);let r=e.values;p(r);kr(0);kr(0);v=Object.create(i||null);for(let e=0,t=r.length;e<t;e++){v[r[e]]=e}}}yr=e&Mr;try{if(yr)return;p(t);if(br){Nr(s,p)}u.offset=S;if(n&&n.idsToInsert){S+=n.idsToInsert.length*2;if(S>gr)w(S);u.offset=S;let e=Pr(O.subarray(s,S),n.idsToInsert);n=null;return e}if(e&Lr){O.start=s;O.end=S;return O}return O.subarray(s,S)}finally{if(a){if(g<10)g++;if(a.length>l)a.length=l;if(m>1e4){a.transitions=null;g=0;m=0;if(h.length>0)h=[]}else if(h.length>0&&!o){for(let e=0,t=h.length;e<t;e++){h[e][Er]=undefined}h=[]}}if(_&&u.saveShared){if(u.structures.length>l){u.structures=u.structures.slice(0,l)}let e=O.subarray(s,S);if(u.updateSharedData()===false)return u.encode(t);return e}if(e&Ur)S=s}};this.findCommonStringsToPack=()=>{d=new Map;if(!i)i=Object.create(null);return e=>{let r=e&&e.threshold||4;let n=this.pack?e.maxPrivatePackedValues||16:0;if(!y)y=this.sharedValues=[];for(let[e,t]of d){if(t.count>r){i[e]=n++;y.push(e);_=true}}while(this.saveShared&&this.updateSharedData()===false){}d=null}};const p=a=>{if(S>gr)O=w(S);var e=typeof a;var o;if(e==="string"){if(v){let e=v[a];if(e>=0){if(e<16)O[S++]=e+224;else{O[S++]=198;if(e&1)p(15-e>>1);else p(e-16>>1)}return}else if(d&&!r.pack){let e=d.get(a);if(e)e.count++;else d.set(a,{count:1})}}let i=a.length;if(br&&i>=4&&i<1024){if((br.size+=i)>wr){let e;let t=(br[0]?br[0].length*3+br[1].length:0)+10;if(S+t>gr)O=w(S+t);O[S++]=217;O[S++]=223;O[S++]=249;O[S++]=br.position?132:130;O[S++]=26;e=S-s;S+=4;if(br.position){Nr(s,p)}br=["",""];br.size=0;br.position=e}let e=Dr.test(a);br[e?0:1]+=a;O[S++]=e?206:207;p(i);return}let u;if(i<32){u=1}else if(i<256){u=2}else if(i<65536){u=3}else{u=5}let e=i*3;if(S+e>gr)O=w(S+e);if(i<64||!c){let e,t,r,n=S+u;for(e=0;e<i;e++){t=a.charCodeAt(e);if(t<128){O[n++]=t}else if(t<2048){O[n++]=t>>6|192;O[n++]=t&63|128}else if((t&64512)===55296&&((r=a.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;O[n++]=t>>18|240;O[n++]=t>>12&63|128;O[n++]=t>>6&63|128;O[n++]=t&63|128}else{O[n++]=t>>12|224;O[n++]=t>>6&63|128;O[n++]=t&63|128}}o=n-S-u}else{o=c(a,S+u,e)}if(o<24){O[S++]=96|o}else if(o<256){if(u<2){O.copyWithin(S+2,S+1,S+1+o)}O[S++]=120;O[S++]=o}else if(o<65536){if(u<3){O.copyWithin(S+3,S+2,S+2+o)}O[S++]=121;O[S++]=o>>8;O[S++]=o&255}else{if(u<5){O.copyWithin(S+5,S+3,S+3+o)}O[S++]=122;mr.setUint32(S,o);S+=4}S+=o}else if(e==="number"){if(!this.alwaysUseFloat&&a>>>0===a){if(a<24){O[S++]=a}else if(a<256){O[S++]=24;O[S++]=a}else if(a<65536){O[S++]=25;O[S++]=a>>8;O[S++]=a&255}else{O[S++]=26;mr.setUint32(S,a);S+=4}}else if(!this.alwaysUseFloat&&a>>0===a){if(a>=-24){O[S++]=31-a}else if(a>=-256){O[S++]=56;O[S++]=~a}else if(a>=-65536){O[S++]=57;mr.setUint16(S,~a);S+=2}else{O[S++]=58;mr.setUint32(S,~a);S+=4}}else{let t;if((t=this.useFloat32)>0&&a<4294967296&&a>=-2147483648){O[S++]=250;mr.setFloat32(S,a);let e;if(t<4||(e=a*ar[(O[S]&127)<<1|O[S+1]>>7])>>0===e){S+=4;return}else S--}O[S++]=251;mr.setFloat64(S,a);S+=8}}else if(e==="object"){if(!a)O[S++]=246;else{if(n){let t=n.get(a);if(t){O[S++]=216;O[S++]=29;O[S++]=25;if(!t.references){let e=n.idsToInsert||(n.idsToInsert=[]);t.references=[];e.push(t)}t.references.push(S-s);S+=2;return}else n.set(a,{offset:S-s})}let e=a.constructor;if(e===Object){b(a,true)}else if(e===Array){o=a.length;if(o<24){O[S++]=128|o}else{kr(o)}for(let e=0;e<o;e++){p(a[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){O[S++]=217;O[S++]=1;O[S++]=3}o=a.size;if(o<24){O[S++]=160|o}else if(o<256){O[S++]=184;O[S++]=o}else if(o<65536){O[S++]=185;O[S++]=o>>8;O[S++]=o&255}else{O[S++]=186;mr.setUint32(S,o);S+=4}if(u.keyMap){for(let[e,t]of a){p(u.encodeKey(e));p(t)}}else{for(let[e,t]of a){p(e);p(t)}}}else{for(let r=0,e=cr.length;r<e;r++){let e=fr[r];if(a instanceof e){let e=cr[r];let t=e.tag;if(t==undefined)t=e.getTag&&e.getTag.call(this,a);if(t<24){O[S++]=192|t}else if(t<256){O[S++]=216;O[S++]=t}else if(t<65536){O[S++]=217;O[S++]=t>>8;O[S++]=t&255}else if(t>-1){O[S++]=218;mr.setUint32(S,t);S+=4}e.encode.call(this,a,p,w);return}}if(a[Symbol.iterator]){if(yr){let e=new Error("Iterable should be serialized as iterator");e.iteratorNotHandled=true;throw e}O[S++]=159;for(let e of a){p(e)}O[S++]=255;return}if(a[Symbol.asyncIterator]||Or(a)){let e=new Error("Iterable/blob should be serialized as iterator");e.iteratorNotHandled=true;throw e}if(this.useToJSON&&a.toJSON){const t=a.toJSON();if(t!==a)return p(t)}b(a,!a.hasOwnProperty)}}}else if(e==="boolean"){O[S++]=a?245:244}else if(e==="bigint"){if(a<BigInt(1)<<BigInt(64)&&a>=0){O[S++]=27;mr.setBigUint64(S,a)}else if(a>-(BigInt(1)<<BigInt(64))&&a<0){O[S++]=59;mr.setBigUint64(S,-a-BigInt(1))}else{if(this.largeBigIntToFloat){O[S++]=251;mr.setFloat64(S,Number(a))}else{throw new RangeError(a+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}S+=8}else if(e==="undefined"){O[S++]=247}else{throw new Error("Unknown type: "+e)}};const b=this.useRecords===false?this.variableMapSize?e=>{let t=Object.keys(e);let r=Object.values(e);let n=t.length;if(n<24){O[S++]=160|n}else if(n<256){O[S++]=184;O[S++]=n}else if(n<65536){O[S++]=185;O[S++]=n>>8;O[S++]=n&255}else{O[S++]=186;mr.setUint32(S,n);S+=4}if(u.keyMap){for(let e=0;e<n;e++){p(u.encodeKey(t[e]));p(r[e])}}else{for(let e=0;e<n;e++){p(t[e]);p(r[e])}}}:(t,r)=>{O[S++]=185;let e=S-s;S+=2;let n=0;if(u.keyMap){for(let e in t)if(r||t.hasOwnProperty(e)){p(u.encodeKey(e));p(t[e]);n++}}else{for(let e in t)if(r||t.hasOwnProperty(e)){p(e);p(t[e]);n++}}O[e+++s]=n>>8;O[e+s]=n&255}:(t,r)=>{let n,i=f.transitions||(f.transitions=Object.create(null));let u=0;let a=0;let o;let s;if(this.keyMap){s=Object.keys(t).map(e=>this.encodeKey(e));a=s.length;for(let t=0;t<a;t++){let e=s[t];n=i[e];if(!n){n=i[e]=Object.create(null);u++}i=n}}else{for(let e in t)if(r||t.hasOwnProperty(e)){n=i[e];if(!n){if(i[Er]&1048576){o=i[Er]&65535}n=i[e]=Object.create(null);u++}i=n;a++}}let c=i[Er];if(c!==undefined){c&=65535;O[S++]=217;O[S++]=c>>8|224;O[S++]=c&255}else{if(!s)s=i.__keys__||(i.__keys__=Object.keys(t));if(o===undefined){c=f.nextId++;if(!c){c=0;f.nextId=1}if(c>=dr){f.nextId=(c=l)+1}}else{c=o}f[c]=s;if(c<l){O[S++]=217;O[S++]=c>>8|224;O[S++]=c&255;i=f.transitions;for(let e=0;e<a;e++){if(i[Er]===undefined||i[Er]&1048576)i[Er]=c;i=i[s[e]]}i[Er]=c|1048576;_=true}else{i[Er]=c;mr.setUint32(S,3655335680);S+=3;if(u)m+=g*u;if(h.length>=dr-l)h.shift()[Er]=undefined;h.push(i);kr(a+2);p(57344+c);p(s);if(r===null)return;for(let e in t)if(r||t.hasOwnProperty(e))p(t[e]);return}}if(a<24){O[S++]=128|a}else{kr(a)}if(r===null)return;for(let e in t)if(r||t.hasOwnProperty(e))p(t[e])};const w=e=>{let t;if(e>16777216){if(e-s>vr)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(vr,Math.round(Math.max((e-s)*(e>67108864?1.25:2),4194304)/4096)*4096)}else t=(Math.max(e-s<<2,O.length-1)>>12)+1<<12;let r=new pr(t);mr=new DataView(r.buffer,0,t);if(O.copy)O.copy(r,0,s,e);else r.set(O.slice(s,e));S-=s;s=0;gr=r.length-10;return O=r};let D=100;let E=1e3;this.encodeAsIterable=function(e,t){return k(e,t,A)};this.encodeAsAsyncIterable=function(e,t){return k(e,t,C)};function*A(n,i,e){let t=n.constructor;if(t===Object){let r=u.useRecords!==false;if(r)b(n,null);else xr(Object.keys(n).length,160);for(let t in n){let e=n[t];if(!r)p(t);if(e&&typeof e==="object"){if(i[t])yield*A(e,i[t]);else yield*x(e,i,t)}else p(e)}}else if(t===Array){let e=n.length;kr(e);for(let t=0;t<e;t++){let e=n[t];if(e&&(typeof e==="object"||S-s>D)){if(i.element)yield*A(e,i.element);else yield*x(e,i,"element")}else p(e)}}else if(n[Symbol.iterator]){O[S++]=159;for(let e of n){if(e&&(typeof e==="object"||S-s>D)){if(i.element)yield*A(e,i.element);else yield*x(e,i,"element")}else p(e)}O[S++]=255}else if(Or(n)){xr(n.size,64);yield O.subarray(s,S);yield n;F()}else if(n[Symbol.asyncIterator]){O[S++]=159;yield O.subarray(s,S);yield n;F();O[S++]=255}else{p(n)}if(e&&S>s)yield O.subarray(s,S);else if(S-s>D){yield O.subarray(s,S);F()}}function*x(t,r,n){let i=S-s;try{p(t);if(S-s>D){yield O.subarray(s,S);F()}}catch(e){if(e.iteratorNotHandled){r[n]={};S=s+i;yield*A.call(this,t,r[n])}else throw e}}function F(){D=E;u.encode(null,Mr)}function k(e,t,r){if(t&&t.chunkThreshold)D=E=t.chunkThreshold;else D=100;if(e&&typeof e==="object"){u.encode(null,Mr);return r(e,u.iterateProperties||(u.iterateProperties={}),true)}return[u.encode(e)]}async function*C(e,t){for(let r of A(e,t,true)){let e=r.constructor;if(e===_r||e===Uint8Array)yield r;else if(Or(r)){let e=r.stream().getReader();let t;while(!(t=await e.read()).done){yield t.value}}else if(r[Symbol.asyncIterator]){for await(let e of r){F();if(e)yield*C(e,t.async||(t.async={}));else yield u.encode(e)}}else{yield r}}}}useBuffer(e){O=e;mr=new DataView(O.buffer,O.byteOffset,O.byteLength);S=0}clearSharedData(){if(this.structures)this.structures=[];if(this.sharedValues)this.sharedValues=undefined}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0);let r=new Fr(e,this.sharedValues,this.sharedVersion);let n=this.saveShared(r,e=>(e&&e.version||0)==t);if(n===false){r=this.getShared()||{};this.structures=r.structures||[];this.sharedValues=r.packedValues;this.sharedVersion=r.version;this.structures.nextId=this.structures.length}else{e.forEach((e,t)=>this.structures[t]=e)}return n}}function xr(e,t){if(e<24)O[S++]=t|e;else if(e<256){O[S++]=t|24;O[S++]=e}else if(e<65536){O[S++]=t|25;O[S++]=e>>8;O[S++]=e&255}else{O[S++]=t|26;mr.setUint32(S,e);S+=4}}class Fr{constructor(e,t,r){this.structures=e;this.packedValues=t;this.version=r}}function kr(e){if(e<24)O[S++]=128|e;else if(e<256){O[S++]=152;O[S++]=e}else if(e<65536){O[S++]=153;O[S++]=e>>8;O[S++]=e&255}else{O[S++]=154;mr.setUint32(S,e);S+=4}}const Cr=typeof Blob==="undefined"?function(){}:Blob;function Or(e){if(e instanceof Cr)return true;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function Sr(r,n){switch(typeof r){case"string":if(r.length>3){if(n.objectMap[r]>-1||n.values.length>=n.maxValues)return;let e=n.get(r);if(e){if(++e.count==2){n.values.push(r)}}else{n.set(r,{count:1});if(n.samplingPackedValues){let e=n.samplingPackedValues.get(r);if(e)e.count++;else n.samplingPackedValues.set(r,{count:1})}}}break;case"object":if(r){if(r instanceof Array){for(let e=0,t=r.length;e<t;e++){Sr(r[e],n)}}else{let e=!n.encoder.useRecords;for(var t in r){if(r.hasOwnProperty(t)){if(e)Sr(t,n);Sr(r[t],n)}}}}break;case"function":console.log(r)}}const Br=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;fr=[Date,Set,Error,RegExp,Vt,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?function(){}:BigInt64Array,Float32Array,Float64Array,Fr];cr=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){O[S++]=26;mr.setUint32(S,r);S+=4}else{O[S++]=251;mr.setFloat64(S,r);S+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,r){Ir(e,r)}},{getTag(e){if(e.constructor===Uint8Array){if(this.tagUint8Array||hr&&this.tagUint8Array!==false)return 64}},encode(e,t,r){Ir(e,r)}},jr(68,1),jr(69,2),jr(70,4),jr(71,8),jr(72,1),jr(77,2),jr(78,4),jr(79,8),jr(85,4),jr(86,8),{encode(t,n){let e=t.packedValues||[];let r=t.structures||[];if(e.values.length>0){O[S++]=216;O[S++]=51;kr(4);let r=e.values;n(r);kr(0);kr(0);packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let e=0,t=r.length;e<t;e++){packedObjectMap[r[e]]=e}}if(r){mr.setUint32(S,3655335424);S+=3;let e=r.slice(0);e.unshift(57344);e.push(new Vt(t.version,1399353956));n(e)}else n(new Vt(t.version,1399353956))}}];function jr(e,t){if(!Br&&t>1)e-=4;return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let u=t.buffer||t;r(hr?lr.from(u,i,n):new Uint8Array(u,i,n))}}}function Ir(e,t){let r=e.byteLength;if(r<24){O[S++]=64+r}else if(r<256){O[S++]=88;O[S++]=r}else if(r<65536){O[S++]=89;O[S++]=r>>8;O[S++]=r&255}else{O[S++]=90;mr.setUint32(S,r);S+=4}if(S+r>=O.length){t(S+r)}O.set(e.buffer?e:new Uint8Array(e),S);S+=r}function Pr(n,e){let r;let i=e.length*2;let u=n.length-i;e.sort((e,t)=>e.offset>t.offset?1:-1);for(let r=0;r<e.length;r++){let t=e[r];t.id=r;for(let e of t.references){n[e++]=r>>8;n[e]=r&255}}while(r=e.pop()){let e=r.offset;n.copyWithin(e+i,e,u);i-=2;let t=e+i;n[t++]=216;n[t++]=28;u=e}return n}function Nr(e,t){mr.setUint32(br.position+e,S-br.position-e+1);let r=br;br=null;t(r[0]);t(r[1])}function Rr(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");fr.unshift(e.Class);cr.unshift(e)}ur(e)}let Tr=new Ar({useRecords:false});Tr.encode;Tr.encodeAsIterable;Tr.encodeAsAsyncIterable;const Lr=512;const Ur=1024;const Mr=2048;var qr={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */Object.defineProperty(qr,"__esModule",{value:true});const Yr=8,Vr=6,zr=3,$r=(1<<Vr)+(zr-1),Jr=(1<<16-Vr)-1,Kr=256;function Gr(e,t){var r=0,n=0,i=0,u=0,f=0,a=1<<Yr-1,o=0,s=0,l=0,h=new Int32Array(Kr),c=0;for(c=0;c<Kr;c++){h[c]=-858993460}r=e.length;while(n<r){if((a<<=1)==1<<Yr){a=1;f=i;t[i++]=0}if(n>r-$r){t[i++]=e[n++];continue}l=(e[n]+13^e[n+1]-13^e[n+2])&Kr-1;s=n-h[l]&Jr;h[l]=n;u=n-s;if(u>=0&&u!=n&&e[n]==e[u]&&e[n+1]==e[u+1]&&e[n+2]==e[u+2]){t[f]|=a;for(o=zr;o<$r;o++)if(e[n+o]!=e[u+o])break;t[i++]=o-zr<<Yr-Vr|s>>Yr;t[i++]=s;n+=o}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function Hr(e,t,r){t=t|0;var n=0,i=0,u=0,a=0,o=1<<(Yr-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<Yr){o=1;a=e[n];n=n+1|0}if(a&o){s=(e[n]>>(Yr-Vr|0))+zr|0;c=(e[n]<<Yr|e[n+1|0])&Jr;n=n+2|0;u=i-c|0;{while(s>4){r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;s=s-4|0}while(s>0){r[i]=r[u];i=i+1|0;u=u+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function Wr(){const e=new TextEncoder("utf-8");return e.encode(Qr)}const Qr="@lzjb";const Zr=Wr();function Xr(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function en(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function tn(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function rn(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=Gr(e,r);const i=en(e.length);const u=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){u.unshift(Zr)}return Xr(...u)}function nn(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,Zr.length));if(s!==Qr){throw new Error("Invalid magic value")}}const r=e?Zr.length:0;const n=t[r];const i=r+1;const u=r+n+1;const a=tn(t.slice(i,u));t=t.slice(u);const o=new Uint8Array(a);Hr(t,t.length,o);return o}var un=qr.pack=rn;var an=qr.unpack=nn;function on(s,c){return c=c||{},new Promise(function(e,t){var r=new XMLHttpRequest,n=[],i=[],u={},a=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:a,headers:{keys:function(){return n},entries:function(){return i},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var o in r.open(c.method||"get",s,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){n.push(t=t.toLowerCase()),i.push([t,r]),u[t]=u[t]?u[t]+","+r:r}),e(a())},r.onerror=t,r.withCredentials="include"==c.credentials,c.headers)r.setRequestHeader(o,c.headers[o]);r.send(c.body||null)})}
/**@license
   *   __ __                          __
   *  / / \ \       _    _  ___  ___  \ \
   * | |   \ \     | |  | || . \/ __>  | |
   * | |    > \    | |_ | ||  _/\__ \  | |
   * | |   / ^ \   |___||_||_|  <___/  | |
   *  \_\ /_/ \_\                     /_/
   *
   * <https://lips.js.org>
   *
   * LIPS is Pretty Simple - Scheme based powerful LISP in JavaScript
   *
   * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
   * Released under the MIT license
   *
   * Includes:
   *
   * ucs2decode function from Punycode v 2.1.1 by Mathias Bynens MIT License
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * contentloaded.js
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   *
   * The rationalize algorithm is by Per M.A. Bothner, Alan Bawden and Marc Feeley.
   * source: Kawa, C-Gambit
   *
   * Build time: Tue, 14 Nov 2023 19:09:39 +0000
   */var sn=["token"],cn=["stderr","stdin","stdout","command_line"];function fn(i){var u=ln();return function e(){var t=c(i),r;if(u){var n=c(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return a(this,r)}}function ln(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function hn(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=pn(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function pn(e,t){if(!e)return;if(typeof e==="string")return _n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _n(e,t)}function _n(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function dn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dn(Object(r),!0).forEach(function(e){Y(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yn(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new mn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function mn(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return mn=function e(t){this.s=t,this.n=t.next},mn.prototype={s:null,n:null,next:function e(){return n(this.n.apply(this.s,arguments))},return:function e(t){var r=this.s["return"];return void 0===r?Promise.resolve({value:t,done:!0}):n(r.apply(this.s,arguments))},throw:function e(t){var r=this.s["return"];return void 0===r?Promise.reject(t):n(r.apply(this.s,arguments))}},new mn(e)}var gn=typeof global!=="undefined"?global:self;if(!gn.fetch){gn.fetch=on}var bn={pair:M,symbol:L,number:C,array:Array,nil:mu,character:za,values:jo,"input-port":ho,"output-port":po,regex:RegExp,syntax:Ku,eof:ko,macro:Vu,string:$a,"native-symbol":Symbol};var wn=new Map([[NaN,"NaN"],[null,"null"]]);var Dn,En,An;var xn=gn.BN;function Fn(r,n){var i=false,e=true,u=r.document,a=u.documentElement,t=u.addEventListener,o=t?"addEventListener":"attachEvent",f=t?"removeEventListener":"detachEvent",s=t?"":"on",c=function e(t){if(t.type=="readystatechange"&&u.readyState!="complete")return;(t.type=="load"?r:u)[f](s+t.type,e,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function t(){try{a.doScroll("left")}catch(e){setTimeout(t,50);return}c("poll")};if(u.readyState=="complete")n.call(r,"lazy");else{if(!t&&a.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}u[o](s+"DOMContentLoaded",c,false);u[o](s+"readystatechange",c,false);r[o](s+"load",c,false)}}function kn(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments[1]===true;function t(e){if(!Cn()){return}var t=qo.get("repr")(e);if(r===null||r instanceof RegExp&&r.test(t)){console.log(qo.get("type")(e)+": "+t)}if(n){console.log(e)}}if(ra(e)){e.then(t)}else{t(e)}return e}function Cn(){return Yo&&Yo.get("DEBUG",{throwError:false})}function On(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Sn(e,t){return"".concat(On(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Bn(e,t){return"".concat(On(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function jn(e,t){return"".concat(On(e),"[+-]?").concat(t,"+")}var In=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var Pn="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var Nn="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(Pn,"|[+-]?[0-9]+))?(?:").concat(Pn,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var Rn=new RegExp("^(#[ie])?".concat(Pn,"$"),"i");function Tn(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var Ln=function(){var u={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=j(e,3),r=t[0],n=t[1],i=t[2];u[r]=Tn(n,i)});return u}();var Un={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function Mn(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var u=e.charCodeAt(r++);if((u&64512)===56320){t.push(((i&1023)<<10)+(u&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var qn=Object.keys(Un).join("|");var Yn="#\\\\(?:x[0-9a-f]+|".concat(qn,"|[\\s\\S])");var Vn=new RegExp("^".concat(Yn,"$"),"i");function zn(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=j(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===Bn){t=Nn+"|"+t}return t}function $n(e){return new RegExp("^(?:"+zn(e)+")$","i")}var Jn=$n(Bn);var Kn=$n(Sn);var Gn=$n(jn);var Hn=new RegExp("^(?:"+jn("","[0-9a-f]")+")$","i");var Wn=new RegExp("^(?:"+Sn("","[0-9a-f]")+")$","i");var Qn=new RegExp("^(?:"+Bn("","[0-9a-f]")+")$","i");var Zn=Tn("","[0-9a-fA-F]");var Xn=/((?:#[xodbie]){0,2})(.*)/i;function ei(e){var t=e.match(Xn);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function ti(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=ei(e);var n=r.number.split("/");var i=fo({num:C([n[0],r.radix||t]),denom:C([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function ri(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=ei(e);if(r.inexact){return uo(parseInt(r.number,r.radix||t))}return C([r.number,r.radix||t])}function ni(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\(.+)$/);if(t){r=t[1]}}if(r){return za(r)}throw new Error("Parse: invalid character")}function ii(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=C(1)}else if(e==="-"){t=C(-1)}else if(e.match(Hn)){t=C([e,i])}else if(e.match(Wn)){var r=e.split("/");t=fo({num:C([r[0],i]),denom:C([r[1],i])})}else if(e.match(Rn)){var n=oi(e);if(u.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return C(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return C(Number.NEGATIVE_INFINITY)}return C(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(u.inexact){return uo(t.valueOf())}return t}var u=ei(e);i=u.radix||i;var r;var n=u.number.match(Zn);if(i!==10&&n){r=n}else{r=u.number.match(Ln[i])}var a,o;o=t(r[2]);if(r[1]){a=t(r[1])}else{a=C(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return a}return io({im:o,re:a})}function ui(e){return parseInt(e.toString(),10)===e}function ai(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var u=t[3]&&t[3].length;if(i<Math.abs(r)){n=C([t[1].replace(/\./,""),10]);if(u){r-=u}}}return{exponent:r,mantisa:n}}function oi(e){var t=ei(e);var r=parseFloat(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return C(r)}if(ui(r)&&t.number.match(/e\+?[0-9]/i)){return C(r)}var i=ai(t.number),u=i.mantisa,a=i.exponent;if(u!==undefined&&a!==undefined){var o=C(10).pow(C(Math.abs(a)));if(t.exact&&a<0){return fo({num:u,denom:o})}else if(a>0){return C(u).mul(o)}}}r=uo(r);if(t.exact){return r.toRational()}return r}function si(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{return $a(JSON.parse(e))}catch(e){var r=e.message.replace(/in JSON /,"").replace(/.*Error: /,"");throw new Error("Invalid string literal: ".concat(r))}}function ci(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new L(e)}function fi(e){if(Mo.hasOwnProperty(e)){return Mo[e]}if(e.match(/^"[\s\S]*"$/)){return si(e)}else if(e[0]==="#"){var t=e.match(In);if(t){return new RegExp(t[1],t[2])}else if(e.match(Vn)){return ni(e)}var r=e.match(/#\\(.+)/);if(r&&Mn(r[1]).length===1){return ni(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(Gn)){return ri(e)}else if(e.match(Rn)){return oi(e)}else if(e.match(Kn)){return ti(e)}else if(e.match(Jn)){return ii(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return ci(e)}function li(e){return!(["(",")","[","]"].includes(e)||Bi.names().includes(e))}function hi(e){return li(e)&&!(e.match(In)||e.match(/^"[\s\S]*"$/)||e.match(Gn)||e.match(Rn)||e.match(Jn)||e.match(Kn)||e.match(Vn)||["#t","#f","nil","true","false"].includes(e))}var pi=/"(?:\\[\S\s]|[^"])*"?/g;function _i(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function di(){this.data=[]}di.prototype.push=function(e){this.data.push(e)};di.prototype.top=function(){return this.data[this.data.length-1]};di.prototype.pop=function(){return this.data.pop()};di.prototype.is_empty=function(){return!this.data.length};function vi(e){if(e instanceof $a){e=e.valueOf()}var t=new s(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===Fo){break}r.push(n);t.skip()}return r}function yi(e){var t=e.token,r=F(e,sn);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return vn({token:t},r)}function mi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}mi.prototype.toString=function(){return"#<Thunk>"};function gi(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return bi(n.apply(this,t))}}function bi(e){while(e instanceof mi){var t=e;e=e.fn();if(!(e instanceof mi)){t.cont()}}return e}function wi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof $a){e=e.toString()}if(t){return vi(e)}else{var r=vi(e).map(function(e){if(e.token==="#\\ "){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return Di(r)}}function Di(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var u=e[i];if(u==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(u)){t--}else if(["(","["].includes(u)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var a=0,o=n;a<o.length;a++){var s=j(o[a],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function Ei(e){return _(e)==="symbol"||_(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function L(e){if(typeof this!=="undefined"&&this.constructor!==L||typeof this==="undefined"){return new L(e)}if(e instanceof $a){e=e.valueOf()}if(L.list[e]instanceof L){return L.list[e]}this.__name__=e;if(typeof e==="string"){L.list[e]=this}}L.list={};L.literal=Symbol["for"]("__literal__");L.object=Symbol["for"]("__object__");L.is=function(e,t){return e instanceof L&&(t instanceof L&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};L.prototype.toString=function(e){if(Ei(this.__name__)){return Ai(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};L.prototype.literal=function(){if(this.is_gensym()){return this[L.literal]}return this.valueOf()};L.prototype.serialize=function(){if($a.isString(this.__name__)){return this.__name__}return[Ai(this.__name__)]};L.prototype.valueOf=function(){return this.__name__.valueOf()};L.prototype.is_gensym=function(){return xi(this.__name__)};function Ai(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function xi(e){if(_(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var Fi=function(){var t=0;function r(e,t){var r=new L(t);Fa(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof L){if(e.is_gensym()){return e}e=e.valueOf()}if(xi(e)){return L(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function ki(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=us(e);n.fulfilled=true;n.pending=false;return e});$i(this,"_promise",e,{hidden:true});if(Xu(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});$i(this,"__promise__",e);this.then=false}ki.prototype.then=function(e){return new ki(this.valueOf().then(e))};ki.prototype["catch"]=function(e){return new ki(this.valueOf()["catch"](e))};ki.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};ki.prototype.toString=function(){if(this.__pending__){return ki.pending_str}if(this.__rejected__){return ki.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};ki.pending_str="#<js-promise (pending)>";ki.rejected_str="#<js-promise (rejected)>";function Ci(e){if(Array.isArray(e)){return Promise.all(Oi(e)).then(Si)}return e}function Oi(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof ki){t[r]=new Bo(n)}else{t[r]=n}}return t}function Si(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof Bo){t[r]=n.valueOf()}else{t[r]=n}}return t}var Bi={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this.__list__)},type:function e(t){return this.get(t).type},get:function e(t){return this.__list__[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this.__events__[t]}else{this.__events__=this.__events__.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this.__events__[t]){this.__events__[t]=[r]}else{this.__events__[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this.__events__[t]){this.__events__[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){this.trigger("remove");delete this.__list__[t]},append:function e(t,r,n){this.trigger("append");this.__list__[t]={seq:t,symbol:r,type:n}},__events__:{},__list__:{}};function ji(e){return Bi.names().includes(e)}function Ii(e){return Bi.__builtins__.includes(e)}function Pi(e){return Bi.type(e)===Bi.LITERAL}var Ni=[["'",new L("quote"),Bi.LITERAL],["`",new L("quasiquote"),Bi.LITERAL],[",@",new L("unquote-splicing"),Bi.LITERAL],[",",new L("unquote"),Bi.LITERAL],["'>",new L("quote-promise"),Bi.LITERAL]];var Ri=Ni.map(function(e){return e[0]});Object.freeze(Ri);Object.defineProperty(Bi,"__builtins__",{writable:false,value:Ri});Ni.forEach(function(e){var t=j(e,3),r=t[0],n=t[1],i=t[2];Bi.append(r,n,i)});var s=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;D(this,p);$i(this,"__input__",e.replace(/\r/g,""));var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return u[r]},set:function e(t){u[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}A(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return Fo}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return Fo}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return Fo}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return Fo}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var u=i.match(/\n/g);if(u){this._line+=u.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return Fo}return za(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function c(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.prev_char,n=t["char"],i=t.next_char;var u=j(e,4),a=u[0],o=u[1],s=u[2],f=u[3];if(e.length!==5){throw new Error("Lexer: Invalid rule of length ".concat(e.length))}if(!n.match(a)){return false}if(!Ti(o,r)){return false}if(!Ti(s,i)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function f(){if(this._i>=this.__input__.length){return false}var e=true;e:for(var t=this._i,r=this.__input__.length;t<r;++t){var n=this.__input__[t];var i=this.__input__[t-1]||"";var u=this.__input__[t+1]||"";if(n==="\n"){++this._line;var a=this._newline;if(this._state===null){this._newline=t+1}if(this._whitespace&&this._state===null){this._next=t+1;this._col=this._i-a;return true}}if(e&&this._state===null&&n.match(/\s/)){if(this._whitespace){if(!u.match(/\s/)){this._next=t+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=t+1;continue}}e=false;var o=hn(p.rules),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(this.match_rule(c,{prev_char:i,char:n,next_char:u})){var l=c[c.length-1];this._state=l;if(this._state===null){this._next=t+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){o.e(e)}finally{o.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();s.symbol_rule=function e(t,r){var n=s.literal_rule(t,r,s.boundary,/\S/);return n.concat([[/\S/,/\S/,s.boundary,null,null],[/\S/,/\S/,null,null,s.symbol],[/\S/,null,s.boundary,s.symbol,null]])};s.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var u=[];for(var a=0,o=t.length;a<o;++a){var s=[];s.push(t[a]);s.push(t[a-1]||n);s.push(t[a+1]||i);if(a===0){s.push(null);s.push(r)}else if(a===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}u.push(s)}return u};s.string=Symbol["for"]("string");s.string_escape=Symbol["for"]("string_escape");s.symbol=Symbol["for"]("symbol");s.comment=Symbol["for"]("comment");s.regex=Symbol["for"]("regex");s.regex_init=Symbol["for"]("regex_init");s.regex_class=Symbol["for"]("regex_class");s.character=Symbol["for"]("character");s.bracket=Symbol["for"]("bracket");s.b_symbol=Symbol["for"]("b_symbol");s.b_comment=Symbol["for"]("b_comment");s.i_comment=Symbol["for"]("i_comment");s.l_datum=Symbol["for"]("l_datum");s.dot=Symbol["for"]("dot");s.boundary=/^$|[\s()[\]']/;s._rules=[[/"/,null,null,s.string,null],[/"/,null,null,null,s.string],[/"/,null,null,s.string_escape,s.string],[/\\/,null,null,s.string,s.string_escape],[/./,/\\/,null,s.string_escape,s.string],[/#/,null,/[bdxoeitf]/i,null,s.symbol],[/#/,null,/\\/,null,s.character],[/\\/,/#/,/\s/,s.character,s.character],[/\\/,/#/,/[()[\]]/,s.character,s.character],[/\s/,/\\/,null,s.character,null],[/\S/,null,s.boundary,s.character,null],[/#/,s.boundary,/\//,null,s.regex_init],[/./,/\//,null,s.regex_init,s.regex],[/[ \t]/,null,null,s.regex,s.regex],[/\[/,null,null,s.regex,s.regex_class],[/\]/,/[^\\]/,null,s.regex_class,s.regex],[/[()[\]]/,null,null,s.regex,s.regex],[/\//,/\\/,null,s.regex,s.regex],[/\//,/[^#]/,s.boundary,s.regex,null],[/[gimyus]/,/\//,s.boundary,s.regex,null],[/[gimyus]/,/\//,/[gimyus]/,s.regex,s.regex],[/[gimyus]/,/[gimyus]/,s.boundary,s.regex,null],[/;/,/^$|[^#]/,null,null,s.comment],[/[\s\S]/,null,/\n/,s.comment,null],[/\s/,null,null,s.comment,s.comment],[/#/,null,/\|/,null,s.b_comment],[/\s/,null,null,s.b_comment,s.b_comment],[/#/,/\|/,null,s.b_comment,null],[/#/,null,/;/,null,s.i_comment],[/;/,/#/,null,s.i_comment,null],[/#/,null,/[0-9]/,null,s.l_datum],[/=/,/[0-9]/,null,s.l_datum,null],[/#/,/[0-9]/,null,s.l_datum,null],[/\./,s.boundary,/,/,null,null],[/\|/,null,null,null,s.b_symbol],[/\s/,null,null,s.b_symbol,s.b_symbol],[/\|/,null,s.boundary,s.b_symbol,null]];s._brackets=[[/[()[\]]/,null,null,null,null]];s._symbol_rules=[[/\S/,s.boundary,s.boundary,null,null],[/\S/,s.boundary,null,null,s.symbol],[/\S/,null,s.boundary,null,null],[/\S/,null,null,null,s.symbol],[/\S/,null,s.boundary,s.symbol,null]];s._cache={valid:false,rules:null};Bi.on(["remove","append"],function(){s._cache.valid=false;s._cache.rules=null});Object.defineProperty(s,"rules",{get:function e(){if(s._cache.valid){return s._cache.rules}var t=Bi.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=Bi.get(t),n=r.type,i=r.symbol;var u;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=i}if(n===Bi.SYMBOL){u=s.symbol_rule(t,a)}else{u=s.literal_rule(t,a)}return e.concat(u)},[]);s._cache.rules=s._rules.concat(s._brackets,r,s._symbol_rules);s._cache.valid=true;return s._cache.rules}});function Ti(e,t){return e===null||t.match(e)}var Li=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,u=t.formatter,a=u===void 0?yi:u;D(this,o);if(e instanceof $a){e=e.toString()}$i(this,"_formatter",a,{hidden:true});$i(this,"__lexer__",new s(e));$i(this,"__env__",r);$i(this,"_meta",i,{hidden:true});$i(this,"_refs",[],{hidden:true});$i(this,"_state",{parentheses:0},{hidden:true})}A(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=B(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===Fo)){t.next=4;break}return t.abrupt("return",Fo);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===Fo)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=B(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){var r=["(","["].includes(t);if(r){this._state.parentheses++}return r}},{key:"is_close",value:function e(t){var r=[")","]"].includes(t);if(r){this._state.parentheses--}return r}},{key:"read_list",value:function(){var e=B(z.mark(function e(){var r,n,i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=U,n=r;case 1:t.next=4;return this.peek();case 4:i=t.sent;if(!(i===Fo)){t.next=7;break}return t.abrupt("break",27);case 7:if(!this.is_close(i)){t.next=10;break}this.skip();return t.abrupt("break",27);case 10:if(!(i==="."&&r!==U)){t.next=17;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;t.next=25;break;case 17:t.t0=M;t.next=20;return this._read_object();case 20:t.t1=t.sent;t.t2=U;u=new t.t0(t.t1,t.t2);if(r===U){r=u}else{n.cdr=u}n=u;case 25:t.next=1;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=B(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===Fo)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",fi(r));case 6:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return _s(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=B(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof Ui){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"balanced",value:function e(){return this._state.parentheses===0}},{key:"ballancing_error",value:function e(t){var r=this._state.parentheses;var n=new Error("Parser: expected parenthesis but eof found");var i=new RegExp("\\){".concat(r,"}$"));n.__code__=[t.toString().replace(i,"")];throw n}},{key:"_resolve_object",value:function(){var t=B(z.mark(function e(r){var n=this;var i;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!wu(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof M)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=B(z.mark(function e(r){return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof M)){t.next=15;break}if(!(r.car instanceof Ui)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof Ui)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=B(z.mark(function e(){var r,n,i,u,a,o,s,c,f;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===Fo)){t.next=5;break}return t.abrupt("return",r);case 5:if(!ji(r)){t.next=39;break}n=Bi.get(r);i=Ii(r);this.skip();t.next=11;return this._read_object();case 11:a=t.sent;if(i){t.next=26;break}o=this.__env__.get(n.symbol);if(!(typeof o==="function")){t.next=26;break}if(!Pi(r)){t.next=19;break}return t.abrupt("return",o.call(this.__env__,a));case 19:if(!(a===U)){t.next=23;break}return t.abrupt("return",o.apply(this.__env__));case 23:if(!(a instanceof M)){t.next=25;break}return t.abrupt("return",o.apply(this.__env__,a.to_array(false)));case 25:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 26:if(Pi(r)){u=new M(n.symbol,new M(a,U))}else{u=new M(n.symbol,a)}if(!i){t.next=29;break}return t.abrupt("return",u);case 29:if(!(o instanceof Vu)){t.next=38;break}t.next=32;return this.evaluate(u);case 32:s=t.sent;if(!(s instanceof M||s instanceof L)){t.next=35;break}return t.abrupt("return",M.fromArray([L("quote"),s]));case 35:return t.abrupt("return",s);case 38:throw new Error("Parse Error: invalid parser extension: "+n.symbol);case 39:c=this.match_datum_ref(r);if(!(c!==null)){t.next=45;break}this.skip();if(!this._refs[c]){t.next=44;break}return t.abrupt("return",new Ui(c,this._refs[c]));case 44:throw new Error("Parse Error: invalid datum label #".concat(c,"#"));case 45:f=this.match_datum_label(r);if(!(f!==null)){t.next=52;break}this.skip();this._refs[f]=this._read_object();return t.abrupt("return",this._refs[f]);case 52:if(!this.is_open(r)){t.next=57;break}this.skip();return t.abrupt("return",this.read_list());case 57:return t.abrupt("return",this.read_value());case 58:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var Ui=function(){function r(e,t){D(this,r);this.name=e;this.data=t}A(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function Mi(e,t){return qi.apply(this,arguments)}function qi(){qi=e(z.mark(function e(r,n){var i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!n){if(qo){n=qo.get("**interaction-environment**",{throwError:false})}else{n=Yo}}i=new Li(r,{env:n});case 2:t.next=5;return P(i.read_object());case 5:u=t.sent;if(!i.balanced()){i.ballancing_error(u)}if(!(u===Fo)){t.next=9;break}return t.abrupt("break",13);case 9:t.next=11;return u;case 11:t.next=2;break;case 13:case"end":return t.stop()}}},e)}));return qi.apply(this,arguments)}function Yi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(ra(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return Vi(e,t,r)}if(wu(e)){return zi(e,t,r)}return t(e)}function Vi(t,r,e){if(t.find(ra)){return Yi(Ci(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return r(e)},e)}return r(t)}function zi(t,e,r){var i=Object.keys(t);var n=[],u=[];var a=i.length;while(a--){var o=i[a];var s=t[o];n[a]=s;if(ra(s)){u.push(s)}}if(u.length){return Yi(Ci(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function $i(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,u=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!u})}function Ji(e){return Ki.apply(this,arguments)}function Ki(){Ki=B(z.mark(function e(r){var n,i,u,a,o,s,c;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=[];i=false;u=false;t.prev=3;o=yn(r);case 5:t.next=7;return o.next();case 7:if(!(i=!(s=t.sent).done)){t.next=13;break}c=s.value;n.push(c);case 10:i=false;t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);u=true;a=t.t0;case 19:t.prev=19;t.prev=20;if(!(i&&o["return"]!=null)){t.next=24;break}t.next=24;return o["return"]();case 24:t.prev=24;if(!u){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:return t.abrupt("return",n);case 30:case"end":return t.stop()}}},e,null,[[3,15,19,29],[20,,24,28]])}));return Ki.apply(this,arguments)}function Gi(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(Xu(t)){return t}throw new Error("Invalid matcher")}function y(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=Hi(r)}}if(e){t.__name__=e}else if(t.name&&!Ca(t)){t.__name__=t.name}return t}function Hi(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function Wi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function Qi(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function Zi(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=hn(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var u=f(i,t);if(u!==-1){return u}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[u]===Symbol["for"]("symbol")&&!hi(n[o])}function i(){var e=r[u+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var u=0;var a={};for(var o=0;o<n.length;++o){if(typeof r[u]==="undefined"){return o}if(r[u]instanceof tu){var s;if(["+","*"].includes(r[u].flag)){while(o<n.length){s=e(r[u].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;u++;continue}else if(r[u].flag==="?"){s=e(r[u].patterns,n.slice(o));if(s===-1){o-=2}else{u++}continue}}else if(r[u]instanceof RegExp){if(!n[o].match(r[u])){return-1}}else if(Gs.LString.isString(r[u])){if(r[u].valueOf()!==n[o]){return-1}}else if(_(r[u])==="symbol"){if(r[u]===Symbol["for"]("*")){a[u]=a[u]||0;if(["(","["].includes(n[o])){a[u]++}else if([")","]"].includes(n[o])){a[u]--}if(typeof r[u+1]!=="undefined"&&a[u]===0&&i()===-1||a[u]>0){continue}}else if(t()){return-1}}else if(r[u]instanceof Array){var c=f(r[u],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;u++;continue}else{return-1}u++}if(r.length!==u){return-1}return n.length}}function Xi(e){this.__code__=e.replace(/\r/g,"")}Xi.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}};Xi.match=Zi;Xi.prototype._options=function e(t){var r=Xi.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var u=n.shift||{1:[]};return vn(vn(vn({},r),t),{},{exceptions:{specials:[].concat(q(r.exceptions.specials),q(i)),shift:vn(vn({},u),{},{1:[].concat(q(r.exceptions.shift[1]),q(u[1]))})}})};Xi.prototype.indent=function e(t){var r=wi(this.__code__,true);return this._indent(r,t)};Xi.exception_shift=function(u,e){function t(e){if(!e.length){return false}if(e.indexOf(u)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=hn(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(u.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var a=j(i[n],2),o=a[0],s=a[1];if(t(s)){return+o}}return-1};Xi.prototype._indent=function f(e,l){var t=this._options(l);var r=Qi(e);var n=Wi(e);var i=e[e.length-n.length-1];var h=e[e.length-1];if(h.token.match(/^"[\S\s]+[^"]$/)){return r+t.indent}if(n&&n.length){if(n[0].line>0){t.offset=0}if(n.toString()===e.toString()&&ms(n)){return t.offset+n[0].col}else if(n.length===1){return t.offset+n[0].col+1}else{var u=-1;if(i){var a=Xi.exception_shift(i.token,t);if(a!==-1){u=a}}if(u===-1){u=Xi.exception_shift(n[1].token,t)}if(u!==-1){return t.offset+n[0].col+u}else if(n[0].line<n[1].line){return t.offset+n[0].col+1}else if(n.length>3&&n[1].line===n[3].line){if(n[1].token==="("||n[1].token==="["){return t.offset+n[1].col}return t.offset+n[3].col}else if(n[0].line===n[1].line){return t.offset+t.indent+n[0].col}else{var o=n.slice(2);for(var s=0;s<o.length;++s){var c=o[s];if(c.token.trim()){return c.col}}}}}else{return 0}return r+t.indent};function eu(e){this.pattern=e}eu.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};eu.prototype.match=function(e){return e.match(this.pattern)};function tu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}tu.prototype.toString=function(){var e=this.patterns.map(function(e){return Pu(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};Xi.Pattern=tu;Xi.Ahead=eu;var ru=/^[[(]$/;var nu=/^[\])]$/;var iu=/[^()[\]]/;var uu=new eu(/[^)\]]/);var au=Symbol["for"]("*");var ou=new tu([ru,au,nu],[iu],"+");var su=new tu([ru,au,nu],"+");var cu=new tu([Symbol["for"]("symbol")],"?");var fu=new tu([Symbol["for"]("symbol")],"*");var lu=[ru,fu,nu];var hu=new tu([ru,Symbol["for"]("symbol"),au,nu],"+");var pu=vu("define","lambda","define-macro","syntax-rules");var _u=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var du=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function vu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}Xi.rules=[[[su],0,uu],[[ru,vu("begin","cond-expand")],1],[[ru,du,cu,ru,hu,nu],1],[[ru,du,cu,ou],1,uu],[[ru,du,ru,hu],1,uu],[[ru,_u,new tu([/[^()[\]]/],"+"),su],1,uu],[[ru,su],1,uu],[[ru,iu,su],1,uu],[[ru,vu("lambda","if"),iu],1,uu],[[ru,vu("while"),iu,su],1,uu],[[ru,vu("if"),iu,au],1],[[ru,pu,lu],0,uu],[[ru,pu,lu,pi],0,uu],[[ru,pu,lu,pi,su],0,uu],[[ru,pu,lu,su],0,uu]];Xi.prototype["break"]=function(){var f=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var l=function e(t){if(t.token.match(pi)||t.token.match(In)){return t.token}else{return t.token.replace(/\s+/," ")}};var h=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!ji(n)){return t.length-r-1}}};var e=wi(f,true).map(l).filter(function(e){return e!=="\n"});var t=Xi.rules;e:for(var r=1;r<e.length;++r){if(!e[r].trim()){continue}var n=e.slice(0,r);var i={};t.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!i[e]){i[e]=Wi(n,e)}});var u=hn(t),p;try{for(u.s();!(p=u.n()).done;){var a=j(p.value,3),_=a[0],o=a[1],s=a[2];o=o.valueOf();var d=o>0?i[o]:n;var v=d.filter(function(e){return e.trim()&&!ji(e)});var y=h(d);var m=Zi(_,v);var g=e.slice(r).find(function(e){return e.trim()&&!ji(e)});if(m&&(s instanceof eu&&s.match(g)||!s)){var c=r-y;if(e[c]!=="\n"){if(!e[c].trim()){e[c]="\n"}else{e.splice(c,0,"\n");r++}}r+=y;continue e}}}catch(e){u.e(e)}finally{u.f()}}this.__code__=e.join("");return this};Xi.prototype._spaces=function(e){return new Array(e+1).join(" ")};Xi.prototype.format=function c(e){var t=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var r=wi(t,true);var n=this._options(e);var i=0;var u=0;for(var a=0;a<r.length;++a){var o=r[a];if(o.token==="\n"){i=this._indent(r.slice(0,a),n);u+=i;if(r[a+1]){r[a+1].token=this._spaces(i);i--;u--;for(var s=a+2;s<r.length;++s){r[s].offset+=u;r[s].col+=i;if(r[s].token==="\n"){a=s-1;break}}}}}return r.map(function(e){if(e.token.match(pi)){if(e.token.match(/\n/)){var t=new Array(e.col+1).join(" ");var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function yu(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var u=t&&e||e.slice();var a;if(!e.length){return i}a=u.pop();do{if(r.call(a)===n){u.push.apply(u,a)}else{i.push(a)}}while(u.length&&(a=u.pop())!==undefined);i.reverse();return i}function mu(){}mu.prototype.toString=function(){return"()"};mu.prototype.valueOf=function(){return undefined};mu.prototype.serialize=function(){return 0};mu.prototype.to_object=function(){return{}};mu.prototype.append=function(e){return new M(e,U)};mu.prototype.to_array=function(){return[]};var U=new mu;function M(e,t){if(typeof this!=="undefined"&&this.constructor!==M||typeof this==="undefined"){return new M(e,t)}this.car=e;this.cdr=t}function gu(u,a){return function e(t){h(u,t,["pair","nil"]);if(t===U){return[]}var r=[];var n=t;while(true){if(n instanceof M){if(n.haveCycles("cdr")){break}var i=n.car;if(a&&i instanceof M){i=this.get(u).call(this,i)}r.push(i);n=n.cdr}else if(n===U){break}else{throw new Error("".concat(u,": can't convert improper list"))}}return r}}M.prototype.flatten=function(){return M.fromArray(yu(this.to_array()))};M.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===U||!(t instanceof M)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};M.match=function(e,t){if(e instanceof L){return L.is(e,t)}else if(e instanceof M){return M.match(e.car,t)||M.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return M.match(e,t)})}else if(wu(e)){return Object.values(e).some(function(e){return M.match(e,t)})}return false};M.prototype.find=function(e){return M.match(this,e)};M.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof M){if(n.has(e)){return n.get(e)}var t=new M;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[ga]=e[ga];return t}return e}return i(this)};M.prototype.last_pair=function(){var e=this;while(true){if(e.cdr===U){return e}e=e.cdr}};M.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof M){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof M){t=t.concat(this.cdr.to_array())}return t};M.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof M||r&&e instanceof Array&&e[ya]){return e}if(t===false){var n=U;for(var i=e.length;i--;){n=new M(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=q(e)}var u=U;var a=e.length;while(a--){var o=e[a];if(o instanceof Array){o=M.fromArray(o,t,r)}else if(typeof o==="string"){o=$a(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=C(o)}u=new M(o,u)}return u};M.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof M&&t.car instanceof M){var n=t.car;var i=n.car;if(i instanceof L){i=i.__name__}if(i instanceof $a){i=i.valueOf()}var u=n.cdr;if(u instanceof M){u=u.to_object(e)}if(ts(u)){if(!e){u=u.valueOf()}}r[i]=u;t=t.cdr}else{break}}return r};M.fromPairs=function(e){return e.reduce(function(e,t){return new M(new M(new L(t[0]),t[1]),e)},U)};M.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return M.fromPairs(e)};M.prototype.reduce=function(e){var t=this;var r=U;while(true){if(t!==U){r=e(r,t.car);t=t.cdr}else{break}}return r};M.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=U;while(e!==U){var r=e.cdr;e.cdr=t;t=e;e=r}return t};M.prototype.transform=function(n){function i(e){if(e instanceof M){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof M){t=i(t)}var r=n(e.cdr);if(r instanceof M){r=i(r)}return new M(t,r)}return e}return i(this)};M.prototype.map=function(e){if(typeof this.car!=="undefined"){return new M(e(this.car),this.cdr===U?U:this.cdr.map(e))}else{return U}};var bu=new Map;function wu(e){return e&&_(e)==="object"&&e.constructor===Object}var Du=Object.getOwnPropertyNames(Array.prototype);var Eu=[];Du.forEach(function(e){Eu.push(Array[e],Array.prototype[e])});function Au(e){e=sa(e);return Eu.includes(e)}function xu(e){return Xu(e)&&(Ca(e)||e.__doc__)}function Fu(r){var e=r.constructor||Object;var n=wu(r);var i=Xu(r[Symbol.asyncIterator])||Xu(r[Symbol.iterator]);var u;if(bu.has(e)){u=bu.get(e)}else{bu.forEach(function(e,t){t=sa(t);if(r.constructor===t&&(t===Object&&n&&!i||t!==Object)){u=e}})}return u}var ku=new Map;[[true,"#t"],[false,"#f"],[null,"null"],[undefined,"#<undefined>"]].forEach(function(e){var t=j(e,2),r=t[0],n=t[1];ku.set(r,n)});function Cu(r){if(r&&_(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=Pu(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&_(t)==="object"&&t.constructor===Object){n[e]=Cu(t)}else{n[e]=Pu(t)}});return n}return r}function Ou(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Su(e,t){return e.hasOwnProperty(t)&&Xu(e.toString)}function Bu(e){if(Ba(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(Xu(t)&&Ca(t)){if(e[ba]&&t.hasOwnProperty("__name__")){var r=t.__name__;if($a.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(_(n)==="symbol"){n=Ai(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(Su(e,"toString")){return e.toString()}else if(e.name&&!Ca(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var ju=new Map;[[Error,function(e){return e.message}],[M,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.markCycles()}return e.toString.apply(e,[r].concat(q(i)))}],[za,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[$a,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=j(e,2),r=t[0],n=t[1];ju.set(r,n)});var Iu=[L,C,Vu,jo,ho,po,So,ki];function Pu(e,t,c){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(ku.has(e)){return ku.get(e)}if(Nu(e)){return"#<prototype>"}if(e){var r=e.constructor;if(ju.has(r)){for(var n=arguments.length,f=new Array(n>3?n-3:0),i=3;i<n;i++){f[i-3]=arguments[i]}return ju.get(r)(e,{quote:t,skip_cycles:c,pair_args:f})}}var u=hn(Iu),l;try{for(u.s();!(l=u.n()).done;){var h=l.value;if(e instanceof h){return e.toString(t)}}}catch(e){u.e(e)}finally{u.f()}if([U,Fo].includes(e)){return e.toString()}if(Xu(e)){return Bu(e)}if(e===gn){return"#<js:global>"}if(e===null){return"null"}if(_(e)==="object"){var a=e.constructor;if(!a){a=Object}var o;if(typeof a.__class__==="string"){o=a.__class__}else{var s=Fu(e);if(s){if(Xu(s)){return s(e,t)}else{throw new Error("toString: Invalid repr value")}}o=a.name}if(Xu(e.toString)&&Ca(e.toString)){return e.toString().valueOf()}if(us(e)==="instance"){if(Ca(a)&&a.__name__){o=a.__name__.valueOf()}else if(!Ba(a)){o="instance"}}if(ns(e,Symbol.iterator)){if(o){return"#<iterator(".concat(o,")>")}return"#<iterator>"}if(ns(e,Symbol.asyncIterator)){if(o){return"#<asyncIterator(".concat(o,")>")}return"#<asyncIterator>"}if(o!==""){return"#<"+o+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}function Nu(e){return e&&_(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}M.prototype.markCycles=function(){Ru(this);return this};M.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[ga]&&this[ga][e])};function Ru(e){var t=[];var i=[];var u=[];function a(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof M){if(n.includes(r)){if(!u.includes(r)){u.push(r)}if(!e[ga]){e[ga]={}}e[ga][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=gi(function e(t,r){if(t instanceof M){delete t.ref;delete t[ga];a(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new mi(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[ga][t]instanceof M){var r=n.indexOf(e[ga][t]);e[ga][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return u.includes(e)});n.forEach(function(e,t){e[ma]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}M.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[ma]){i.push(this[ma]+"(")}else if(!n){i.push("(")}var u;if(this[ga]&&this[ga].car){u=this[ga].car}else{u=Pu(this.car,e,true)}if(u!==undefined){i.push(u)}if(this.cdr instanceof M){if(this[ga]&&this[ga].cdr){i.push(" . ");i.push(this[ga].cdr)}else{if(this.cdr[ma]){i.push(" . ")}else{i.push(" ")}var a=this.cdr.toString(e,{nested:true});i.push(a)}}else if(this.cdr!==U){i=i.concat([" . ",Pu(this.cdr,e,true)])}if(!n||this[ma]){i.push(")")}return i.join("")};M.prototype.set=function(e,t){this[e]=t;if(t instanceof M){this.markCycles()}};M.prototype.append=function(e){if(e instanceof Array){return this.append(M.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof M){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==U){while(true){if(t instanceof M&&t.cdr!==U){t=t.cdr}else{break}}t.cdr=e}return this};M.prototype.serialize=function(){return[this.car,this.cdr]};M.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===U){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function Tu(e){return e<0?-e:e}function Lu(e,t){var r=m(t),n=r[0],i=r.slice(1);while(i.length>0){var u=i,a=j(u,1),o=a[0];if(!e(n,o)){return false}var s=i;var c=m(s);n=c[0];i=c.slice(1)}return true}function Uu(e,t){if(Xu(e)){return Xu(t)&&sa(e)===sa(t)}else if(e instanceof C){if(!(t instanceof C)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return Uu(C(e),C(t))}else if(e instanceof za){if(!(t instanceof za)){return false}return e.__char__===t.__char__}else{return e===t}}function Mu(e,t){if(us(e)!==us(t)){return false}if(!qu(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof $a){return e.valueOf()===t.valueOf()}return Uu(e,t)}function qu(e){return e instanceof L||$a.isString(e)||e===U||e===null||e instanceof za||e instanceof C||e===true||e===false}var Yu=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function Vu(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==Vu||typeof this==="undefined"){return new Vu(e,t)}h("Macro",e,"string",1);h("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=Hi(r)}}this.__name__=e;this.__fn__=t}Vu.defmacro=function(e,t,r,n){var i=new Vu(e,t,r,n);i.__defmacro__=true;return i};Vu.prototype.invoke=function(e,t,r){var n=t.env,i=t.dynamic_scope,u=t.error;var a={dynamic_scope:i,error:u,macro_expand:r};var o=this.__fn__.call(n,e,a,this.__name__);return o};Vu.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var zu="define-macro";var $u=-1e4;function Ju(c){return function(){var r=B(z.mark(function e(r,m){var u,g,n,i,s,D,E,A,x,F,k,b,a,w,o;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:o=function e(){o=B(z.mark(function e(r,n,i){var h,u,a,p,o,_,s,d,c,v,f,l,y;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof M&&r.car instanceof L)){t.next=50;break}if(!r[ya]){t.next=3;break}return t.abrupt("return",r);case 3:h=r.car.valueOf();u=i.get(r.car,{throwError:false});a=D(r.car);p=a||E(u,r)||A(u);if(!(p&&r.cdr.car instanceof M)){t.next=28;break}if(!a){t.next=15;break}g=F(r.cdr.car);t.next=12;return b(r.cdr.car,n);case 12:o=t.sent;t.next=17;break;case 15:g=x(r.cdr.car);o=r.cdr.car;case 17:t.t0=M;t.t1=r.car;t.t2=M;t.t3=o;t.next=23;return w(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!k(h,u)){t.next=50;break}_=u instanceof Ku?r:r.cdr;t.next=32;return u.invoke(_,vn(vn({},m),{},{env:i}),true);case 32:s=t.sent;if(!(u instanceof Ku)){t.next=41;break}d=s,c=d.expr,v=d.scope;if(!(c instanceof M)){t.next=40;break}if(!(n!==-1&&n<=1||n<$u)){t.next=38;break}return t.abrupt("return",c);case 38:if(n!==-1){n=n-1}return t.abrupt("return",w(c,n,v));case 40:s=c;case 41:if(!(s instanceof L)){t.next=43;break}return t.abrupt("return",Io(s));case 43:if(!(s instanceof M)){t.next=48;break}if(!(n!==-1&&n<=1||n<$u)){t.next=46;break}return t.abrupt("return",s);case 46:if(n!==-1){n=n-1}return t.abrupt("return",w(s,n,i));case 48:if(!qu(s)){t.next=50;break}return t.abrupt("return",s);case 50:f=r.car;if(!(f instanceof M)){t.next=55;break}t.next=54;return w(f,n,i);case 54:f=t.sent;case 55:l=r.cdr;if(!(l instanceof M)){t.next=60;break}t.next=59;return w(l,n,i);case 59:l=t.sent;case 60:y=new M(f,l);return t.abrupt("return",y);case 62:case"end":return t.stop()}}},e)}));return o.apply(this,arguments)};w=function e(t,r,n){return o.apply(this,arguments)};a=function e(){a=B(z.mark(function e(r,n){var i;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r===U)){t.next=2;break}return t.abrupt("return",U);case 2:i=r.car;t.t0=M;t.t1=M;t.t2=i.car;t.next=8;return w(i.cdr,n,u);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return b(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}}},e)}));return a.apply(this,arguments)};b=function e(t,r){return a.apply(this,arguments)};k=function e(t,r){return r instanceof Vu&&r.__defmacro__&&!g.includes(t)};F=function e(t){return[].concat(q(g),q(t.to_array(false).map(function(e){if(e instanceof M){return e.car.valueOf()}throw new Error("macroexpand: Invalid let binding")})))};x=function e(t){var r=[];while(true){if(t!==U){if(t instanceof L){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(q(g),r)};A=function e(t){return t===i};E=function e(t,r){return t===s&&r.cdr.car instanceof M};D=function e(t){var r=t.valueOf();return n.includes(r)};u=m["env"]=this;g=[];n=["let","let*","letrec"];i=qo.get("lambda");s=qo.get("define");if(!(r.cdr instanceof M&&C.isNumber(r.cdr.car))){t.next=21;break}t.t0=Io;t.next=19;return w(r,r.cdr.car.valueOf(),u);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=Io;t.next=25;return w(r,1,u);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=Io;t.next=30;return w(r,-1,u);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function Ku(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}Ku.__merge_env__=Symbol["for"]("merge");Ku.prototype=Object.create(Vu.prototype);Ku.prototype.invoke=function(e,t,r){var n=t.error,i=t.env;var u={error:n,env:i,dynamic_scope:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};Ku.prototype.constructor=Ku;Ku.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};Ku.className="syntax";var Gu=function(e){u(r,e);var t=fn(r);function r(){D(this,r);return t.apply(this,arguments)}return A(r)}(Ku);Ku.Parameter=Gu;function Hu(e,t,w,D){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var E={"...":{symbols:{},lists:[]},symbols:{}};var A=r.expansion,k=r.define;function x(e){if(Cn()){console.log(e)}}x(w);function F(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;x({code:t&&Pu(t,true),pattern:e&&Pu(e,true)});if(qu(e)&&!(e instanceof L)){return Mu(e,t)}if(e instanceof L&&w.includes(e.literal())){var c=A.ref(t);if(L.is(t,e)){if(typeof c==="undefined"){return true}return c===k||c===qo}return false}if(e instanceof M&&e.car instanceof M&&e.car.cdr instanceof M&&L.is(e.car.cdr.car,D)){x(">> 0");if(t===U){x({pattern:e.toString()});if(e.car.car instanceof L){if(e.car.cdr instanceof M&&L.is(e.car.cdr.car,D)){var f=e.car.car.valueOf();var l=e.last_pair();if(L.is(l.car,D)){E["..."].symbols[f]=null;return true}else{return false}}var h=e.car.car.valueOf();if(E["..."].symbols[h]){throw new Error("syntax: named ellipsis can only "+"appear onces")}E["..."].symbols[h]=t}}}if(e instanceof M&&e.cdr instanceof M&&L.is(e.cdr.car,D)){if(e.cdr.cdr!==U){if(e.cdr.cdr instanceof M){var p=e.cdr.cdr.length();var _=t.length();var i=t;while(_-1>p){i=i.cdr;_--}var d=i.cdr;i.cdr=U;if(!F(e.cdr.cdr,d,r,n)){return false}}}if(e.car instanceof L){var u=e.car.__name__;if(E["..."].symbols[u]&&!r.includes(u)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}x(">> 1");if(t===U){x(">> 2");if(n){x("NIL");E["..."].symbols[u]=U}else{x("NULL");E["..."].symbols[u]=null}}else if(t instanceof M&&(t.car instanceof M||t.car===U)){x(">> 3 "+n);if(n){if(E["..."].symbols[u]){var a=E["..."].symbols[u];if(a===U){a=new M(U,new M(t,U))}else{a=a.append(new M(t,U))}E["..."].symbols[u]=a}else{E["..."].symbols[u]=new M(t,U)}}else{x(">> 4");E["..."].symbols[u]=new M(t,U)}}else{x(">> 6");if(t instanceof M){x(">> 7 "+n);r.push(u);if(!E["..."].symbols[u]){E["..."].symbols[u]=new M(t,U)}else{var v=E["..."].symbols[u];E["..."].symbols[u]=v.append(new M(t,U))}x({IIIIII:E["..."].symbols[u].toString()})}else{x(">> 8");return false}}return true}else if(e.car instanceof M){var y=q(r);if(t===U){x(">> 9");E["..."].lists.push(U);return true}x(">> 10");var m=t;while(m instanceof M){if(!F(e.car,m.car,y,true)){return false}m=m.cdr}return true}return false}if(e instanceof L){if(L.is(e,D)){throw new Error("syntax: invalid usage of ellipsis")}x(">> 11");var o=e.__name__;if(w.includes(o)){return true}x({name:o,ellipsis:n});if(n){E["..."].symbols[o]=E["..."].symbols[o]||[];E["..."].symbols[o].push(t)}E.symbols[o]=t;if(!E.symbols[o]);return true}if(e instanceof M&&t instanceof M){x(">> 12");x({a:12,code:t&&t.toString(),pattern:e.toString()});if(t.cdr===U){var g=e.car instanceof L&&e.cdr instanceof L;if(g){if(!F(e.car,t.car,r,n)){return false}x(">> 12 | 1");var s=e.cdr.valueOf();if(!(s in E.symbols)){E.symbols[s]=U}s=e.car.valueOf();if(!(s in E.symbols)){E.symbols[s]=t.car}return true}}x({pattern:e.toString(),code:t.toString()});if(e.cdr instanceof M&&e.car instanceof L&&e.cdr.cdr instanceof M&&e.cdr.car instanceof L&&L.is(e.cdr.cdr.car,D)&&e.cdr.cdr.cdr instanceof M&&!L.is(e.cdr.cdr.cdr.car,D)&&F(e.car,t.car,r,n)&&F(e.cdr.cdr.cdr,t.cdr,r,n)){var b=e.cdr.car.__name__;x({pattern:e.car.toString(),code:t.car.toString(),name:b});if(w.includes(b)){return true}E["..."].symbols[b]=null;return true}x("recur");if(F(e.car,t.car,r,n)&&F(e.cdr,t.cdr,r,n)){return true}}else if(e===U&&(t===U||t===undefined)){return true}else if(e.car instanceof M&&L.is(e.car.car,D)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(F(e,t)){return E}}function Wu(e,i){function u(t){if(t instanceof M){if(!i.length){return t}var e=u(t.car);var r=u(t.cdr);return new M(e,r)}else if(t instanceof L){var n=i.find(function(e){return e.gensym===t});if(n){return L(n.name)}return t}else{return t}}return u(e)}function Qu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var O=e.bindings,t=e.expr,S=e.scope,a=e.symbols,f=e.names,B=e.ellipsis;var c={};function o(e){if(e instanceof L){return true}return["string","symbol"].includes(_(e))}function j(e){if(!o(e)){var t=us(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===B){throw new Error("syntax: internal error, ellipis not transformed")}var n=_(r);if(["string","symbol"].includes(n)){if(r in O.symbols){return O.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var u=i[0];if(u in O.symbols){return M.fromArray([L("."),O.symbols[u]].concat(i.slice(1).map(function(e){return $a(e)})))}}}if(a.includes(r)){return L(r)}return s(r)}function I(e){if(Cn()){console.log(e)}}function s(e){if(!c[e]){var t=S.ref(e);var r=Fi(e);if(t){var n=S.get(e);S.set(r,n)}else{var i=S.get(e,{throwError:false});if(typeof i!=="undefined"){S.set(r,i)}}f.push({name:e,gensym:r});c[e]=r;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),a=m(u),o=a[0],s=a.slice(1);if(c[o]){Fa(r,"__object__",[c[o]].concat(q(s)))}}}return c[e]}function P(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;I(" ==> "+e.toString(true));I(t);if(e instanceof L){var u=e.valueOf();I("[t 1");if(t[u]){if(t[u]instanceof M){var c=t[u],f=c.car,l=c.cdr;if(i){var h=f.car,p=f.cdr;if(p!==U){n(u,new M(p,U))}return h}if(l!==U){n(u,l)}return f}else if(t[u]instanceof Array){n(u,t[u].slice(1));return t[u][0]}}return j(u)}if(e instanceof M){if(e.car instanceof L&&e.cdr instanceof M&&L.is(e.cdr.car,B)){I("[t 2");var a=e.car.valueOf();var o=t[a];I({expr:e.toString(true),name:a,bindings:t,item:o});if(o===null){return}else if(o){I({b:t[a].toString()});if(o instanceof M){I("[t 2 Pair "+i);I({______:o.toString()});var s=o.car,_=o.cdr;if(i){if(_!==U){I("|| next 1");n(a,_)}I({car:s.toString()});return s}else{if(s.cdr!==U){I("|| next 2");n(a,new M(s.cdr,_))}I({car:s.car.toString()});return s.car}}else if(o instanceof Array){I("[t 2 Array "+i);if(i){n(a,o.slice(1));return M.fromArray(o)}else{var d=o.slice(1);if(d.length){n(a,d)}return o[0]}}else{return o}}}I("[t 3 recur "+e.toString());var v=P(e.car,t,r,n);var y=P(e.cdr,t,r,n);return new M(v,y)}return e}function R(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,q(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof M||e===U||e instanceof Array&&e.length})}function T(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function N(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},e=n.disabled;I("traverse>> "+Pu(i));if(i instanceof M){if(!e&&i.car instanceof M&&L.is(i.car.car,B)){return N(i.car.cdr,{disabled:true})}if(i.cdr instanceof M&&L.is(i.cdr.car,B)&&!e){I(">> 1");var t=O["..."].symbols;var f=Object.values(t);if(f.length&&f.every(function(e){return e===null})){return N(i.cdr.cdr,{disabled:e})}var l=T(t);var u=i.car instanceof L&&L.is(i.cdr.cdr.car,B);if(i.car instanceof M||u){if(O["..."].lists[0]===U){return U}var h=i.car;if(u){h=new M(i.car,new M(i.cdr.car,U))}I(">> 2");var a;if(l.length){I(">> 2 (a)");var o=vn({},t);a=U;var p=function e(){if(!R(o)){return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(h,o,{nested:true},t);if(r!==undefined){if(u){if(a===U){a=r}else{a=a.append(r)}}else{a=new M(r,a)}}o=n};while(true){var _=p();if(_==="break")break}if(a!==U&&!u){a=a.reverse()}if(i.cdr.cdr!==U&&!L.is(i.cdr.cdr.car,B)){var d=N(i.cdr.cdr,{disabled:e});return a.append(d)}return a}else{I(">> 3");var v=P(i.car,t,{nested:true});if(v){return new M(v,U)}return U}}else if(i.car instanceof L){I(">> 4");if(L.is(i.cdr.cdr.car,B)){I(">> 4 (a)")}else{I(">> 4 (b)")}var y=i.car.__name__;var s=Y({},y,t[y]);var m=t[y]===null;var c=U;var g=function e(){if(!R(s,true)){I({bind:s});return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(i,s,{nested:false},t);I({value:r.toString()});if(typeof r!=="undefined"){c=new M(r,c)}s=n};while(true){var b=g();if(b==="break")break}if(c!==U){c=c.reverse()}if(i.cdr instanceof M){if(i.cdr.cdr instanceof M||i.cdr.cdr instanceof L){var w=N(i.cdr.cdr,{disabled:e});if(m){return w}I("<<<< 1");c.append(w)}}I("<<<< 2");return c}}var D=N(i.car,{disabled:e});var r;var E;if(i.car instanceof L){var A=S.get(i.car,{throwError:false});E=A instanceof Vu&&A.__name__==="syntax-rules"}if(E){if(i.cdr.car instanceof L){r=new M(N(i.cdr.car,{disabled:e}),new M(i.cdr.cdr.car,N(i.cdr.cdr.cdr,{disabled:e})))}else{r=new M(i.cdr.car,N(i.cdr.cdr,{disabled:e}))}I("REST >>>> "+r.toString())}else{r=N(i.cdr,{disabled:e})}I({a:true,car:Pu(i.car),cdr:Pu(i.cdr),head:Pu(D),rest:Pu(r)});return new M(D,r)}if(i instanceof L){if(e&&L.is(i,B)){return i}var x=Object.keys(O["..."].symbols);var F=i.literal();if(x.includes(F)){var k="missing ellipsis symbol next to name `".concat(F,"'");throw new Error("syntax-rules: ".concat(k))}var C=j(i);if(typeof C!=="undefined"){return C}}return i}return N(t,{})}function Zu(e){return na(e)||e===U||e===null}function Xu(e){return typeof e==="function"&&typeof e.bind==="function"}function ea(e){return e instanceof hs}function ta(e){return Xu(e)||ea(e)}function ra(e){if(e instanceof ki){return false}if(e instanceof Promise){return true}return e&&Xu(e.then)}function na(e){return typeof e==="undefined"}function ia(e){switch(_(e)){case"string":return $a(e);case"bigint":return C(e);case"number":if(Number.isNaN(e)){return Uo}else{return C(e)}}return e}function ua(n,i){var e=Object.getOwnPropertyNames(n);var t=Object.getOwnPropertySymbols(n);e.concat(t).forEach(function(e){var t=i(n[e]);var r=Object.getOwnPropertyDescriptor(n,e);if(!r||r.writable&&n[e]!==t){n[e]=t}});return n}function aa(t){var e=[$a,C].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(aa)}if(t instanceof ki){delete t.then}if(wu(t)){return ua(t,aa)}return t}function oa(e,t){if(e instanceof M){e.markCycles();return Io(e)}if(Xu(e)){if(t){return ca(e,t)}}return ia(e)}function sa(e){if(la(e)){return e[va]}return e}function ca(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=hn(n),u;try{for(i.s();!(u=i.n()).done;){var a=u.value;if(xa(a)){try{r[a]=e[a]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}Fa(r,"__fn__",e);Fa(r,"__context__",t);Fa(r,"__bound__",true);if(Ba(e)){Fa(r,"__native__",true)}if(wu(t)&&Ca(e)){Fa(r,"__method__",true)}r.valueOf=function(){return e};return r}function fa(e){return la(e)&&e[Symbol["for"]("__context__")]===Object}function la(e){return!!(Xu(e)&&e[va])}function ha(e){if(Xu(e)){var t=e[da];if(t&&(t===Gs||t.constructor&&t.constructor.__class__)){return true}}return false}function pa(e){return e instanceof ho||e instanceof po}function _a(e){if(Xu(e)){if(pa(e[da])){return true}}return false}var da=Symbol["for"]("__context__");var va=Symbol["for"]("__fn__");var ya=Symbol["for"]("__data__");var ma=Symbol["for"]("__ref__");var ga=Symbol["for"]("__cycles__");var ba=Symbol["for"]("__class__");var wa=Symbol["for"]("__method__");var Da=Symbol["for"]("__prototype__");var Ea=Symbol["for"]("__lambda__");var Aa=["name","length","caller","callee","arguments","prototype"];function xa(e){return!Aa.includes(e)}function Fa(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function ka(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function Ca(e){return e&&e[Ea]}function Oa(e){return e&&e[wa]}function Sa(e){return Ca(e)&&!e[Da]&&!Oa(e)&&!_a(e)}function Ba(e){var t=Symbol["for"]("__native__");return Xu(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function ja(e){var g;switch(e){case Symbol["for"]("letrec"):g="letrec";break;case Symbol["for"]("let"):g="let";break;case Symbol["for"]("let*"):g="let*";break;default:throw new Error("Invalid let_macro value")}return Vu.defmacro(g,function(t,e){var f=e.dynamic_scope,l=e.error,n=e.macro_expand;var h;if(t.car instanceof L){if(!(t.cdr.car instanceof M||t.cdr.car===U)){throw new Error("let require list of pairs")}var r;if(t.cdr.car===U){h=U;r=U}else{r=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return M.fromArray([L("letrec"),[[t.car,M(L("lambda"),M(r,t.cdr.cdr))]],M(t.car,h)])}else if(n){return}var p=this;h=qo.get("list->array")(t.car);var _=p.inherit(g);var d,v;if(g==="let*"){v=_}else if(g==="let"){d=[]}var y=0;function m(){var e=new M(new L("begin"),t.cdr);return _s(e,{env:_,dynamic_scope:f,error:l})}return function t(){var r=h[y++];if(f){f=g==="let*"?_:p}if(!r){if(d&&d.length){var e=d.map(function(e){return e.value});var n=e.filter(ra);if(n.length){return Ci(e).then(function(e){for(var t=0,r=e.length;t<r;++t){_.set(d[t].name,e[t])}}).then(m)}else{var i=hn(d),u;try{for(i.s();!(u=i.n()).done;){var a=u.value,o=a.name,s=a.value;_.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return m()}else{if(g==="let"){v=p}else if(g==="letrec"){v=_}var c=_s(r.cdr.car,{env:v,dynamic_scope:f,error:l});if(g==="let*"){v=_=v.inherit("let*["+y+"]")}if(d){d.push({name:r.car,value:c});return t()}else{return Yi(c,function(e){_.set(r.car,e);return t()})}}}()})}function Ia(e,s){return new Vu(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;var i=this;if(r){r=this}var u=e;var a=[];while(u instanceof M){a.push(_s(u.car,{env:i,dynamic_scope:r,error:n}));u=u.cdr}var o=a.filter(ra).length;if(o){return Ci(a).then(s.bind(this))}else{return s.call(this,a)}})}function Pa(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){h("",e,"number")});return e.apply(void 0,r)}function Na(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){h("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function Ra(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){h("compose",e,"function",t+1)});return Na.apply(void 0,q(t.reverse()))}function Ta(a,o){var s=this;return function e(t,r){h(a,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),u=2;u<n;u++){i[u-2]=arguments[u]}if(i.some(Zu)){if(typeof r==="number"){return C(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function La(e,t){return Va(e+1,Ya(Pa,t))}var Ua=Ya(La,1);var Ma=Ya(La,2);function qa(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(q(t))}return t.reduce(Ma(n))}}function Ya(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}h("curry",u,"function");var a=u.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=a){return u.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function Va(n,i){h("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,q(t.slice(0,n)))}}function za(e){if(typeof this!=="undefined"&&!(this instanceof za)||typeof this==="undefined"){return new za(e)}if(e instanceof $a){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(za.__names__[e]){t=e;e=za.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=za.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}za.__names__=Un;za.__rev_names__={};Object.keys(za.__names__).forEach(function(e){var t=za.__names__[e];za.__rev_names__[t]=e});za.prototype.toUpperCase=function(){return za(this.__char__.toUpperCase())};za.prototype.toLowerCase=function(){return za(this.__char__.toLowerCase())};za.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};za.prototype.valueOf=za.prototype.serialize=function(){return this.__char__};function $a(e){if(typeof this!=="undefined"&&!(this instanceof $a)||typeof this==="undefined"){return new $a(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){h("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var Ja=["length","constructor"];var Ka=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!Ja.includes(e)});var Ga=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var Ha=hn(Ka),Wa;try{for(Ha.s();!(Wa=Ha.n()).done;){var Qa=Wa.value;$a.prototype[Qa]=Ga(String.prototype[Qa])}}catch(e){Ha.e(e)}finally{Ha.f()}}$a.prototype[Symbol.iterator]=z.mark(function e(){var r,n,i,u;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=Array.from(this.__string__);n=0,i=r;case 2:if(!(n<i.length)){t.next=9;break}u=i[n];t.next=6;return za(u);case 6:n++;t.next=2;break;case 9:case"end":return t.stop()}}},e,this)});$a.prototype.serialize=function(){return this.valueOf()};$a.isString=function(e){return e instanceof $a||typeof e==="string"};$a.prototype.get=function(e){h("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};$a.prototype.cmp=function(e){h("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};$a.prototype.lower=function(){return $a(this.__string__.toLowerCase())};$a.prototype.upper=function(){return $a(this.__string__.toUpperCase())};$a.prototype.set=function(e,t){h("LString::set",e,"number");h("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof za){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty($a.prototype,"length",{get:function e(){return this.__string__.length}});$a.prototype.clone=function(){return $a(this.valueOf())};$a.prototype.fill=function(e){h("LString::fill",e,["string","character"]);if(e instanceof za){e=e.toString()}var t=this.__string__.length;this.__string__=new Array(t+1).join(e)};function C(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof C){return e}if(typeof this!=="undefined"&&!(this instanceof C)||typeof this==="undefined"){return new C(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=C.getType(e);if(C.types[r]){return C.types[r](e,t)}var n=e instanceof Array&&$a.isString(e[0])&&C.isNumber(e[1]);if(e instanceof C){return C(e.value)}if(!C.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(us(e)))}if(e===null){e=0}var i;if(n){var c=e,u=j(c,2),a=u[0],o=u[1];if(a instanceof $a){a=a.valueOf()}if(o instanceof C){o=o.valueOf()}var f=a.match(/^([+-])/);var l=false;if(f){a=a.replace(/^[+-]/,"");if(f[1]==="-"){l=true}}}if(Number.isNaN(e)){return uo(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var s;switch(o){case 8:s="0o";break;case 16:s="0x";break;case 2:s="0b";break;case 10:s="";break}if(typeof s==="undefined"){var h=BigInt(o);i=q(a).map(function(e,t){return BigInt(parseInt(e,o))*ro(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(s+a)}}else{i=BigInt(e)}if(l){i*=BigInt(-1)}}else{i=e}return lo(i,true)}else if(typeof xn!=="undefined"&&!(e instanceof xn)){if(e instanceof Array){return lo(p(xn,q(e)))}return lo(new xn(e))}else if(n){this.constant(parseInt(a,o),"integer")}else{this.constant(e,"integer")}}C.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};C.types={float:function e(t){return new uo(t)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!C.isComplex(t)){t={im:0,re:t}}return new io(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!C.isRational(t)){t={num:t,denom:1}}return new fo(t,r)}};C.prototype.serialize=function(){return this.__value__};C.prototype.isNaN=function(){return Number.isNaN(this.__value__)};C.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};C.isFloat=function e(t){return t instanceof uo||Number(t)===t&&t%1!==0};C.isNumber=function(e){return e instanceof C||C.isNative(e)||C.isBN(e)};C.isComplex=function(e){if(!e){return false}var t=e instanceof io||(C.isNumber(e.im)||Number.isNaN(e.im))&&(C.isNumber(e.re)||Number.isNaN(e.re));return t};C.isRational=function(e){if(!e){return false}return e instanceof fo||C.isNumber(e.num)&&C.isNumber(e.denom)};C.isInteger=function(e){if(!(C.isNative(e)||e instanceof C)){return false}if(C.isFloat(e)){return false}if(C.isRational(e)){return false}if(C.isComplex(e)){return false}return true};C.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};C.isBigInteger=function(e){return e instanceof lo||typeof e==="bigint"||C.isBN(e)};C.isBN=function(e){return typeof xn!=="undefined"&&e instanceof xn};C.getArgsType=function(e,t){if(e instanceof uo||t instanceof uo){return uo}if(e instanceof lo||t instanceof lo){return lo}return C};C.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};C.prototype.asType=function(e){var t=C.getType(this);return C.types[t]?C.types[t](e):C(e)};C.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof xn!=="undefined"&&!(this.value instanceof xn)};["floor","ceil","round"].forEach(function(e){C.prototype[e]=function(){if(this["float"]||C.isFloat(this.__value__)){return C(Math[e](this.__value__))}else{return C(Math[e](this.valueOf()))}}});C.prototype.valueOf=function(){if(C.isNative(this.__value__)){return Number(this.__value__)}else if(C.isBN(this.__value__)){return this.__value__.toNumber()}};var Za=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[uo(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[uo(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&uo(r.valueOf())]},integer:function e(t,r){return[t,r&&uo(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&uo(r.valueOf())]},complex:function e(t,r){return[{re:t,im:uo(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function f(e,t){var r=C.coerce(e.__re__,t.__re__),n=j(r,2),i=n[0],u=n[1];var a=C.coerce(e.__im__,t.__im__),o=j(a,2),s=o[0],c=o[1];return[{im:s,re:i},{im:c,re:u}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[uo(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:Xa(t.__type__,r.__im__.__type__,0)[0],re:Xa(t.__type__,r.__re__.__type__,t)[0]},{im:Xa(t.__type__,r.__im__.__type__,r.__im__)[0],re:Xa(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:Xa(r,e.__im__.__type__,0,e.__im__)[1],re:Xa(r,e.__re__.__type__,0,e.__re__)[1]},{im:Xa(r,e.__im__.__type__,0,0)[1],re:Xa(r,t.__type__,0,t)[1]}]}}}();function Xa(e,t,r,n){return Za[e][t](r,n)}C.coerce=function(e,t){var r=C.getType(e);var n=C.getType(t);if(!Za[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!Za[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=Za[r][n](e,t);return i.map(function(e){return C(e,true)})};C.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof C)){throw new Error("LNumber: you can't coerce ".concat(us(e)))}if(typeof e==="number"){e=C(e)}return C.coerce(this,e)};C.getType=function(e){if(e instanceof C){return e.__type__}if(C.isFloat(e)){return"float"}if(C.isComplex(e)){return"complex"}if(C.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof xn!=="undefined"&&!(e instanceof xn)){return"bigint"}};C.prototype.isFloat=function(){return!!(C.isFloat(this.__value__)||this["float"])};var eo={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var to={};Object.keys(eo).forEach(function(t){to[eo[t]]=t;C.prototype[t]=function(e){return this.op(eo[t],e)}});C._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};C.prototype.op=function(e,t){if(typeof t==="undefined"){return C(C._ops[e](this.valueOf()))}if(typeof t==="number"){t=C(t)}if(Number.isNaN(this.__value__)&&!C.isComplex(t)||!C.isComplex(this)&&Number.isNaN(t.__value__)){return C(NaN)}var r=this.coerce(t),n=j(r,2),i=n[0],u=n[1];if(i._op){return i._op(e,u)}return C(C._ops[e](i,u))};C.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return io({re:0,im:t})}return C(Math.sqrt(e))};var ro=function e(t,r){var n=typeof t==="bigint"?BigInt(1):1;return new Array(Number(r)).fill(0).reduce(function(e){return e*t},n)};var no=new Function("a,b","return a ** b");try{if(no(2,2)===4){ro=no}}catch(e){}C.prototype.pow=function(e){var t;var r=this.coerce(e),n=j(r,2),i=n[0],u=n[1];if(C.isNative(i.__value__)&&C.isNative(u.__value__)){t=ro(i.__value__,u.__value__)}else if(C.isBN(i.__value__)&&C.isBN(u.__value__)){t=this.__value__.pow(e.__value__)}else if(i.pow){return i.pow(u)}return C(t)};C.prototype.abs=function(){var e=this.__value__;if(C.isNative(this.__value__)){if(e<0){e=-e}}else if(C.isBN(e)){e.iabs()}return new C(e)};C.prototype.isOdd=function(){if(C.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}return this.__value__%2===1}else if(C.isBN(this.__value__)){return this.__value__.isOdd()}};C.prototype.isEven=function(){return!this.isOdd()};C.prototype.cmp=function(e){var t=this.coerce(e),r=j(t,2),n=r[0],i=r[1];function u(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(C.isNative(n.__value__)){return u(n,i)}else if(C.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof uo){return u(n,i)}};function io(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof io)||typeof this==="undefined"){return new io(e,t)}if(e instanceof io){return io({im:e.__im__,re:e.__re__})}if(C.isNumber(e)&&t){if(!t){return Number(e)}}else if(!C.isComplex(e)){var r="Invalid constructor call for LComplex expect &(:im <num> :re <num>) object but got ".concat(Pu(e));throw new Error(r)}var n=e.im instanceof C?e.im:C(e.im);var i=e.re instanceof C?e.re:C(e.re);this.constant(n,i)}io.prototype=Object.create(C.prototype);io.prototype.constructor=io;io.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};io.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};io.prototype.toRational=function(e){if(C.isFloat(this.__im__)&&C.isFloat(this.__re__)){var t=uo(this.__im__).toRational(e);var r=uo(this.__re__).toRational(e);return io({im:t,re:r})}return this};io.prototype.pow=function(e){throw new Error("Not yet implemented")};io.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};io.prototype.factor=function(){if(this.__im__ instanceof uo||this.__im__ instanceof uo){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof uo){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof uo){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};io.prototype.modulus=function(){return this.factor().sqrt()};io.prototype.conjugate=function(){return io({re:this.__re__,im:this.__im__.sub()})};io.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=uo(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=uo(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return io({im:r,re:t})};io.prototype.div=function(e){if(C.isNumber(e)&&!C.isComplex(e)){if(!(e instanceof C)){e=C(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return io({re:t,im:r})}else if(!C.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}if(this.cmp(e)===0){var n=this.coerce(e),i=j(n,2),f=i[0],u=i[1];var l=f.__im__.div(u.__im__);return l.coerce(u.__re__)[0]}var h=this.coerce(e),a=j(h,2),p=a[0],o=a[1];var s=o.factor();var _=o.conjugate();var c=p.mul(_);if(!C.isComplex(c)){return c.div(s)}var d=c.__re__.op("/",s);var v=c.__im__.op("/",s);return io({re:d,im:v})};io.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};io.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};io.prototype.complex_op=function(e,t,i){var u=this;var r=function e(t,r){var n=i(u.__re__,t,u.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0){return n.re}return io(n,true)}return n};if(typeof t==="undefined"){return r()}if(C.isNumber(t)&&!C.isComplex(t)){if(!(t instanceof C)){t=C(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!C.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var a=t.__re__ instanceof C?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof C?t.__im__:this.__im__.asType(t.__im__);return r(a,o)};io._op={"+":"add","-":"sub","*":"mul","/":"div"};io.prototype._op=function(e,t){var r=io._op[e];return this[r](t)};io.prototype.cmp=function(e){var t=this.coerce(e),r=j(t,2),n=r[0],i=r[1];var u=n.__re__.coerce(i.__re__),a=j(u,2),o=a[0],f=a[1];var s=o.cmp(f);if(s!==0){return s}else{var l=n.__im__.coerce(i.__im__),c=j(l,2),h=c[0],p=c[1];return h.cmp(p)}};io.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};io.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[Pu(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=Pu(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function uo(e){if(typeof this!=="undefined"&&!(this instanceof uo)||typeof this==="undefined"){return new uo(e)}if(!C.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof C){return uo(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}uo.prototype=Object.create(C.prototype);uo.prototype.constructor=uo;uo.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!C.isFloat(this.__value__)&&!e.match(/e/i)){var t=e+".0";return this._minus?"-"+t:t}return e.replace(/^([0-9]+)e/,"$1.0e")};uo.prototype._op=function(e,t){if(t instanceof C){t=t.__value__}var r=C._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return uo(r(this.__value__,t))};uo.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return ao(this.__value__.valueOf())}return oo(e.valueOf())(this.__value__.valueOf())};uo.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=uo(Math.sqrt(-e));return io({re:0,im:t})}return uo(Math.sqrt(e))};uo.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return uo(e)};var ao=oo(1e-10);function oo(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return fo({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function so(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=co(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=co(r,n)}else if(t.cmp(0)<0){i=C(co(n.sub(),r.sub())).sub()}else{i=C(0)}if(C.isFloat(t)||C.isFloat(e)){return uo(i)}return i}function co(e,t){var r=C(e).floor();var n=C(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=C(1).div(t.sub(n));var u=C(1).div(e.sub(r));return r.add(C(1).div(co(i,u)))}else{return r.add(C(1))}}function fo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof fo)||typeof this==="undefined"){return new fo(e,t)}if(!C.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof fo){r=C(e.__num__);n=C(e.__denom__)}else{r=C(e.num);n=C(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return C(r.div(n))}}this.constant(r,n)}fo.prototype=Object.create(C.prototype);fo.prototype.constructor=fo;fo.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};fo.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};fo.prototype.pow=function(e){var t=e.cmp(0);if(t===0){return C(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return fo({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};fo.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof uo||t instanceof uo){return e.div(t)}return fo({num:e,denom:t})};fo.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return fo({num:e,denom:t})};fo.prototype.cmp=function(e){return C(this.valueOf(),true).cmp(e)};fo.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof fo){t=C(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof fo){r=C(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};fo.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return C._ops["/"](this.__num__.value,this.__denom__.value)}return uo(this.__num__.valueOf()).div(this.__denom__.valueOf())};fo.prototype.mul=function(e){if(!(e instanceof C)){e=C(e)}if(C.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return fo({num:t,denom:r})}var n=C.coerce(this,e),i=j(n,2),u=i[0],a=i[1];return u.mul(a)};fo.prototype.div=function(e){if(!(e instanceof C)){e=C(e)}if(C.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return fo({num:t,denom:r})}var n=C.coerce(this,e),i=j(n,2),u=i[0],a=i[1];var o=u.div(a);return o};fo.prototype._op=function(e,t){return this[to[e]](t)};fo.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof C)){e=C(e)}if(C.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(fo({num:t,denom:r}))}if(!(e instanceof C)){e=C(e).sub()}else{e=e.sub()}var n=C.coerce(this,e),i=j(n,2),u=i[0],a=i[1];return u.add(a)};fo.prototype.add=function(e){if(!(e instanceof C)){e=C(e)}if(C.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var u,a;if(t!==r){a=r.mul(n).add(i.mul(t));u=t.mul(r)}else{a=n.add(i);u=t}return fo({num:a,denom:u})}if(C.isFloat(e)){return uo(this.valueOf()).add(e)}var o=C.coerce(this,e),s=j(o,2),c=s[0],f=s[1];return c.add(f)};function lo(e,t){if(typeof this!=="undefined"&&!(this instanceof lo)||typeof this==="undefined"){return new lo(e,t)}if(e instanceof lo){return lo(e.__value__,e._native)}if(!C.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}lo.prototype=Object.create(C.prototype);lo.prototype.constructor=lo;lo.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};lo.prototype.serialize=function(){return this.__value__.toString()};lo.prototype._op=function(e,t){if(typeof t==="undefined"){if(C.isBN(this.__value__)){e=lo.bn_op[e];return lo(this.__value__.clone()[e](),false)}return lo(C._ops[e](this.__value__),true)}if(C.isBN(this.__value__)&&C.isBN(t.__value__)){e=lo.bn_op[e];return lo(this.__value__.clone()[e](t),false)}var r=C._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return C(r)}return fo({num:this,denom:t})}return lo(r,true)};lo.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(C.isNative(this.__value__)){e=C(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(C.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return io({re:0,im:e})}return e};C.NaN=C(NaN);function ho(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof ho)||typeof this==="undefined"){return new ho(e)}h("InputPort",e,"function");$i(this,"__type__",xo);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){h("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,B(z.mark(function e(){var r;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new Li(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==Fo};this._make_defaults()}ho.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!C.isInteger(t)){var r=C.getType(t);Qo("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};ho.prototype._with_init_parser=function(o,s){var c=this;return B(z.mark(function e(){var r,n,i,u,a=arguments;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=a.length,i=new Array(n),u=0;u<n;u++){i[u]=a[u]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}}},e)}))};ho.prototype.is_open=function(){return this._with_parser!==null};ho.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};ho.prototype.toString=function(){return"#<input-port>"};function po(e){if(typeof this!=="undefined"&&!(this instanceof po)||typeof this==="undefined"){return new po(e)}h("OutputPort",e,"function");$i(this,"__type__",xo);this.write=e}po.prototype.is_open=function(){return this._closed!==true};po.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};po.prototype.flush=function(){};po.prototype.toString=function(){return"#<output-port>"};var _o=function(e){u(n,e);var r=fn(n);function n(e){var t;D(this,n);t=r.call(this,function(){var e;return(e=t)._write.apply(e,arguments)});h("BufferedOutputPort",e,"function");$i(i(t),"_fn",e,{hidden:true});$i(i(t),"_buffer",[],{hidden:true});return t}A(n,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var u=this._buffer[this._buffer.length-1];if(u.match(/\n$/)){this._buffer[this._buffer.length-1]=u.replace(/\n$/,"");this.flush()}}}}]);return n}(po);function vo(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof vo)||typeof this==="undefined"){return new vo(t)}h("OutputStringPort",t,"function");$i(this,"__type__",xo);$i(this,"__buffer__",[]);this.write=function(e){if(!$a.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}vo.prototype=Object.create(po.prototype);vo.prototype.constructor=vo;vo.prototype.toString=function(){return"#<output-port (string)>"};vo.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function yo(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof yo)||typeof this==="undefined"){return new yo(e,t)}h("OutputFilePort",e,"string");$i(this,"__filename__",e);$i(this,"_fd",t.valueOf(),{hidden:true});$i(this,"__type__",xo);this.write=function(e){if(!$a.isString(e)){e=Pu(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}yo.prototype=Object.create(po.prototype);yo.prototype.constructor=yo;yo.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};yo.prototype.internal=function(e){return Yo.get("**internal-env**").get(e)};yo.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{$i(n,"_fd",null,{hidden:true});po.prototype.close.call(n);t()}})})};yo.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function mo(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof mo)||typeof this==="undefined"){return new mo(e)}h("InputStringPort",e,"string");t=t||qo;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new Li(e,{env:t})}return r.__parser__});$i(this,"__type__",xo);this._make_defaults()}mo.prototype.char_ready=function(){return true};mo.prototype=Object.create(ho.prototype);mo.prototype.constructor=mo;mo.prototype.toString=function(){return"#<input-port (string)>"};function go(e){if(typeof this!=="undefined"&&!(this instanceof go)||typeof this==="undefined"){return new go(e)}h("InputByteVectorPort",e,"uint8array");$i(this,"__vector__",e);$i(this,"__type__",Ao);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){h("InputByteVectorPort::__index__",t,"number");if(t instanceof C){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}go.prototype=Object.create(ho.prototype);go.prototype.constructor=go;go.prototype.toString=function(){return"#<input-port (bytevector)>"};go.prototype.close=function(){var t=this;$i(this,"__vector__",U);["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=function(){throw new Error("Input-binary-port: port is closed")}});this.char_ready=function(){return false}};go.prototype.u8_ready=function(){return true};go.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return Fo}return this.__vector__[this.__index__]};go.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};go.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};go.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===Fo){return Fo}return this.__vector__.slice(this.__index__,e)};function bo(){if(typeof this!=="undefined"&&!(this instanceof bo)||typeof this==="undefined"){return new bo}$i(this,"__type__",Ao);$i(this,"_buffer",[],{hidden:true});this.write=function(e){h("write",e,["number","uint8array"]);if(C.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,q(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}bo.prototype=Object.create(po.prototype);bo.prototype.constructor=bo;bo.prototype.close=function(){po.prototype.close.call(this);$i(this,"_buffer",null,{hidden:true})};bo.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};bo.prototype.write_u8=function(e){h("OutputByteVectorPort::write_u8",e,"number");this.write(e)};bo.prototype.write_u8_vector=function(e){h("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};bo.prototype.toString=function(){return"#<output-port (bytevector)>"};bo.prototype.valueOf=function(){return this.__buffer__};function wo(e,t){if(typeof this!=="undefined"&&!(this instanceof wo)||typeof this==="undefined"){return new wo(e,t)}mo.call(this,e);h("InputFilePort",t,"string");$i(this,"__filename__",t)}wo.prototype=Object.create(mo.prototype);wo.prototype.constructor=wo;wo.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function Do(e,t){if(typeof this!=="undefined"&&!(this instanceof Do)||typeof this==="undefined"){return new Do(e,t)}go.call(this,e);h("InputBinaryFilePort",t,"string");$i(this,"__filename__",t)}Do.prototype=Object.create(go.prototype);Do.prototype.constructor=Do;Do.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function Eo(e,t){if(typeof this!=="undefined"&&!(this instanceof Eo)||typeof this==="undefined"){return new Eo(e,t)}h("OutputBinaryFilePort",e,"string");$i(this,"__filename__",e);$i(this,"_fd",t.valueOf(),{hidden:true});$i(this,"__type__",Ao);var u,r;this.write=function(e){var n=this;h("write",e,["number","uint8array"]);var i;if(!u){u=this.internal("fs")}if(!r){r=this.internal("Buffer")}if(C.isNumber(e)){i=r.from([e.valueOf()])}else{i=r.from(Array.from(e))}return new Promise(function(t,r){u.write(n._fd,i,function(e){if(e){r(e)}else{t()}})})}}Eo.prototype=Object.create(yo.prototype);Eo.prototype.constructor=Eo;Eo.prototype.write_u8=function(e){h("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Eo.prototype.write_u8_vector=function(e){h("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var Ao=Symbol["for"]("binary");var xo=Symbol["for"]("text");var Fo=new ko;function ko(){}ko.prototype.toString=function(){return"#<eof>"};function Co(e){var c=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.stderr,n=t.stdin,i=t.stdout,u=t.command_line,a=u===void 0?null:u,o=F(t,cn);if(typeof this!=="undefined"&&!(this instanceof Co)||typeof this==="undefined"){return new Co(e,vn({stdin:n,stdout:i,stderr:r,command_line:a},o))}if(typeof e==="undefined"){e="anonymous"}this.__env__=Yo.inherit(e,o);this.__env__.set("parent.frame",y("parent.frame",function(){return c.__env__},qo.__env__["parent.frame"].__doc__));var f="**interaction-environment-defaults**";this.set(f,Ou(o).concat(f));var s=Lo.inherit("internal-".concat(e));if(pa(n)){s.set("stdin",n)}if(pa(r)){s.set("stderr",r)}if(pa(i)){s.set("stdout",i)}s.set("command-line",a);Vo(this.__env__,s)}Co.prototype.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;h("Interpreter::exec",e,["string","array"],1);h("Interpreter::exec",t,"boolean",2);qo.set("**interaction-environment**",this.__env__);if(r===null){r=this.__env__}return vs(e,r,t?r:false)};Co.prototype.get=function(e){var t=this.__env__.get(e);if(Xu(t)){return t.bind(this.__env__)}return t};Co.prototype.set=function(e,t){return this.__env__.set(e,t)};Co.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function Oo(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}Oo.prototype=new Error;Oo.prototype.constructor=Oo;function So(e,t,r){if(arguments.length===1){if(_(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}So.prototype.list=function(){return Ou(this.__env__)};So.prototype.fs=function(){return this.get("**fs**")};So.prototype.unset=function(e){if(e instanceof L){e=e.valueOf()}if(e instanceof $a){e=e.valueOf()}delete this.__env__[e]};So.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(_(e)==="object"){t=e}if(!e||_(e)==="object"){e="child of "+(this.__name__||"unknown")}return new So(t||{},this,e)};So.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof L){e=e.__name__}if(e instanceof $a){e=e.valueOf()}if(t){if(!r){t=Hi(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};So.prototype.newFrame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",y("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!(t instanceof So)){return U}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},qo.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};So.prototype._lookup=function(e){if(e instanceof L){e=e.__name__}if(e instanceof $a){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return Bo(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};So.prototype.toString=function(){return"#<environment:"+this.__name__+">"};So.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new So(r,this.__parent__,this.__name__)};So.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";h("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function Bo(e){if(typeof this!=="undefined"&&!(this instanceof Bo)||typeof this==="undefined"){return new Bo(e)}this.value=e}Bo.isUndefined=function(e){return e instanceof Bo&&typeof e.value==="undefined"};Bo.prototype.valueOf=function(){return this.value};function jo(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof jo)||typeof this==="undefined"){return new jo(e)}this.__values__=e}jo.prototype.toString=function(){return this.__values__.map(function(e){return Pu(e)}).join("\n")};jo.prototype.valueOf=function(){return this.__values__};So.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};h("Environment::get",e,["symbol","string"]);var r=t.throwError,c=r===void 0?true:r;var n=e;if(n instanceof L||n instanceof $a){n=n.valueOf()}var i=this._lookup(n);if(i instanceof Bo){if(Bo.isUndefined(i)){return undefined}return oa(i.valueOf())}var u;if(e instanceof L&&e[L.object]){u=e[L.object]}else if(typeof n==="string"){u=n.split(".").filter(Boolean)}if(u&&u.length>0){var f=u,a=m(f),o=a[0],s=a.slice(1);i=this._lookup(o);if(s.length){try{if(i instanceof Bo){i=i.valueOf()}else{i=No(gn,o);if(Xu(i)){i=sa(i)}}if(typeof i!=="undefined"){return No.apply(void 0,[i].concat(q(s)))}}catch(e){throw e}}else if(i instanceof Bo){return oa(i.valueOf())}i=No(gn,n)}if(typeof i!=="undefined"){return i}if(c){throw new Error("Unbound variable `"+n.toString()+"'")}};So.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;h("Environment::set",e,["string","symbol"]);if(C.isNumber(t)){t=C(t)}if(e instanceof L){e=e.__name__}if(e instanceof $a){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};So.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&wu(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};So.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};So.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};So.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function Io(e){if(ra(e)){return e.then(Io)}if(e instanceof M||e instanceof L){e[ya]=true}return e}var Po=Mi(wi('(lambda ()\n                                      "[native code]"\n                                      (throw "Invalid Invocation"))'))[0];var No=y("get",function c(e){var t;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var u=n.length;while(n.length){if(Xu(e)&&_(n[0])!=="symbol"){e=sa(e)}var a=n.shift();var o=aa(a);if(o==="then"&&e instanceof ki){t=ki.prototype.then}else if(o==="__code__"&&Xu(e)&&typeof e.__code__==="undefined"){t=Po}else{t=e[o]}if(typeof t==="undefined"){if(n.length){throw new Error("Try to get ".concat(n[0]," from undefined"))}return t}else{var s;if(n.length-1<u){s=e}t=oa(t,s)}e=t}return t},"(. obj . args)\n    (get obj . args)\n\n    This function uses an object as a base and keeps using arguments to get the\n    property of JavaScript object. Arguments need to be a strings.\n    e.g. `(. console \"log\")` if you use any function inside LIPS it\n    will be weakly bound (can be rebound), so you can call this log function\n    without problem unlike in JavaScript when you use\n    `var log = console.log`.\n    `get` is an alias because . doesn't work everywhere, e.g. you can't\n    pass it as an argument.");function Ro(e,t){var r=To(e,"**internal-env**");return r.get(t)}function To(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var Lo=new So({stdout:new _o(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new _o(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:ho(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var Uo=C(NaN);var Mo={true:true,false:false,"#true":true,"#false":false,"#t":true,"#f":false,nil:U,undefined:undefined,null:null,NaN:Uo,"+nan.0":Uo,"-nan.0":Uo};var qo=new So({eof:Fo,undefined:undefined,"peek-char":y("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Ro(this,"stdin")}Xo("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n        This function reads and returns a character from the string\n        port, or, if there is no more data in the string port, it\n        returns an EOF."),"read-line":y("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Ro(this,"stdin")}Xo("read-line",e,"input-port");return e.read_line()},"(read-char port)\n\n        This function reads and returns the next line from the input\n        port."),"read-char":y("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Ro(this,"stdin")}Xo("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n        This function reads and returns the next character from the\n        input port."),read:y("read",function(){var e=B(z.mark(function e(){var r,n,i,u,a,o,s,c,f=arguments;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=f.length>0&&f[0]!==undefined?f[0]:null;if(!$a.isString(r)){t.next=30;break}n=false;i=false;t.prev=4;a=yn(Mi(r,this));case 6:t.next=8;return a.next();case 8:if(!(n=!(o=t.sent).done)){t.next=14;break}s=o.value;return t.abrupt("return",s);case 11:n=false;t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16;t.t0=t["catch"](4);i=true;u=t.t0;case 20:t.prev=20;t.prev=21;if(!(n&&a["return"]!=null)){t.next=25;break}t.next=25;return a["return"]();case 25:t.prev=25;if(!i){t.next=28;break}throw u;case 28:return t.finish(25);case 29:return t.finish(20);case 30:if(r===null){c=Ro(this,"stdin")}else{c=r}Xo("read",c,"input-port");return t.abrupt("return",c.read.call(this));case 33:case"end":return t.stop()}}},e,this,[[4,16,20,30],[21,,25,29]])}));function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n        This function, if used with a string, will parse it and\n        return the LIPS code, if there is any. If called with a\n        port, it will parse the next item from the port. If called\n        without an input, it will read a string from standard input\n        (using the browser's prompt or a user defined input method)\n        and calls itself with that string. This function can be used\n        together with `eval` to evaluate code from a string."),pprint:y("pprint",function e(t){if(t instanceof M){t=new Gs.Formatter(t.toString(true))["break"]().format();qo.get("display").call(qo,t)}else{qo.get("write").call(qo,t)}qo.get("newline").call(qo)},"(pprint expression)\n\n        This function will pretty print its input to stdout. If it is called\n        with a non-list, it will just call the print function on its\n        input."),print:y("print",function e(){var t=qo.get("display");var r=qo.get("newline");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}i.forEach(function(e){t.call(qo,e);r.call(qo)})},"(print . args)\n\n        This function converts each input into a string and prints\n        the result to the standard output (by default it's the\n        console but it can be defined in user code). This function\n        calls `(newline)` after printing each input."),format:y("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}h("format",t,"string");var u=/(~[as%~])/g;var a=t.match(/(~[as])/g);if(a&&a.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=qo.get("repr");t=t.replace(u,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});a=t.match(/~([\S])/);if(a){throw new Error("format: Unrecognized escape sequence ".concat(a[1]))}return t},"(format string n1 n2 ...)\n\n        This function accepts a string template and replaces any\n        escape sequences in its inputs:\n\n        * ~a value as if printed with `display`\n        * ~s value as if printed with `write`\n        * ~% newline character\n        * ~~ literal tilde '~'\n\n        If there are missing inputs or other escape characters it\n        will error."),display:y("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=Ro(this,"stdout")}else{h("display",r,"output-port")}var n=qo.get("repr")(t);r.write.call(qo,n)},"(display string [port])\n\n        This function outputs the string to the standard output or\n        the port if given. No newline."),"display-error":y("display-error",function e(){var t=Ro(this,"stderr");var r=qo.get("repr");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}var a=i.map(r).join(" ");t.write.call(qo,a);qo.get("newline")(t)},"(display-error . args)\n\n        Display an error message on stderr."),"%same-functions":y("%same-functions",function(e,t){if(!Xu(e)){return false}if(!Xu(t)){return false}return sa(e)===sa(t)},"(%same-functions a b)\n\n        A helper function that checks if the two input functions are\n        the same."),help:y(new Vu("help",function(e,t){var r=t.dynamic_scope,n=t.error;var i;if(e.car instanceof L){i=e.car}else if(e.car instanceof M&&e.car.car instanceof L){i=e.car.car}else{var u=this;if(r){r=this}var a=_s(e.car,{env:u,error:n,dynamic_scope:r});if(a&&a.__doc__){return a.__doc__}return}var o;var s=this.get(i);o=s&&s.__doc__;if(o){return o}var c=this.ref(i);if(c){o=c.doc(i);if(o){return o}}}),"(help object)\n\n         This macro returns documentation for a function or macro.\n         You can save the function or macro in a variable and use it\n         here. But getting help for a variable requires passing the\n         variable in a `quote`."),cons:y("cons",function e(t,r){return new M(t,r)},"(cons left right)\n\n        This function returns a new list with the first appended\n        before the second. If the second is not a list cons will\n        return a dotted pair."),car:y("car",function e(t){h("car",t,"pair");return t.car},"(car pair)\n\n        This function returns the car (item 1) of the list."),cdr:y("cdr",function e(t){h("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n        This function returns the cdr (all but first) of the list."),"set!":y(new Vu("set!",function(e){var c=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;if(r){r=this}var i=this;var u;var a=_s(e.cdr.car,{env:this,dynamic_scope:r,error:n});a=as(a);function o(t,r,n){if(ra(t)){return t.then(function(e){return o(t,e,n)})}if(ra(r)){return r.then(function(e){return o(t,e,n)})}if(ra(n)){return n.then(function(e){return o(t,r,e)})}i.get("set-obj!").call(i,t,r,n);return n}if(e.car instanceof M&&L.is(e.car.car,".")){var f=e.car.cdr.car;var l=e.car.cdr.cdr.car;var h=_s(f,{env:this,dynamic_scope:r,error:n});var p=_s(l,{env:this,dynamic_scope:r,error:n});return o(h,p,a)}if(!(e.car instanceof L)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var s=e.car.valueOf();u=this.ref(e.car.__name__);return Yi(a,function(e){if(!u){var t=s.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=c.get(n,{throwError:false});if(i){o(i,r,e);return}}throw new Error("Unbound variable `"+s+"'")}u.set(s,e)})}),"(set! name value)\n\n         Macro that can be used to set the value of the variable or slot (mutate it).\n         set! searches the scope chain until it finds first non empty slot and sets it."),"unset!":y(new Vu("set!",function(e){if(!(e.car instanceof L)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n         Function to delete the specified name from environment.\n         Trying to access the name afterwards will error."),"set-car!":y("set-car!",function(e,t){h("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n         Function that sets the car (first item) of the list/pair to specified value.\n         The old value is lost."),"set-cdr!":y("set-cdr!",function(e,t){h("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n         Function that sets the cdr (tail) of the list/pair to specified value.\n         It will destroy the list. The old tail is lost."),"empty?":y("empty?",function(e){return typeof e==="undefined"||e===U},"(empty? object)\n\n         Function that returns #t if value is nil (an empty list) or undefined."),gensym:y("gensym",Fi,"(gensym)\n\n         Generates a unique symbol that is not bound anywhere,\n         to use with macros as meta name."),load:y("load",function e(o,t){h("load",o,"string");var s=this;if(s.__name__==="__frame__"){s=s.__parent__}if(!(t instanceof So)){if(s===qo){t=s}else{t=this.get("**interaction-environment**")}}var c="**module-path**";var f=qo.get(c,{throwError:false});o=o.valueOf();if(!o.match(/.[^.]+$/)){o+=".scm"}var r=o.match(/\.xcb$/);function l(e){if(r){e=Vs(e)}else{if(us(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/^\{/)){e=Rs(e)}}return vs(e,t)}function n(e){return gn.fetch(e).then(function(e){return r?e.arrayBuffer():e.text()}).then(function(e){if(r){e=new Uint8Array(e)}return e})}if(Go()){return new Promise(function(){var r=B(z.mark(function e(r,n){var i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i=An("path");if(!f){t.next=6;break}f=f.valueOf();o=i.join(f,o);t.next=12;break;case 6:u=s.get("command-line",{throwError:false});if(!u){t.next=11;break}t.next=10;return u();case 10:a=t.sent;case 11:if(a&&a!==U){process.cwd();o=i.join(i.dirname(a.car.valueOf()),o)}case 12:qo.set(c,i.dirname(o));An("fs").readFile(o,function(e,t){if(e){n(e);qo.set(c,f)}else{try{l(t).then(function(){r();qo.set(c,f)})["catch"](n)}catch(e){n(e)}}});case 14:case"end":return t.stop()}}},e)}));return function(e,t){return r.apply(this,arguments)}}())}if(f){f=f.valueOf();o=f+"/"+o.replace(/^\.?\/?/,"")}return n(o).then(function(e){qo.set(c,o.replace(/\/[^/]*$/,""));return l(e)}).then(function(){})["finally"](function(){qo.set(c,f)})},"(load filename)\n        (load filename environment)\n\n        Fetches the file (from disk or network) and evaluates its content as LIPS code.\n        If the second argument is provided and it's an environment the evaluation\n        will happen in that environment."),do:y(new Vu("do",function(){var r=B(z.mark(function e(r,h){var n,i,u,o,s,a,c,f,l,p,_;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=h.dynamic_scope,i=h.error;u=this;if(n){n=u}o=u.inherit("do");s=r.car;a=r.cdr.car;c=r.cdr.cdr;if(c!==U){c=new M(L("begin"),c)}f={env:u,dynamic_scope:n,error:i};l=s;case 10:if(!(l!==U)){t.next=21;break}p=l.car;t.t0=o;t.t1=p.car;t.next=16;return _s(p.cdr.car,f);case 16:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);l=l.cdr;t.next=10;break;case 21:f={env:o,dynamic_scope:n,error:i};_=z.mark(function e(){var r,n,i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(c!==U)){t.next=3;break}t.next=3;return Gs.evaluate(c,f);case 3:r=s;n={};case 5:if(!(r!==U)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==U)){t.next=12;break}t.next=10;return _s(i.cdr.cdr.car,f);case 10:u=t.sent;n[i.car.valueOf()]=u;case 12:r=r.cdr;t.next=5;break;case 15:a=Object.getOwnPropertySymbols(n);Object.keys(n).concat(a).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}}},e)});case 23:t.next=25;return _s(a.car,f);case 25:t.t3=t.sent;if(!(t.t3===false)){t.next=30;break}return t.delegateYield(_(),"t4",28);case 28:t.next=23;break;case 30:if(!(a.cdr!==U)){t.next=34;break}t.next=33;return _s(a.cdr.car,f);case 33:return t.abrupt("return",t.sent);case 34:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test return) . body)\n\n         Iteration macro that evaluates the expression body in scope of the variables.\n         On each loop it changes the variables according to the <next> expression and runs\n         test to check if the loop should continue. If test is a single value, the macro\n         will return undefined. If the test is a pair of expressions the macro will\n         evaluate and return the second expression after the loop exits."),if:y(new Vu("if",function(r,e){var n=e.dynamic_scope,i=e.error;if(n){n=this}var u=this;var t=function e(t){if(t===false){return _s(r.cdr.cdr.car,{env:u,dynamic_scope:n,error:i})}else{return _s(r.cdr.car,{env:u,dynamic_scope:n,error:i})}};if(r===U){throw new Error("too few expressions for `if`")}var a=_s(r.car,{env:u,dynamic_scope:n,error:i});return Yi(a,t)}),"(if cond true-expr false-expr)\n\n         Macro that evaluates cond expression and if the value is true, it\n         evaluates and returns true-expression, if not it evaluates and returns\n         false-expression."),"let-env":new Vu("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_scope,n=e.error;h("let-env",t,"pair");var i=_s(t.car,{env:this,dynamic_scope:r,error:n});return Yi(i,function(e){h("let-env",e,"environment");return _s(M(L("begin"),t.cdr),{env:e,dynamic_scope:r,error:n})})},"(let-env env . body)\n\n        Special macro that evaluates body in context of given environment\n        object."),letrec:y(ja(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to\n         names and then evaluates the body in context of that environment.\n         Values are evaluated sequentially and the next value can access the\n         previous values/names."),"letrec*":y(ja(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b) ...) . body)\n\n         Same as letrec but the order of execution of the binding is guaranteed,\n         so you can use recursive code as well as referencing the previous binding.\n\n         In LIPS both letrec and letrec* behave the same."),"let*":y(ja(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b) ...) . body)\n\n         Macro similar to `let`, but the subsequent bindings after the first\n         are evaluated in the environment including the previous let variables,\n         so you can define one variable, and use it in the next's definition."),let:y(ja(Symbol["for"]("let")),"(let ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to names,\n         and then evaluates the body in context of that environment.  Values are evaluated\n         sequentially but you can't access previous values/names when the next are\n         evaluated. You can only get them in the body of the let expression.  (If you want\n         to define multiple variables and use them in each other's definitions, use\n         `let*`.)"),"begin*":y(Ia("begin*",function(e){return e.pop()}),"(begin* . body)\n\n         This macro is a parallel version of begin. It evaluates each expression\n         in the body and if it's a promise it will await it in parallel and return\n         the value of the last expression (i.e. it uses Promise.all())."),begin:y(new Vu("begin",function(e,t){var n=Object.assign({},t);var i=qo.get("list->array")(e);if(n.dynamic_scope){n.dynamic_scope=this}n.env=this;var u;return function t(){if(i.length){var e=i.shift();var r=_s(e,n);return Yi(r,function(e){u=e;return t()})}else{return u}}()}),"(begin . args)\n\n         Macro that runs a list of expressions in order and returns the value\n         of the last one. It can be used in places where you can only have a\n         single expression, like (if)."),ignore:new Vu("ignore",function(e,t){var r=t.dynamic_scope,n=t.error;var i={env:this,error:n};if(r){i.dynamic_scope=this}_s(new M(new L("begin"),e),i)},"(ignore . body)\n\n        Macro that will evaluate the expression and swallow any promises that may\n        be created. It will discard any value that may be returned by the last body\n        expression. The code should have side effects and/or when it's promise\n        it should resolve to undefined."),"call/cc":y(Vu.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=vn({env:this},t);return Yi(_s(e.car,r),function(e){if(Xu(e)){return e(new hs(null))}})}),"(call/cc proc)\n\n         Call-with-current-continuation.\n\n         NOT SUPPORTED BY LIPS RIGHT NOW"),define:y(Vu.defmacro("define",function(r,e){var n=this;if(r.car instanceof M&&r.car.car instanceof L){var t=new M(new L("define"),new M(r.car.car,new M(new M(new L("lambda"),new M(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}if(e.dynamic_scope){e.dynamic_scope=this}e.env=n;var i=r.cdr.car;var u;if(i instanceof M){i=_s(i,e);u=true}else if(i instanceof L){i=n.get(i)}h("define",r.car,"symbol");return Yi(i,function(e){if(n.__name__===Ku.__merge_env__){n=n.__parent__}if(u&&(Xu(e)&&Ca(e)||e instanceof Ku)){e.__name__=r.car.valueOf();if(e.__name__ instanceof $a){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof M&&$a.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n         (define name expression "doc string")\n         (define (function-name . args) . body)\n\n         Macro for defining values. It can be used to define variables,\n         or functions. If the first argument is list it will create a function\n         with name being first element of the list. This form expands to\n         `(define function-name (lambda args body))`'),"set-obj!":y("set-obj!",function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=_(e);if(Zu(e)||i!=="object"&&i!=="function"){var u=Qo("set-obj!",us(e),["object","function"]);throw new Error(u)}h("set-obj!",t,["string","symbol","number"]);e=sa(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(Nu(e)&&Xu(r)){e[t]=sa(r);e[t][Da]=true}else if(Xu(r)||ts(r)||r===U){e[t]=r}else{e[t]=r&&!Nu(r)?r.valueOf():r}if(Du){var a=e[t];Object.defineProperty(e,t,vn(vn({},n),{},{value:a}))}},"(set-obj! obj key value)\n        (set-obj! obj key value props)\n\n        Function set a property of a JavaScript object. props should be a vector of pairs,\n        passed to Object.defineProperty."),"null-environment":y("null-environment",function(){return qo.inherit("null")},"(null-environment)\n\n        Returns a clean environment with only the standard library."),values:y("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return jo(r)},"(values a1 a2 ...)\n\n        If called with more then one element it will create a special\n        Values object that can be used in the call-with-values function."),"call-with-values":y("call-with-values",function(e,t){h("call-with-values",e,"function",1);h("call-with-values",t,"function",2);var r=e();if(r instanceof jo){return t.apply(void 0,q(r.valueOf()))}return t(r)},"(call-with-values producer consumer)\n\n        Calls the producer procedure with no arguments, then calls the\n        consumer procedure with the returned value as an argument -- unless\n        the returned value is a special Values object created by (values), if it is\n        the values are unpacked and the consumer is called with multiple arguments."),"current-environment":y("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n        Function that returns the current environment (they're first-class objects!)"),"parent.frame":y("parent.frame",function(){return Yo},"(parent.frame)\n\n        Returns the parent environment if called from inside a function.\n        If no parent frame can be found it returns nil."),eval:y("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return _s(e,{env:t,error:function e(t){var e=qo.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n        (eval expr environment)\n\n        Function that evaluates LIPS Scheme code. If the second argument is provided\n        it will be the environment that the code is evaluated in."),lambda:new Vu("lambda",function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.dynamic_scope,p=e.error;var _=this;var d;if(l.cdr instanceof M&&$a.isString(l.cdr.car)&&l.cdr.cdr!==U){d=l.cdr.car.valueOf()}function v(){var e;if(h){if(!(this instanceof So)){e=_}else{e=this}}else{e=_}e=e.inherit("lambda");var t=l.car;var r=0;var n;if(typeof this!=="undefined"&&!(this instanceof So)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}e.set("this",this)}for(var i=arguments.length,u=new Array(i),a=0;a<i;a++){u[a]=arguments[a]}if(this instanceof So){var o={throwError:false};e.set("arguments",this.get("arguments",o));e.set("parent.frame",this.get("parent.frame",o))}else{var s=u.slice();s.callee=v;s.env=e;e.set("arguments",s)}if(t instanceof L||t!==U){while(true){if(t.car!==U){if(t instanceof L){n=Io(M.fromArray(u.slice(r),false));e.__env__[t.__name__]=n;break}else{n=u[r];e.__env__[t.car.__name__]=n}}if(t.cdr===U){break}r++;t=t.cdr}}if(h){h=e}var c=d?l.cdr.cdr:l.cdr;var f=new M(new L("begin"),c);return _s(f,{env:e,dynamic_scope:h,error:p})}var t=l.car instanceof M?l.car.length():null;v.__code__=new M(new L("lambda"),l);v[Ea]=true;if(!(l.car instanceof M)){return y(v,d,true)}return y(ka(v,t),d,true)},"(lambda (a b) body)\n        (lambda args body)\n        (lambda (a b . rest) body)\n\n        The lambda macro creates a new anonymous function. If the first element of\n        the body is a string and there is more elements the string is used as the\n        documentation string, that can be read using (help fn)."),macroexpand:new Vu("macroexpand",Ju()),"macroexpand-1":new Vu("macroexpand-1",Ju(true)),"define-macro":y(new Vu(zu,function(o,e){var s=e.dynamic_scope,c=e.error;if(o.car instanceof M&&o.car.car instanceof L){var t=o.car.car.__name__;var f;if($a.isString(o.cdr.car)&&o.cdr.cdr instanceof M){f=o.cdr.car.valueOf()}var r=Vu.defmacro(t,function(e){var t=new So({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===U){break}if(r instanceof L){t.__env__[r.__name__]=n;break}else if(r.car!==U){if(n===U){t.__env__[r.car.__name__]=U}else{if(n.car instanceof M){n.car[ya]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===U){break}if(n!==U){n=n.cdr}r=r.cdr}if(s){s=t}var i={env:t,dynamic_scope:s,error:c};if(o.cdr instanceof M){var u=f?o.cdr.cdr:o.cdr;var a=u.reduce(function(e,t){return _s(t,i)});return Yi(a,function(e){if(_(e)==="object"){delete e[ya]}return e})}},f,true);r.__code__=new M(new L("define-macro"),o);this.set(t,r)}}),"(define-macro (name . args) body)\n\n         The meta-macro, that creates new macros. If the return value is a list structure\n         it will be evaluated where the macro is invoked from. You can use quasiquote `\n         and unquote , and unquote-splicing ,@ inside to create an expression that will be\n         evaluated at runtime. Macros works like this: if you pass any expression to a\n         macro the arguments will not be evaluated unless the macro's body explicitly\n         calls (eval) on it. Because of this a macro can manipulate the expression\n         (arguments) as lists."),"syntax-rules":new Vu("syntax-rules",function(y,e){var m=e.dynamic_scope,g=e.error;var b=this;function w(e){var t=[];while(e!==U){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==U){var t=e.car;if(!(t instanceof L)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(y.car instanceof L){t(y.cdr.car)}else{t(y.car)}var r=new Ku(function(e,f){var l=f.macro_expand;var t=b.inherit("syntax");if(m){m=t}var r=this;if(r.__name__===Ku.__merge_env__){var h=Object.getOwnPropertySymbols(r.__env__);h.forEach(function(e){r.__parent__.set(e,r.__env__[e])});r=r.__parent__}var p={env:t,dynamic_scope:m,error:g};var n,i,u;if(y.car instanceof L){n=y.car;u=w(y.cdr.car);i=y.cdr.cdr}else{n="...";u=w(y.car);i=y.cdr}try{while(i!==U){var a=i.car.car;var o=i.car.cdr.car;kn(a);var s=Hu(a,e,u,n,{expansion:this,define:b});if(s){if(Cn()){console.log(JSON.stringify(Cu(s),true,2));console.log("PATTERN: "+a.toString(true));console.log("MACRO: "+e.toString(true))}var _=[];var c=Qu({bindings:s,expr:o,symbols:u,scope:t,lex_scope:r,names:_,ellipsis:n});kn("OUPUT>>> "+c.toString());if(c){o=c}var d=r.merge(t,Ku.__merge_env__);if(l){return{expr:o,scope:d}}var v=_s(o,vn(vn({},p),{},{env:d}));return Wu(v,_)}i=i.cdr}}catch(e){e.message+=" in macro: ".concat(y.toString(true));throw e}throw new Error("Invalid Syntax ".concat(e.toString(true)))},b);r.__code__=y;return r},"(syntax-rules () (pattern expression) ...)\n\n        Base of hygienic macros, it will return a new syntax expander\n        that works like Lisp macros."),quote:y(new Vu("quote",function(e){return Io(e.car)}),"(quote expression) or 'expression\n\n         Macro that returns a single LIPS expression as data (it won't evaluate the\n         argument). It will return a list if put in front of LIPS code.\n         And if put in front of a symbol it will return the symbol itself, not the value\n         bound to that name."),"unquote-splicing":y("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code) or ,@code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        splices the list into quasiquote's result. If it is not the last element of the\n        expression, the computed value must be a pair."),unquote:y("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code) or ,code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        substitutes the value into quasiquote's result."),quasiquote:Vu.defmacro("quasiquote",function(e,t){var o=t.dynamic_scope,s=t.error;var c=this;if(o){o=c}function a(e){return e instanceof M||wu(e)||Array.isArray(e)}function h(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a;if(e instanceof M){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(ra(n)||ra(i)){return Ci([n,i]).then(function(e){var t=j(e,2),r=t[0],n=t[1];return new M(r,n)})}else{return new M(n,i)}}return e}function u(e,t){if(e instanceof M){if(t!==U){e.append(t)}}else{e=new M(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof M&&L.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function p(e,n,i){return e.reduce(function(e,t){if(!(t instanceof M)){e.push(t);return e}if(L.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=l(t.cdr,n+1,i)}else{r=_s(t.cdr.car,{env:c,dynamic_scope:o,error:s})}if(!(r instanceof M)){throw new Error("Expecting list ".concat(us(t)," found"))}return e.concat(r.to_array())}e.push(l(t,n,i));return e},[])}function _(n,i,u){var a={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof M){if(L.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<u){r=l(t.cdr.car,i,u)}else{r=_s(t.cdr.car,{env:c,dynamic_scope:o,error:s})}a[e]=r}else{a[e]=t}});if(Object.isFrozen(n)){Object.freeze(a)}return a}function f(i,e,t){if(e<t){return new M(new M(i.car.car,l(i.car.cdr,e,t)),U)}var n=[];return function e(t){var r=_s(t.car,{env:c,dynamic_scope:o,error:s});n.push(r);if(t.cdr instanceof M){return e(t.cdr)}return Yi(n,function(r){if(r.some(function(e){return!(e instanceof M)})){if(i.cdr instanceof M&&L.is(i.cdr.car,".")&&i.cdr.cdr instanceof M&&i.cdr.cdr.cdr===U){return i.cdr.cdr.car}if(!(i.cdr===U||i.cdr instanceof M)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof M&&r[0]===U)){return r[0]}}r=r.map(function(e){if(d.has(e)){return e.clone()}else{d.add(e);return e}});var n=l(i.cdr,0,1);if(n===U&&r[0]===U){return undefined}return Yi(n,function(e){if(r[0]===U){return e}if(r.length===1){return u(r[0],e)}var t=r.reduce(function(e,t){return u(e,t)});return u(t,e)})})}(i.car.cdr)}var d=new Set;function l(e,t,r){if(e instanceof M){if(e.car instanceof M){if(L.is(e.car.car,"unquote-splicing")){return f(e,t+1,r)}if(L.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof M&&e.car.cdr.car instanceof M&&L.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new M(new M(new L("unquote"),f(n,t+2,r)),U)}else if(e.car.cdr instanceof M&&e.car.cdr.cdr!==U){if(e.car.cdr.car instanceof M){var i=[];return function t(r){if(r===U){return M.fromArray(i)}return Yi(_s(r.car,{env:c,dynamic_scope:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(L.is(e.car,"quasiquote")){var u=l(e.cdr,t,r+1);return new M(e.car,u)}if(L.is(e.car,"quote")){return new M(e.car,l(e.cdr,t,r))}if(L.is(e.car,"unquote")){t++;if(t<r){return new M(new L("unquote"),l(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof M){if(e.cdr.cdr!==U){if(e.cdr.car instanceof M){var a=[];return function t(r){if(r===U){return M.fromArray(a)}return Yi(_s(r.car,{env:c,dynamic_scope:o,error:s}),function(e){a.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return _s(e.cdr.car,{env:c,dynamic_scope:o,error:s})}}else{return e.cdr}}return h(e,function(e){return l(e,t,r)})}else if(wu(e)){return _(e,t,r)}else if(e instanceof Array){return p(e,t,r)}return e}function n(e){if(e instanceof M){delete e[ya];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(wu(e.car)&&!r(Object.values(e.car))){return Io(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return Io(e.car)}if(e.car instanceof M&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return Io(e.car)}var i=l(e.car,0,1);return Yi(i,function(e){n(e);return Io(e)})},"(quasiquote list)\n\n        Similar macro to `quote` but inside it you can use special expressions (unquote\n        x) abbreviated to ,x that will evaluate x and insert its value verbatim or\n        (unquote-splicing x) abbreviated to ,@x that will evaluate x and splice the value\n        into the result. Best used with macros but it can be used outside."),clone:y("clone",function e(t){h("clone",t,"pair");return t.clone()},"(clone list)\n\n        Function that returns a clone of the list, that does not share any pairs with the\n        original, so the clone can be safely mutated without affecting the original."),append:y("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof M){return e.clone()}return e});return(t=qo.get("append!")).call.apply(t,[this].concat(q(n)))},"(append item ...)\n\n        Function that creates a new list with each argument appended end-to-end.\n        It will always return a new list and not modify its arguments."),"append!":y("append!",function(){var r=qo.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){h("append!",e,["nil","pair"]);if((t instanceof M||t===U)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(Zu(t)){return e}if(e===U){if(t===U){return U}return t}return e.append(t)},U)},"(append! arg1 ...)\n\n        Destructive version of append, it can modify the lists in place. It returns\n        a new list where each argument is appended to the end. It may modify\n        lists added as arguments."),reverse:y("reverse",function e(t){h("reverse",t,["array","pair","nil"]);if(t===U){return U}if(t instanceof M){var r=qo.get("list->array")(t).reverse();return qo.get("array->list")(r)}else if(!(t instanceof Array)){throw new Error(Qo("reverse",us(t),"array or pair"))}else{return t.reverse()}},"(reverse list)\n\n        Function that reverses the list or array. If value is not a list\n        or array it will error."),nth:y("nth",function e(t,r){h("nth",t,"number");h("nth",r,["array","pair"]);if(r instanceof M){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===U||n.haveCycles("cdr")){return U}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(Qo("nth",us(r),"array or pair",2))}},"(nth index obj)\n\n        Function that returns the nth element of the list or array.\n        If used with a non-indexable value it will error."),list:y("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new M(t,e)},U)},"(list . args)\n\n        Function that creates a new list out of its arguments."),substring:y("substring",function e(t,r,n){h("substring",t,"string");h("substring",r,"number");h("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n        Function that returns the slice of the string starting at start and ending\n        with end."),concat:y("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return h("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n        Function that creates a new string by joining its arguments."),join:y("join",function e(t,r){h("join",t,"string");h("join",r,["pair","nil"]);return qo.get("list->array")(r).join(t)},"(join separator list)\n\n        Function that returns a string by joining elements of the list using separator."),split:y("split",function e(t,r){h("split",t,["regex","string"]);h("split",r,"string");return qo.get("array->list")(r.split(t))},"(split separator string)\n\n        Function that creates a list by splitting string by separator which can\n        be a string or regular expression."),replace:y("replace",function e(t,r,n){h("replace",t,["regex","string"]);h("replace",r,["string","function"]);h("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n        Function that changes pattern to replacement inside string. Pattern can be a\n        string or regex and replacement can be function or string. See Javascript\n        String.replace()."),match:y("match",function e(t,r){h("match",t,["regex","string"]);h("match",r,"string");var n=r.match(t);return n?qo.get("array->list")(n):false},"(match pattern string)\n\n        Function that returns a match object from JavaScript as a list or #f if\n        no match."),search:y("search",function e(t,r){h("search",t,["regex","string"]);h("search",r,"string");return r.search(t)},"(search pattern string)\n\n        Function that returns the first found index of the pattern inside a string."),repr:y("repr",function e(t,r){return Pu(t,r)},"(repr obj)\n\n        Function that returns a LIPS code representation of the object as a string."),"escape-regex":y("escape-regex",function(e){h("escape-regex",e,"string");return _i(e.valueOf())},"(escape-regex string)\n\n        Function that returns a new string where all special operators used in regex,\n        are escaped with backslashes so they can be used in the RegExp constructor\n        to match a literal string."),env:y("env",function e(e){e=e||this;var t=Object.keys(e.__env__).map(L);var r;if(t.length){r=M.fromArray(t)}else{r=U}if(e.__parent__ instanceof So){return qo.get("env")(e.__parent__).append(r)}return r},"(env)\n        (env obj)\n\n        Function that returns a list of names (functions, macros and variables)\n        that are bound in the current environment or one of its parents."),new:y("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=p(sa(e),q(r.map(function(e){return aa(e)})));return i},"(new obj . args)\n\n        Function that creates new JavaScript instance of an object."),typecheck:y(h,"(typecheck label value type [position])\n\n         Checks the type of value and errors if the type is not one allowed.  Type can be\n         string or list of strings. The position optional argument is used to create a\n         proper error message for the nth argument of function calls."),"unset-special!":y("unset-special!",function(e){h("remove-special!",e,"string");delete Bi.remove(e.valueOf())},"(unset-special! name)\n\n        Function that removes a special symbol from parser added by `set-special!`,\n        name must be a string."),"set-special!":y("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bi.LITERAL;h("set-special!",e,"string",1);h("set-special!",t,"symbol",2);Bi.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n        Add a special symbol to the list of transforming operators by the parser.\n        e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n        transformed into (x (1 2 3)) so you can write x macro that will process\n        the list. 3rd argument is optional, and it can be one of two values:\n        lips.specials.LITERAL, which is the default behavior, or\n        lips.specials.SPLICE which causes the value to be unpacked into the expression.\n        This can be used for e.g. to make `#(1 2 3)` into (x 1 2 3) that is needed\n        by # that defines vectors.'),get:No,".":No,unbind:y(sa,"(unbind fn)\n\n         Function that removes the weak 'this' binding from a function so you\n         can get properties from the actual function object."),type:y(us,"(type object)\n\n         Function that returns the type of an object as string."),debugger:y("debugger",function(){debugger},'(debugger)\n\n        Function that triggers the JavaScript debugger (e.g. the browser devtools)\n        using the "debugger;" statement. If a debugger is not running this\n        function does nothing.'),in:y("in",function(e,t){if(e instanceof L||e instanceof $a||e instanceof C){e=e.valueOf()}return e in aa(t)},'(in key value)\n\n        Function that uses the Javascript "in" operator to check if key is\n        a valid property in the value.'),instanceof:y("instanceof",function(e,t){return t instanceof sa(e)},"(instanceof type obj)\n\n        Predicate that tests if the obj is an instance of type."),"prototype?":y("prototype?",Nu,"(prototype? obj)\n\n         Predicate that tests if value is a valid JavaScript prototype,\n         i.e. calling (new) with it will not throw '<x> is not a constructor'."),"macro?":y("macro?",function(e){return e instanceof Vu},"(macro? expression)\n\n        Predicate that tests if value is a macro."),"function?":y("function?",Xu,"(function? expression)\n\n         Predicate that tests if value is a callable function."),"real?":y("real?",function(e){if(us(e)!=="number"){return false}if(e instanceof C){return e.isFloat()}return C.isFloat(e)},"(real? number)\n\n        Predicate that tests if value is a real number (not complex)."),"number?":y("number?",function(e){return Number.isNaN(e)||C.isNumber(e)},"(number? expression)\n\n        Predicate that tests if value is a number or NaN value."),"string?":y("string?",function(e){return $a.isString(e)},"(string? expression)\n\n        Predicate that tests if value is a string."),"pair?":y("pair?",function(e){return e instanceof M},"(pair? expression)\n\n        Predicate that tests if value is a pair or list structure."),"regex?":y("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n        Predicate that tests if value is a regular expression."),"null?":y("null?",function(e){return Zu(e)},"(null? expression)\n\n        Predicate that tests if value is null-ish (i.e. undefined, nil, or\n        Javascript null)."),"boolean?":y("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n        Predicate that tests if value is a boolean (#t or #f)."),"symbol?":y("symbol?",function(e){return e instanceof L},"(symbol? expression)\n\n        Predicate that tests if value is a LIPS symbol."),"array?":y("array?",function(e){return e instanceof Array},"(array? expression)\n\n        Predicate that tests if value is an array."),"object?":y("object?",function(e){return e!==U&&e!==null&&!(e instanceof za)&&!(e instanceof RegExp)&&!(e instanceof $a)&&!(e instanceof M)&&!(e instanceof C)&&_(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n        Predicate that tests if value is an plain object (not another LIPS type)."),flatten:y("flatten",function e(t){h("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n        Returns a shallow list from tree structure (pairs)."),"array->list":y("array->list",function(e){h("array->list",e,"array");return M.fromArray(e)},"(array->list array)\n\n        Function that converts a JavaScript array to a LIPS cons list."),"tree->array":y("tree->array",gu("tree->array",true),"(tree->array list)\n\n         Function that converts a LIPS cons tree structure into a JavaScript array."),"list->array":y("list->array",gu("list->array"),"(list->array list)\n\n         Function that converts a LIPS list into a JavaScript array."),apply:y("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}h("apply",t,"function",1);var u=n.pop();h("apply",u,["pair","nil"],n.length+2);n=n.concat(qo.get("list->array").call(this,u));return t.apply(this,fs(t,n))},"(apply fn list)\n\n        Function that calls fn with the list of arguments."),length:y("length",function e(t){if(!t||t===U){return 0}if(t instanceof M){return t.length()}if("length"in t){return t.length}},'(length expression)\n\n        Function that returns the length of the object. The object can be a LIPS\n        list or any object that has a "length" property. Returns undefined if the\n        length could not be found.'),"string->number":y("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;h("string->number",e,"string",1);h("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(Wn)||e.match(Kn)){return ti(e,t)}else if(e.match(Qn)||e.match(Jn)){return ii(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(Hn)&&r||e.match(Gn)){return ri(e,t)}if(e.match(Rn)){return oi(e)}}return false},"(string->number number [radix])\n\n        Function that parses a string into a number."),try:y(new Vu("try",function(t,e){var c=this;var f=e.dynamic_scope,l=e.error;return new Promise(function(i,n){var u,a;if(L.is(t.cdr.car.car,"catch")){u=t.cdr.car;if(t.cdr.cdr instanceof M&&L.is(t.cdr.cdr.car.car,"finally")){a=t.cdr.cdr.car}}else if(L.is(t.cdr.car.car,"finally")){a=t.cdr.car}if(!(a||u)){throw new Error("try: invalid syntax")}var o=i;if(a){o=function e(t,r){o=n;Yi(_s(new M(new L("begin"),a.cdr),s),function(){r(t)})}}var s={env:c,error:function e(t){var r=c.inherit("try");if(u){r.set(u.cdr.car.car,t);var n={env:r,error:l};if(f){n.dynamic_scope=c}Yi(_s(new M(new L("begin"),u.cdr.cdr),n),function(e){o(e,i)})}else{o(t,l)}}};if(f){s.dynamic_scope=c}var e=_s(t.car,s);if(ra(e)){e.then(function(e){o(e,i)})["catch"](s.error)}else{o(e,i)}})}),"(try expr (catch (e) code))\n         (try expr (catch (e) code) (finally code))\n         (try expr (finally code))\n\n         Macro that executes expr and catches any exceptions thrown. If catch is provided\n         it's executed when an error is thrown. If finally is provided it's always executed\n         at the end."),raise:y("raise",function(e){throw e},"(raise obj)\n\n        Throws the object verbatim (no wrapping an a new Error)."),throw:y("throw",function(e){throw new Error(e)},"(throw string)\n\n        Throws a new exception."),find:y("find",function t(r,n){h("find",r,["regex","function"]);h("find",n,["pair","nil"]);if(Zu(n)){return U}var e=Gi("find",r);return Yi(e(n.car),function(e){if(e&&e!==U){return n.car}return t(r,n.cdr)})},"(find fn list)\n        (find regex list)\n\n        Higher-order function that finds the first value for which fn return true.\n        If called with a regex it will create a matcher function."),"for-each":y("for-each",function(e){var t;h("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){h("for-each",e,["pair","nil"],t+1)});var u=(t=qo.get("map")).call.apply(t,[this,e].concat(n));if(ra(u)){return u.then(function(){})}},"(for-each fn . lists)\n\n        Higher-order function that calls function `fn` on each\n        value of the argument. If you provide more than one list\n        it will take each value from each list and call `fn` function\n        with that many arguments as number of list arguments."),map:y("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),u=1;u<t;u++){i[u-1]=arguments[u]}h("map",r,"function");var a=qo.get("list?");i.forEach(function(e,t){h("map",e,["pair","nil"],t+1);if(e instanceof M&&!a.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return U}if(i.some(function(e){return e===U})){return U}var o=i.map(function(e){return e.car});var c=this.get("parent.frame");var s=this.newFrame(r,o);s.set("parent.frame",c);return Yi(r.call.apply(r,[s].concat(q(o))),function(t){return Yi(e.call.apply(e,[n,r].concat(q(i.map(function(e){return e.cdr})))),function(e){return new M(t,e)})})},"(map fn . lists)\n\n        Higher-order function that calls function `fn` with each\n        value of the list. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments. The return\n        values of the fn calls are accumulated in a result list and\n        returned by map."),"list?":y("list?",function(e){var t=e;while(true){if(t===U){return true}if(!(t instanceof M)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n        Predicate that tests if value is a proper linked list structure.\n        The car of each pair can be any value. It returns false on cyclic lists."'),some:y("some",function t(r,n){h("some",r,"function");h("some",n,["pair","nil"]);if(Zu(n)){return false}else{return Yi(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n        Higher-order function that calls fn on each element of the list.\n        It stops and returns true when fn returns true for a value.\n        If none of the values give true, some will return false.\n        Analogous to Python any(map(fn, list))."),fold:y("fold",Ta("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),u=3;u<n;u++){i[u-3]=arguments[u]}h("fold",t,"function");i.forEach(function(e,t){h("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===U})){return r}var a=e.call.apply(e,[this,t,r].concat(q(i.map(function(e){return e.cdr}))));return Yi(a,function(e){return t.apply(void 0,q(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n         Function fold is left-to-right reversal of reduce. It call `fn`\n         on each pair of elements of the list and returns a single value.\n         e.g. it computes (fn 'a 'x (fn 'b 'y (fn 'c 'z 'foo)))\n         for: (fold fn 'foo '(a b c) '(x y z))"),pluck:y("pluck",function e(){for(var t=arguments.length,u=new Array(t),r=0;r<t;r++){u[r]=arguments[r]}return function(t){u=u.map(function(e){return e instanceof L?e.__name__:e});if(u.length===0){return U}else if(u.length===1){var e=u,r=j(e,1),n=r[0];return t[n]}var i={};u.forEach(function(e){i[e]=t[e]});return i}},"(pluck . strings)\n\n        If called with a single string it will return a function that when\n        called with an object will return that key from the object.\n        If called with more then one string the returned function will\n        create a new object by copying all properties from the given object."),reduce:y("reduce",Ta("reduce",function(t,r,e){var n=this;for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}h("reduce",r,"function");u.forEach(function(e,t){h("reduce",e,["pair","nil"],t+1)});if(u.some(function(e){return e===U})){return e}return Yi(r.apply(void 0,q(u.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(q(u.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n         Higher-order function that takes each element of the list and calls\n         the fn with result of previous call or init and the next element\n         of the list until each element is processed, and returns a single value\n         as result of last call to `fn` function.\n         e.g. it computes (fn 'c 'z (fn 'b 'y (fn 'a 'x 'foo)))\n         for: (reduce fn 'foo '(a b c) '(x y z))"),filter:y("filter",function e(t,r){h("filter",t,["regex","function"]);h("filter",r,["pair","nil"]);var i=qo.get("list->array")(r);var u=[];var a=Gi("filter",t);return function t(r){function e(e){if(e&&e!==U){u.push(n)}return t(++r)}if(r===i.length){return M.fromArray(u)}var n=i[r];return Yi(a(n),e)}(0)},"(filter fn list)\n        (filter regex list)\n\n        Higher-order function that calls `fn` for each element of the list\n        and return a new list for only those elements for which fn returns\n        a truthy value. If called with a regex it will create a matcher function."),compose:y(Ra,"(compose . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from right to left and returns the last value. Reverse of pipe.\n         e.g.:\n         ((compose (curry + 2) (curry * 3)) 10) --\x3e (+ 2 (* 3 10)) --\x3e 32"),pipe:y(Na,"(pipe . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from left to right and returns the last value. Reverse of compose.\n         e.g.:\n         ((pipe (curry + 2) (curry * 3)) 10) --\x3e (* 3 (+ 2 10)) --\x3e 36"),curry:y(Ya,"(curry fn . args)\n\n         Higher-order function that creates a curried version of the function.\n         The result function will have partially applied arguments and it\n         will keep returning one-argument functions until all arguments are provided,\n         then it calls the original function with the accumulated arguments.\n\n         e.g.:\n         (define (add a b c d) (+ a b c d))\n         (define add1 (curry add 1))\n         (define add12 (add 2))\n         (display (add12 3 4))"),gcd:y("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Zo("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n        Function that returns the greatest common divisor of the arguments."),lcm:y("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Zo("lcm",r,"number");var i=r.length,u=Tu(r[0]);for(var a=1;a<i;a++){var o=Tu(r[a]),s=u;while(u&&o){u>o?u%=o:o%=u}u=Tu(s*r[a])/(u+o)}return C(u)},"(lcm n1 n2 ...)\n\n        Function that returns the least common multiple of the arguments."),"odd?":y("odd?",Ua(function(e){return C(e).isOdd()}),"(odd? number)\n\n         Checks if number is odd."),"even?":y("even?",Ua(function(e){return C(e).isEven()}),"(even? number)\n\n         Checks if number is even."),"*":y("*",qa(function(e,t){return C(e).mul(t)},C(1)),"(* . numbers)\n\n        Multiplies all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":y("+",qa(function(e,t){return C(e).add(t)},C(0)),"(+ . numbers)\n\n        Sums all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":y("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}Zo("-",t,"number");if(t.length===1){return C(t[0]).sub()}if(t.length){return t.reduce(Ma(function(e,t){return C(e).sub(t)}))}},"(- n1 n2 ...)\n        (- n)\n\n        Subtracts n2 and subsequent numbers from n1. If only one argument is passed\n        it will negate the value."),"/":y("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}Zo("/",t,"number");if(t.length===1){return C(1).div(t[0])}return t.reduce(Ma(function(e,t){return C(e).div(t)}))},"(/ n1 n2 ...)\n        (/ n)\n\n        Divides n1 by n2 and subsequent arguments one by one. If single argument\n        is passed it will calculate (/ 1 n)."),abs:y("abs",Ua(function(e){return C(e).abs()}),"(abs number)\n\n         Function that returns the absolute value (magnitude) of number."),truncate:y("truncate",function(e){h("truncate",e,"number");if(C.isFloat(e)){if(e instanceof C){e=e.valueOf()}return uo(Yu(e))}return e},"(truncate n)\n\n        Function that returns the integer part (floor) of a real number."),sqrt:y("sqrt",Ua(function(e){return C(e).sqrt()}),"(sqrt number)\n\n         Function that returns the square root of the number."),"**":y("**",Ma(function(e,t){e=C(e);t=C(t);if(t.cmp(0)===-1){return uo(1).div(e).pow(t.sub())}return e.pow(t)}),"(** a b)\n\n         Function that calculates number a to to the power of b."),"1+":y("1+",Ua(function(e){return C(e).add(1)}),"(1+ number)\n\n         Function that adds 1 to the number and return result."),"1-":y(Ua(function(e){return C(e).sub(1)}),"(1- number)\n\n         Function that subtracts 1 from the number and return result."),"%":y("%",function(e,t){Zo("%",[e,t],"number");return C(e).rem(t)},"(% n1 n2)\n\n        Function returns the remainder of n1/n2 (modulo)."),"==":y("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Zo("==",t,"number");return Lu(function(e,t){return C(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        all equal."),">":y(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Zo(">",t,"number");return Lu(function(e,t){return C(e).cmp(t)===1},t)},"(> x1 x2 x3 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically decreasing, i.e. x1 > x2 and x2 > x3 and so on."),"<":y("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Zo("<",t,"number");return Lu(function(e,t){return C(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically increasing, i.e. x1 < x2 and x2 < x3 and so on."),"<=":y("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Zo("<=",t,"number");return Lu(function(e,t){return[0,-1].includes(C(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nondecreasing, i.e. x1 <= x2 and x2 <= x3 and so on."),">=":y(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Zo(">=",t,"number");return Lu(function(e,t){return[0,1].includes(C(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nonincreasing, i.e. x1 >= x2 and x2 >= x3 and so on."),"eq?":y("eq?",Uu,"(eq? a b)\n\n         Function that compares two values if they are identical."),or:y(new Vu("or",function(e,t){var i=t.dynamic_scope,u=t.error;var a=qo.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return false}var s;return function t(){function e(e){s=e;if(s!==false){return s}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=_s(r,{env:o,dynamic_scope:i,error:u});return Yi(n,e)}}()}),"(or . expressions)\n\n         Macro that executes the values one by one and returns the first that is\n         a truthy value. If there are no expressions that evaluate to true it\n         returns false."),and:y(new Vu("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=t.dynamic_scope,u=t.error;var a=qo.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return true}var s;return function t(){function e(e){s=e;if(s===false){return false}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=_s(r,{env:o,dynamic_scope:i,error:u});return Yi(n,e)}}()}),"(and . expressions)\n\n         Macro that evaluates each expression in sequence and if any value returns false\n         it will stop and return false. If each value returns true it will return the\n         last value. If it's called without arguments it will return true."),"|":y("|",function(e,t){return C(e).or(t)},"(| a b)\n\n        Function that calculates the bitwise or operation."),"&":y("&",function(e,t){return C(e).and(t)},"(& a b)\n\n        Function that calculates the bitwise and operation."),"~":y("~",function(e){return C(e).neg()},"(~ number)\n\n        Function that calculates the bitwise inverse (flip all the bits)."),">>":y(">>",function(e,t){return C(e).shr(t)},"(>> a b)\n\n        Function that right shifts the value a by value b bits."),"<<":y("<<",function(e,t){return C(e).shl(t)},"(<< a b)\n\n        Function that left shifts the value a by value b bits."),not:y("not",function e(t){if(Zu(t)){return true}return!t},"(not object)\n\n        Function that returns the Boolean negation of its argument.")},undefined,"global");var Yo=qo.inherit("user-env");function Vo(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n         Constant used to hide stdin, stdout and stderr so they don't interfere\n         with variables with the same name. Constants are an internal type\n         of variable that can't be redefined, defining a variable with the same name\n         will throw an error.");qo.set("**interaction-environment**",e)}Vo(Yo,Lo);qo.doc("**interaction-environment**","**interaction-environment**\n\n    Internal dynamic, global variable used to find interpreter environment.\n    It's used so the read and write functions can locate **internal-env**\n    that contains the references to stdin, stdout and stderr.");(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;qo.set(r,y(r,function(e){h(r,e,"number");if(e instanceof C){return e[t]()}},"(".concat(r," number)\n\n            Function that calculates the ").concat(r," of a number.")))})})();function zo(e){if(e.length===1){return e[0]}else{var t=[];var r=zo(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function $o(e,t,r){var n=[];for(var i=t;i<=r;++i){var u=[];for(var a=0;a<i;++a){u.push(e)}n=n.concat(zo(u))}return n}$o(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";qo.set(i,y(i,function(e){return r.reduce(function(e,t){h(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n        Function that calculates ").concat(n)))});function Jo(e,t){var r=e.split(En.sep).filter(Boolean);for(var n=r.length;n--;){var i;var u=(i=En).join.apply(i,["/"].concat(q(r.slice(0,n+1))));if(t(u)){return u}}}function Ko(e){return Jo(e,function(e){return Dn.existsSync(En.join(e,"node_modules"))})}function Go(){return typeof global!=="undefined"&&global.global===global}function Ho(){return Wo.apply(this,arguments)}function Wo(){Wo=B(z.mark(function e(){var r,n,i,u,a;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Promise.resolve().then(function(){return Ws});case 2:r=t.sent;n=r.createRequire;An=n(typeof document==="undefined"&&typeof location==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:typeof document==="undefined"?location.href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);t.next=7;return Promise.resolve().then(function(){return Ws});case 7:Dn=t.sent;t.next=10;return Promise.resolve().then(function(){return pc});case 10:En=t.sent;qo.set("global",global);qo.set("self",global);qo.set("window",undefined);i=new URL(typeof document==="undefined"&&typeof location==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:typeof document==="undefined"?location.href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);u=En.dirname(i.pathname);a=En.basename(i.pathname);qo.set("__dirname",u);qo.set("__filename",a);qo.set("require.resolve",y("require.resolve",function(e){h("require.resolve",e,"string");var t=e.valueOf();return An.resolve(t)},"(require.resolve path)\n\n        Returns the path relative to the current module.\n\n        Only available when LIPS is running under Node.js."));qo.set("require",y("require",function(t){h("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=An(En.join(e,t))}else{var n=Ko(e);if(n){r=An(En.join(n,"node_modules",t))}else{r=An(t)}}}catch(e){r=An(t)}return oa(r,global)},"(require module)\n\n        Function used inside Node.js to import a module."));case 21:case"end":return t.stop()}}},e)}));return Wo.apply(this,arguments)}if(Go()){Ho()}else if(typeof window!=="undefined"&&window===gn){qo.set("window",window);qo.set("global",undefined);qo.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){qo.set("self",self);qo.set("window",undefined);qo.set("global",undefined)}function Qo(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(Xu(r)){return"Invalid type: got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){var u=r[0].toLowerCase();r="a"+("aeiou".includes(u)?"n ":" ")+r[0]}else{var a=r[r.length-1];r=r.slice(0,-1).join(", ")+" or "+a}}return"Expecting ".concat(r,", got ").concat(t).concat(i)}function Zo(r,e,n){e.forEach(function(e,t){h(r,e,n,t+1)})}function Xo(e,t,r){h(e,t,r);if(t.__type__===Ao){throw new Error(Qo(e,"binary-port","textual-port"))}}function h(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=us(t).toLowerCase();if(Xu(r)){if(!r(t)){throw new Error(Qo(e,i,r,n))}return}var u=false;if(r instanceof M){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){u=true}}else{r=r.valueOf().toLowerCase()}if(!u&&i!==r){throw new Error(Qo(e,i,r,n))}}function es(e){var t=_(e);return["string","function"].includes(t)||_(e)==="symbol"||e instanceof ki||e instanceof L||e instanceof C||e instanceof $a||e instanceof RegExp}function ts(e){return e instanceof C||e instanceof $a||e instanceof za}function rs(e,t){if(e===null){return false}return _(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function ns(e,t){if(rs(e,t)||rs(e.__proto__,t)){return Xu(e[t])}}function is(r){var n=new WeakMap;return function(e){var t=n.get(e);if(!t){t=r(e)}return t}}us=is(us);function us(e){var t=wn.get(e);if(t){return t}if(_(e)==="object"){for(var r=0,n=Object.entries(bn);r<n.length;r++){var i=j(n[r],2),u=i[0],a=i[1];if(e instanceof a){return u}}if(e.__instance__){e.__instance__=false;if(e.__instance__){if(Xu(e.toType)){return e.toType()}return"instance"}}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(ns(e,Symbol.iterator)){return"iterator"}if(ns(e,Symbol.asyncIterator)){return"async-iterator"}}if(e.constructor.name===""){return"object"}return e.constructor.name.toLowerCase()}}return _(e)}function as(e){var t=[];r(e);if(t.length){return u(e)}return e;function r(e){if(ra(e)){t.push(e)}else if(e instanceof M){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=B(z.mark(function e(r){var n;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.t0=M;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return u(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return u(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[ya]){n[ya]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}}},e)}));return i.apply(this,arguments)}function u(e){if(e instanceof Array){return Ci(e.map(u))}if(e instanceof M&&t.length){return n(e)}return e}}function os(e,t){var r=t.env,n=t.dynamic_scope,i=t.error;var u=[];var a=e;Ru(a);function o(){return u}return function t(){if(a instanceof M){var e=_s(a.car,{env:r,dynamic_scope:n,error:i});if(n){e=Yi(e,function(e){if(Ba(e)){return e.bind(n)}return e})}return Yi(as(e),function(e){u.push(e);if(a.haveCycles("cdr")){return o()}a=a.cdr;return t()})}else if(a===U){return o()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function ss(e,t,r){var n=e.invoke(t,r);return Yi(as(n),function(e){if(e instanceof M){e.markCycles()}return Io(e)})}function cs(e,t,r){function n(e){if(e instanceof M){e.markCycles();return e}return Io(e)}var i=e.invoke(t,r);return Yi(as(i),function e(t){if(!t||t&&t[ya]||es(t)){return t}else{return Yi(_s(t,r),n)}})}function fs(e,t){if(la(e)&&!fa(e)&&(!ha(e)||_a(e))){t=t.map(aa)}if(!Sa(e)&&t.some(xu)&&!xu(e)&&!Au(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(xu(i)){u=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return Yi(i.apply(this,r),aa)};Fa(u,"__bound__",true);Fa(u,"__fn__",i);u.prototype=i.prototype;r[n]=u}else{r[n]=i}};while(n--){var u;i()}t=r}return t}function ls(i,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=t.env,a=t.dynamic_scope,r=t.error,o=r===void 0?function(){}:r;e=os(e,{env:u,dynamic_scope:a,error:o});return Yi(e,function(e){if(Sa(i)){i=sa(i)}e=fs(i,e);var t=e.slice();var r=(a||u).newFrame(i,t);var n=as(i.apply(r,e));return Yi(n,function(e){if(e instanceof M){e.markCycles();return Io(e)}return ia(e)},o)})}var hs=function(){function t(e){D(this,t);this.__value__=e}A(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}},{key:"toString",value:function e(){return"#<Continuation>"}}]);return t}();var ps=function e(){};function _s(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=e.env,n=e.dynamic_scope,c=e.error,i=c===void 0?ps:c;try{if(n===true){r=n=r||qo}else if(r===true){r=n=qo}else{r=r||qo}var u={env:r,dynamic_scope:n,error:i};var a;if(Zu(t)){return t}if(t instanceof L){return r.get(t)}if(!(t instanceof M)){return t}var o=t.car;var f=t.cdr;if(o instanceof M){a=as(_s(o,u));if(ra(a)){return a.then(function(e){return _s(new M(e,t.cdr),u)})}else if(!ta(a)){throw new Error(us(a)+" "+r.get("repr")(a)+" is not callable while evaluating "+t.toString())}}if(o instanceof L){a=r.get(o)}else if(Xu(o)){a=o}var s;if(a instanceof Ku){s=ss(a,t,u)}else if(a instanceof Vu){s=cs(a,f,u)}else if(Xu(a)){s=ls(a,f,u)}else if(ea(a)){s=a.invoke()}else if(t instanceof M){a=o&&o.toString();throw new Error("".concat(us(o)," ").concat(a," is not a function"))}else{return t}var l=r.get(Symbol["for"]("__promise__"),{throwError:false});if(l===true&&ra(s)){s=s.then(function(e){if(e instanceof M&&!a[ya]){return _s(e,u)}return e});return new ki(s)}return s}catch(e){i&&i.call(r,e,t)}}var ds=ys(function(e){return e});var vs=ys(function(e,t){return t});function ys(_){return function(){var n=B(z.mark(function e(r,n,i){var u,a,o,s,h,c,p,f,l;return z.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(i===true){n=i=n||Yo}else if(n===true){n=i=Yo}else{n=n||Yo}u=[];a=Array.isArray(r)?r:Mi(r);o=false;s=false;t.prev=5;c=yn(a);case 7:t.next=9;return c.next();case 9:if(!(o=!(p=t.sent).done)){t.next=27;break}f=p.value;l=_s(f,{env:n,dynamic_scope:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}throw t}});if(ra(l)){t.next=16;break}u.push(_(f,l));t.next=24;break;case 16:t.t0=u;t.t1=_;t.t2=f;t.next=21;return l;case 21:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 24:o=false;t.next=7;break;case 27:t.next=33;break;case 29:t.prev=29;t.t5=t["catch"](5);s=true;h=t.t5;case 33:t.prev=33;t.prev=34;if(!(o&&c["return"]!=null)){t.next=38;break}t.next=38;return c["return"]();case 38:t.prev=38;if(!s){t.next=41;break}throw h;case 41:return t.finish(38);case 42:return t.finish(33);case 43:return t.abrupt("return",u);case 44:case"end":return t.stop()}}},e,null,[[5,29,33,43],[34,,38,42]])}));function e(e,t,r){return n.apply(this,arguments)}return e}()}function ms(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=wi(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var u=new di;var a=hn(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.includes(s)){u.push(s)}else if(!u.is_empty()){var f=u.top();var c=t[f];if(s===c){u.pop()}else{throw new Error("Syntax error: missing closing ".concat(c))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){a.e(e)}finally{a.f()}return u.is_empty()}function gs(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new gn.Worker(r.createObjectURL(n))}function bs(){return Gs.version.match(/^(\{\{VER\}\}|DEV)$/)}function ws(){if(Go()){return}var e;if(document.currentScript){e=document.currentScript}else{var t=document.querySelectorAll("script");if(!t.length){return}e=t[t.length-1]}var r=e.getAttribute("src");return r}var Ds=ws();function Es(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t="dist/std.xcb";if(e===""){if(Ds){e=Ds.replace(/[^/]*$/,"std.xcb")}else if(bs()){e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t)}else{e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(Gs.version,"/").concat(t)}}var r=qo.get("load");return r.call(Yo,e,qo)}function As(e){this.url=e;var a=this.worker=gs(function(){var a;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initialized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];a.exec(e,t).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var u=r.params[0];if(typeof u!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(u,"/dist/lips.min.js"));a=new Gs.Interpreter("worker");o=Es(u);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var u=++n;return new Promise(function(n,i){a.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===u){if(r.error){i(r.error)}else{n(r.result)}a.removeEventListener("message",e)}});a.postMessage({type:"RPC",method:t,id:u,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.rpc("eval",[e,t])}}var xs={pair:function e(t){var r=j(t,2),n=r[0],i=r[1];return M(n,i)},number:function e(t){if($a.isString(t)){return C([t,10])}return C(t)},regex:function e(t){var r=j(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return U},symbol:function e(t){if($a.isString(t)){return L(t)}else if(Array.isArray(t)){return L(Symbol["for"](t[0]))}},string:$a,character:za};var Fs=Object.keys(xs);var ks={};for(var Cs=0,Os=Object.entries(Fs);Cs<Os.length;Cs++){var Ss=j(Os[Cs],2),Bs=Ss[0],js=Ss[1];ks[js]=+Bs}function Is(e){return ks[e]}function Ps(e){return Fs[e]}function Ns(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":Is("regex"),"#":[r.source,r.flags]}}var n=Is(r.constructor.__class__);if(!na(n)){return{"@":n,"#":r.serialize()}}}return t})}function Rs(e){return JSON.parse(e,function(e,t){if(t&&_(t)==="object"){if(!na(t["@"])){var r=Ps(t["@"]);if(xs[r]){return xs[r](t["#"])}}}return t})}var Ts=function(){var e={pair:M,symbol:L,number:C,string:$a,character:za,nil:U.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new Ar;var u={};for(var n=0,i=Object.entries(xs);n<i.length;n++){var a=j(i[n],2),o=a[0],s=a[1];var f=e[o];u[o]=t(f,s)}var c=43311;Object.keys(u).forEach(function(e){var t=u[e];if(typeof t==="function"){var r=t;Rr({Class:r,tag:c,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;Rr({Class:i,tag:c,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}c++});return r}();function Ls(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var u=0;t.forEach(function(e){i.set(e,u);u+=e.length});return i}else if(t.length){return t[0]}}function Us(){var e=1;var t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}var Ms=7;function qs(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,Ms));var n=r.substring(0,4);if(n==="LIPS"){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function Ys(e){var t=Us();var r=Ts.encode(e);return Ls(t,un(r,{magic:false}))}function Vs(e){var t=qs(e),r=t.type,n=t.version;if(r==="LIPS"&&n===1){var i=an(e.slice(Ms),{magic:false});return Ts.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}function zs(e){console.error(e.message||e);if(e.code){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function $s(){var a=["text/x-lips","text/x-scheme"];var o;function s(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(vs).then(t)["catch"](function(e){zs(e);t()})}else{return vs(r.innerHTML).then(t)["catch"](function(e){zs(e);t()})}})}function e(){return new Promise(function(i){var u=Array.from(document.querySelectorAll("script"));return function e(){var t=u.shift();if(!t){i()}else{var r=t.getAttribute("type");if(a.includes(r)){var n=t.getAttribute("bootstrap");if(!o&&typeof n==="string"){return Es(n).then(function(){return s(t)}).then(e)}else{return s(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+a.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(Js){var t=Js;var r=t.getAttribute("bootstrap");if(typeof r==="string"){return Es(r).then(function(){o=true;return e()})}}return e()}var Js=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){Fn(window,$s)}var Ks=function(){var e=$a("Tue, 14 Nov 2023 19:09:39 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var u="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter DEV (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specific function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return u}();$i(eu,"__class__","ahead");$i(M,"__class__","pair");$i(mu,"__class__","nil");$i(tu,"__class__","pattern");$i(Xi,"__class__","formatter");$i(Vu,"__class__","macro");$i(Ku,"__class__","syntax");$i(So,"__class__","environment");$i(ho,"__class__","input-port");$i(po,"__class__","output-port");$i(_o,"__class__","output-port");$i(vo,"__class__","output-string-port");$i(mo,"__class__","input-string-port");$i(wo,"__class__","input-file-port");$i(yo,"__class__","output-file-port");$i(Oo,"__class__","lips-error");[C,io,fo,uo,lo].forEach(function(e){$i(e,"__class__","number")});$i(za,"__class__","character");$i(L,"__class__","symbol");$i($a,"__class__","string");$i(ki,"__class__","promise");var Gs={version:"DEV",banner:Ks,date:"Tue, 14 Nov 2023 19:09:39 +0000",exec:vs,parse:Ra(Ji,Mi),tokenize:wi,evaluate:_s,compile:ds,serialize:Ns,unserialize:Rs,serialize_bin:Ys,unserialize_bin:Vs,bootstrap:Es,Environment:So,env:Yo,Worker:As,Interpreter:Co,balanced_parenthesis:ms,balancedParenthesis:ms,balanced:ms,Macro:Vu,Syntax:Ku,Pair:M,Values:jo,QuotedPromise:ki,Error:Oo,quote:Io,InputPort:ho,OutputPort:po,BufferedOutputPort:_o,InputFilePort:wo,OutputFilePort:yo,InputStringPort:mo,OutputStringPort:vo,InputByteVectorPort:go,OutputByteVectorPort:bo,InputBinaryFilePort:Do,OutputBinaryFilePort:Eo,Formatter:Xi,Parser:Li,Lexer:s,specials:Bi,repr:bu,nil:U,eof:Fo,LSymbol:L,LNumber:C,LFloat:uo,LComplex:io,LRational:fo,LBigInteger:lo,LCharacter:za,LString:$a,rationalize:so};qo.set("lips",Gs);var Hs={};var Ws=Object.freeze({__proto__:null,default:Hs});function Qs(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var Zs=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var Xs=function(e){return Zs.exec(e).slice(1)};function ec(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=Qs(lc(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function tc(e){var t=rc(e),r=hc(e,-1)==="/";e=Qs(lc(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}function rc(e){return e.charAt(0)==="/"}function nc(){var e=Array.prototype.slice.call(arguments,0);return tc(lc(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function ic(e,t){e=ec(e).substr(1);t=ec(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var u=Math.min(n.length,i.length);var a=u;for(var o=0;o<u;o++){if(n[o]!==i[o]){a=o;break}}var s=[];for(var o=a;o<n.length;o++){s.push("..")}s=s.concat(i.slice(a));return s.join("/")}var uc="/";var ac=":";function oc(e){var t=Xs(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}function sc(e,t){var r=Xs(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}function cc(e){return Xs(e)[3]}var fc={extname:cc,basename:sc,dirname:oc,sep:uc,delimiter:ac,relative:ic,join:nc,isAbsolute:rc,normalize:tc,resolve:ec};function lc(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var hc="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)};var pc=Object.freeze({__proto__:null,resolve:ec,normalize:tc,isAbsolute:rc,join:nc,relative:ic,sep:uc,delimiter:ac,dirname:oc,basename:sc,extname:cc,default:fc});return Gs});